'use strict';

var chunkVDMQCSXT_cjs = require('./chunk-VDMQCSXT.cjs');
var chunkBXK5TNJE_cjs = require('./chunk-BXK5TNJE.cjs');
var chunkZJCPW6MS_cjs = require('./chunk-ZJCPW6MS.cjs');
var chunk6DP6RKUA_cjs = require('./chunk-6DP6RKUA.cjs');
var chunkS6UNPMAS_cjs = require('./chunk-S6UNPMAS.cjs');
var chunkSWV5E75F_cjs = require('./chunk-SWV5E75F.cjs');
var chunkZ3TFPXVN_cjs = require('./chunk-Z3TFPXVN.cjs');
var chunkFFJVCQ5R_cjs = require('./chunk-FFJVCQ5R.cjs');
var chunk4LNS5QDP_cjs = require('./chunk-4LNS5QDP.cjs');
var chunkO5HS7ZND_cjs = require('./chunk-O5HS7ZND.cjs');
var chunkP52GA3GJ_cjs = require('./chunk-P52GA3GJ.cjs');
var chunkLEE3NMNP_cjs = require('./chunk-LEE3NMNP.cjs');
var chunkN3QTYHRZ_cjs = require('./chunk-N3QTYHRZ.cjs');
var chunkJYMQJ32S_cjs = require('./chunk-JYMQJ32S.cjs');
var chunkEXDNFGI7_cjs = require('./chunk-EXDNFGI7.cjs');
var chunkLZEY55QZ_cjs = require('./chunk-LZEY55QZ.cjs');
var chunkORUPC5TV_cjs = require('./chunk-ORUPC5TV.cjs');
var chunkQDGZBDBI_cjs = require('./chunk-QDGZBDBI.cjs');
var chunkB7YGVKTE_cjs = require('./chunk-B7YGVKTE.cjs');
var chunkNH2JVQ6V_cjs = require('./chunk-NH2JVQ6V.cjs');
var chunkPF3XWKE5_cjs = require('./chunk-PF3XWKE5.cjs');
var chunk43WUKHJZ_cjs = require('./chunk-43WUKHJZ.cjs');
var chunkNAATBUHR_cjs = require('./chunk-NAATBUHR.cjs');
var chunkBBCXRXHI_cjs = require('./chunk-BBCXRXHI.cjs');
var chunkXZB73CF4_cjs = require('./chunk-XZB73CF4.cjs');
var chunkHLW3XD5R_cjs = require('./chunk-HLW3XD5R.cjs');
var chunkEF46XW4Z_cjs = require('./chunk-EF46XW4Z.cjs');
var chunkEKIQE524_cjs = require('./chunk-EKIQE524.cjs');
var chunkPEFJAWNR_cjs = require('./chunk-PEFJAWNR.cjs');
var chunkMKJDBXX4_cjs = require('./chunk-MKJDBXX4.cjs');
var chunkHRA4FUO6_cjs = require('./chunk-HRA4FUO6.cjs');
var chunkQYJ7RQJ2_cjs = require('./chunk-QYJ7RQJ2.cjs');
var chunkKVSUL3EW_cjs = require('./chunk-KVSUL3EW.cjs');
var chunkFIXAVBUA_cjs = require('./chunk-FIXAVBUA.cjs');
var chunkVV4N4WY6_cjs = require('./chunk-VV4N4WY6.cjs');
var chunkR4DM4635_cjs = require('./chunk-R4DM4635.cjs');
var chunk2O7D6F67_cjs = require('./chunk-2O7D6F67.cjs');
var chunk6HFFWEM3_cjs = require('./chunk-6HFFWEM3.cjs');
var chunkBR2XGATJ_cjs = require('./chunk-BR2XGATJ.cjs');
var chunkSWMRCGL4_cjs = require('./chunk-SWMRCGL4.cjs');
var chunkFHY3K6PL_cjs = require('./chunk-FHY3K6PL.cjs');
require('./chunk-ZO46CFVN.cjs');
var chunkBTJHYGPI_cjs = require('./chunk-BTJHYGPI.cjs');
var chunkKMN7JX2X_cjs = require('./chunk-KMN7JX2X.cjs');
var chunkSJ3BF4BO_cjs = require('./chunk-SJ3BF4BO.cjs');
var chunkIY7UQPDO_cjs = require('./chunk-IY7UQPDO.cjs');
var chunkOIUNIDUY_cjs = require('./chunk-OIUNIDUY.cjs');
var chunk53K3KWXQ_cjs = require('./chunk-53K3KWXQ.cjs');
var chunk2J2V4TMJ_cjs = require('./chunk-2J2V4TMJ.cjs');
var chunkOR5DRJCW_cjs = require('./chunk-OR5DRJCW.cjs');
var React20 = require('react');
var agGridReact = require('ag-grid-react');
var agGridCommunity = require('ag-grid-community');
var classVarianceAuthority = require('class-variance-authority');
var jsxRuntime = require('react/jsx-runtime');
var lucideReact = require('lucide-react');

function _interopNamespace(e) {
  if (e && e.__esModule) return e;
  var n = Object.create(null);
  if (e) {
    Object.keys(e).forEach(function (k) {
      if (k !== 'default') {
        var d = Object.getOwnPropertyDescriptor(e, k);
        Object.defineProperty(n, k, d.get ? d : {
          enumerable: true,
          get: function () { return e[k]; }
        });
      }
    });
  }
  n.default = e;
  return Object.freeze(n);
}

var React20__namespace = /*#__PURE__*/_interopNamespace(React20);

agGridCommunity.ModuleRegistry.registerModules([agGridCommunity.AllCommunityModule]);
var agGridVariants = classVarianceAuthority.cva("ag-theme-custom w-full", {
  variants: {
    /**
     * Visual variant of the grid
     */
    variant: {
      default: "",
      bordered: "[&_.ag-root-wrapper]:border [&_.ag-root-wrapper]:border-border [&_.ag-root-wrapper]:rounded-lg",
      striped: "[&_.ag-row-odd]:bg-muted/50",
      card: "[&_.ag-root-wrapper]:shadow-card [&_.ag-root-wrapper]:rounded-lg [&_.ag-root-wrapper]:border-0"
    },
    /**
     * Size/density of the grid rows
     */
    size: {
      xs: "[&_.ag-row]:h-7 [&_.ag-header-row]:h-7 text-xs [&_.ag-cell]:px-2",
      sm: "[&_.ag-row]:h-8 [&_.ag-header-row]:h-8 text-xs [&_.ag-cell]:px-3",
      md: "[&_.ag-row]:h-10 [&_.ag-header-row]:h-10 text-sm [&_.ag-cell]:px-4",
      lg: "[&_.ag-row]:h-12 [&_.ag-header-row]:h-12 text-base [&_.ag-cell]:px-4",
      xl: "[&_.ag-row]:h-14 [&_.ag-header-row]:h-14 text-base [&_.ag-cell]:px-6"
    },
    /**
     * Brand theme variant
     */
    brand: {
      default: "",
      mieweb: "ag-brand-mieweb",
      bluehive: "ag-brand-bluehive",
      waggleline: "ag-brand-waggleline",
      webchart: "ag-brand-webchart",
      "enterprise-health": "ag-brand-enterprise-health"
    }
  },
  defaultVariants: {
    variant: "default",
    size: "md",
    brand: "default"
  }
});
var getDefaultColDef = (sortable, filterable, resizable) => ({
  sortable,
  filter: filterable,
  resizable,
  minWidth: 100,
  flex: 1,
  suppressMovable: false,
  headerClass: "ag-header-cell-custom",
  cellClass: "ag-cell-custom"
});
function AGGridInner({
  className,
  variant,
  size,
  brand,
  height = 400,
  loading = false,
  columnDefs,
  rowData,
  defaultColDef: userDefaultColDef,
  onGridReady,
  onRowClick,
  gridRef,
  rowSelection,
  brandConfig,
  pagination = false,
  resizable = true,
  sortable = true,
  filterable = true,
  noDataMessage = "No data to display",
  loadingMessage = "Loading...",
  ...props
}, ref) {
  const internalRef = React20__namespace.useRef(null);
  const gridApiRef = React20__namespace.useRef(null);
  const resolvedRef = gridRef || ref || internalRef;
  const handleGridReady = React20__namespace.useCallback(
    (event) => {
      gridApiRef.current = event.api;
      onGridReady?.(event);
    },
    [onGridReady]
  );
  const handleRowClicked = React20__namespace.useCallback(
    (event) => {
      onRowClick?.(event);
    },
    [onRowClick]
  );
  const mergedDefaultColDef = React20__namespace.useMemo(
    () => ({
      ...getDefaultColDef(sortable, filterable, resizable),
      ...userDefaultColDef
    }),
    [userDefaultColDef, sortable, filterable, resizable]
  );
  const resolvedRowSelection = React20__namespace.useMemo(() => {
    if (!rowSelection) return void 0;
    if (typeof rowSelection === "object") {
      return rowSelection;
    }
    if (rowSelection === "multiple") {
      return {
        mode: "multiRow",
        enableClickSelection: true
      };
    }
    if (rowSelection === "single") {
      return {
        mode: "singleRow",
        enableClickSelection: true
      };
    }
    return void 0;
  }, [rowSelection]);
  React20__namespace.useEffect(() => {
    if (gridApiRef.current) {
      if (loading) {
        gridApiRef.current.showLoadingOverlay();
      } else {
        gridApiRef.current.hideOverlay();
      }
    }
  }, [loading]);
  return /* @__PURE__ */ jsxRuntime.jsx(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(agGridVariants({ variant, size, brand }), className),
      style: {
        height: typeof height === "number" ? `${height}px` : height,
        ...brandConfig && {
          "--ag-primary-color": brandConfig.colors.primary[600],
          "--ag-font-family": brandConfig.typography.fontFamily.sans.join(", ")
        }
      },
      "data-brand": brand,
      children: /* @__PURE__ */ jsxRuntime.jsx(
        agGridReact.AgGridReact,
        {
          ref: resolvedRef,
          columnDefs,
          rowData,
          defaultColDef: mergedDefaultColDef,
          onGridReady: handleGridReady,
          onRowClicked: handleRowClicked,
          animateRows: true,
          enableBrowserTooltips: true,
          rowSelection: resolvedRowSelection,
          pagination,
          paginationPageSize: pagination ? 50 : void 0,
          paginationPageSizeSelector: pagination ? [25, 50, 100, 200] : void 0,
          noRowsOverlayComponent: () => /* @__PURE__ */ jsxRuntime.jsx("div", { className: "text-muted-foreground py-8 text-center", children: noDataMessage }),
          loadingOverlayComponent: () => /* @__PURE__ */ jsxRuntime.jsx("div", { className: "text-muted-foreground py-8 text-center", children: loadingMessage }),
          theme: "legacy",
          ...props
        }
      )
    }
  );
}
var AGGrid = React20__namespace.forwardRef(AGGridInner);
AGGrid.displayName = "AGGrid";
function getNestedValue(obj, path) {
  if (!obj || !path) return void 0;
  const parts = path.split(".");
  let current = obj;
  for (const part of parts) {
    if (current === null || current === void 0) return void 0;
    if (typeof current === "object") {
      current = current[part];
    } else {
      return void 0;
    }
  }
  return current;
}
function getFaviconUrl(domain) {
  if (!domain || typeof domain !== "string") return null;
  const cleanDomain = domain.replace(/^https?:\/\//, "").replace(/\/.*$/, "").trim();
  if (!cleanDomain) return null;
  return `https://www.google.com/s2/favicons?domain=${cleanDomain}&sz=64`;
}
function formatPhoneDisplay(phone) {
  if (!phone) return "";
  const cleaned = phone.replace(/\D/g, "");
  if (cleaned.length === 10) {
    return `${cleaned.slice(0, 3)}-${cleaned.slice(3, 6)}-${cleaned.slice(6)}`;
  }
  if (cleaned.length === 11 && cleaned.startsWith("1")) {
    return `${cleaned[0]}-${cleaned.slice(1, 4)}-${cleaned.slice(4, 7)}-${cleaned.slice(7)}`;
  }
  return phone;
}
function getInitials2(name) {
  if (!name || typeof name !== "string") return "??";
  const parts = name.split(" ").filter(Boolean);
  if (parts.length >= 2) {
    return `${parts[0][0]}${parts[parts.length - 1][0]}`.toUpperCase();
  }
  return name.substring(0, 2).toUpperCase();
}
function getAvatarColor(name) {
  const colors = [
    "bg-primary-600",
    "bg-green-600",
    "bg-orange-600",
    "bg-secondary-600",
    "bg-pink-600",
    "bg-primary-700",
    "bg-teal-600",
    "bg-amber-600"
  ];
  if (!name || typeof name !== "string") return colors[0];
  let hash = 0;
  for (let i = 0; i < name.length; i++) {
    hash = name.charCodeAt(i) + ((hash << 5) - hash);
  }
  return colors[Math.abs(hash) % colors.length];
}
function cellRendererPropsAreEqual(prevProps, nextProps) {
  if (prevProps.value !== nextProps.value) return false;
  if (prevProps.data !== nextProps.data) return false;
  if (prevProps.node?.rowIndex !== nextProps.node?.rowIndex) return false;
  return true;
}
var statusColors = {
  active: {
    label: "Active",
    bgClass: "bg-green-100 dark:bg-green-900/30",
    textClass: "text-green-600 dark:text-green-400"
  },
  inactive: {
    label: "Inactive",
    bgClass: "bg-gray-200 dark:bg-gray-700",
    textClass: "text-gray-600 dark:text-gray-400"
  },
  pending: {
    label: "Pending",
    bgClass: "bg-amber-100 dark:bg-amber-900/30",
    textClass: "text-amber-600 dark:text-amber-400"
  },
  new: {
    label: "New",
    bgClass: "bg-primary-100 dark:bg-primary-900/30",
    textClass: "text-primary-600 dark:text-primary-400"
  },
  verified: {
    label: "Verified",
    bgClass: "bg-green-100 dark:bg-green-900/30",
    textClass: "text-green-600 dark:text-green-400"
  },
  flagged: {
    label: "Flagged",
    bgClass: "bg-red-100 dark:bg-red-900/30",
    textClass: "text-red-600 dark:text-red-400"
  }
};
function AvatarNameRenderer(props) {
  const { data, value } = props;
  if (!data && !value) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const displayName = typeof value === "string" && value ? value : "Unknown";
  const isSystemValue = ["Unknown", "Unassigned", "System"].includes(
    displayName
  );
  const avatarUrl = props.avatarField && data ? getNestedValue(data, props.avatarField) : data?.avatarUrl;
  const domain = props.domainField && data ? getNestedValue(data, props.domainField) : data?.company?.domain || data?.domain;
  const faviconUrl = getFaviconUrl(domain);
  const initials = getInitials2(displayName);
  const imageUrl = avatarUrl || faviconUrl;
  if (isSystemValue) {
    return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-2 py-1", children: [
      /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex h-7 w-7 items-center justify-center rounded-full bg-gray-200 text-xs font-semibold text-gray-400 dark:bg-gray-700 dark:text-gray-500", children: displayName === "Unassigned" ? "\u2014" : "??" }),
      /* @__PURE__ */ jsxRuntime.jsx("span", { className: "truncate text-gray-400 italic dark:text-gray-500", children: displayName })
    ] });
  }
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-2 py-1", children: [
    imageUrl ? /* @__PURE__ */ jsxRuntime.jsx(
      "img",
      {
        src: imageUrl,
        alt: displayName,
        className: "h-7 w-7 rounded-full bg-white object-cover ring-2 ring-white dark:ring-gray-700",
        onError: (e) => {
          const target = e.target;
          target.style.display = "none";
          const sibling = target.nextElementSibling;
          if (sibling) sibling.style.display = "flex";
        }
      }
    ) : null,
    /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        className: chunkOR5DRJCW_cjs.cn(
          "flex h-7 w-7 items-center justify-center rounded-full text-xs font-semibold text-white",
          getAvatarColor(displayName)
        ),
        style: { display: imageUrl ? "none" : "flex" },
        children: initials
      }
    ),
    /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-foreground truncate font-medium", children: displayName })
  ] });
}
function StatusBadgeRenderer(props) {
  const { value, statusConfig = statusColors } = props;
  if (!value) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const normalizedValue = String(value).toLowerCase().replace(/\s+/g, "_");
  const config = statusConfig[normalizedValue] || {
    label: value,
    bgClass: "bg-gray-200 dark:bg-gray-700",
    textClass: "text-gray-600 dark:text-gray-400"
  };
  return /* @__PURE__ */ jsxRuntime.jsx(
    "span",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "inline-flex items-center gap-1.5 rounded-full px-2.5 py-0.5 text-xs font-medium",
        config.bgClass,
        config.textClass
      ),
      children: config.label
    }
  );
}
function getEngagementScoreColors(score) {
  if (score >= 70)
    return {
      barColor: "bg-green-500",
      textColor: "text-green-600 dark:text-green-400"
    };
  if (score >= 40)
    return {
      barColor: "bg-amber-500",
      textColor: "text-amber-600 dark:text-amber-400"
    };
  if (score >= 20)
    return {
      barColor: "bg-orange-500",
      textColor: "text-orange-600 dark:text-orange-400"
    };
  return {
    barColor: "bg-gray-400",
    textColor: "text-gray-600 dark:text-gray-400"
  };
}
function EngagementScoreRenderer(props) {
  const { value } = props;
  if (value == null) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const score = Number(value);
  const percentage = Math.min(100, Math.max(0, score));
  const { barColor, textColor } = getEngagementScoreColors(score);
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-2 py-1", children: [
    /* @__PURE__ */ jsxRuntime.jsx("div", { className: "h-1.5 w-16 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700", children: /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        className: chunkOR5DRJCW_cjs.cn("h-full rounded-full transition-all", barColor),
        style: { width: `${percentage}%` }
      }
    ) }),
    /* @__PURE__ */ jsxRuntime.jsx("span", { className: chunkOR5DRJCW_cjs.cn("text-sm font-medium", textColor), children: score })
  ] });
}
function EmailRenderer(props) {
  const { value } = props;
  if (!value) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "a",
    {
      href: `mailto:${value}`,
      className: "text-primary-600 dark:text-primary-400 inline-flex items-center gap-1.5 hover:underline",
      onClick: (e) => e.stopPropagation(),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Mail, { className: "h-3 w-3 opacity-60" }),
        /* @__PURE__ */ jsxRuntime.jsx("span", { className: "truncate", children: value })
      ]
    }
  );
}
function PhoneRenderer(props) {
  const { value } = props;
  if (!value) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const displayValue = formatPhoneDisplay(value);
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "a",
    {
      href: `tel:${value}`,
      className: "text-foreground hover:text-primary-600 dark:hover:text-primary-400 inline-flex items-center gap-1.5",
      onClick: (e) => e.stopPropagation(),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Phone, { className: "h-3 w-3 text-green-500 opacity-70" }),
        /* @__PURE__ */ jsxRuntime.jsx("span", { children: displayValue })
      ]
    }
  );
}
function DomainRenderer(props) {
  const { value } = props;
  if (!value) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const url = value.startsWith("http") ? value : `https://${value}`;
  const displayDomain = value.replace(/^https?:\/\//, "").replace(/\/$/, "");
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "a",
    {
      href: url,
      target: "_blank",
      rel: "noopener noreferrer",
      className: "text-primary-600 dark:text-primary-400 inline-flex items-center gap-1.5 hover:underline",
      onClick: (e) => e.stopPropagation(),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Globe, { className: "h-3 w-3 opacity-60" }),
        /* @__PURE__ */ jsxRuntime.jsx("span", { className: "truncate", children: displayDomain })
      ]
    }
  );
}
function LinkedInRenderer(props) {
  const { value } = props;
  if (!value) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "a",
    {
      href: value,
      target: "_blank",
      rel: "noopener noreferrer",
      className: "inline-flex items-center gap-1.5 text-[#0A66C2] hover:underline",
      onClick: (e) => e.stopPropagation(),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Linkedin, { className: "h-4 w-4" }),
        /* @__PURE__ */ jsxRuntime.jsx("span", { className: "truncate text-sm", children: "LinkedIn" })
      ]
    }
  );
}
function CurrencyRenderer(props) {
  const { value } = props;
  if (value == null) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const formatted = new Intl.NumberFormat("en-US", {
    style: "currency",
    currency: "USD",
    minimumFractionDigits: 0,
    maximumFractionDigits: 0
  }).format(value);
  return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-foreground font-medium tabular-nums", children: formatted });
}
function NumberRenderer(props) {
  const { value } = props;
  if (value == null) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const formatted = Number(value).toLocaleString();
  return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-foreground tabular-nums", children: formatted });
}
function DateRenderer(props) {
  const { value, format = "medium" } = props;
  if (!value) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const date = value instanceof Date ? value : new Date(value);
  if (isNaN(date.getTime())) {
    return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  }
  if (format === "relative") {
    const now = /* @__PURE__ */ new Date();
    const diff = now.getTime() - date.getTime();
    const days = Math.floor(diff / (1e3 * 60 * 60 * 24));
    let relativeText;
    if (days === 0) {
      relativeText = "Today";
    } else if (days === 1) {
      relativeText = "Yesterday";
    } else if (days < 7) {
      relativeText = `${days} days ago`;
    } else if (days < 30) {
      const weeks = Math.floor(days / 7);
      relativeText = `${weeks} week${weeks > 1 ? "s" : ""} ago`;
    } else if (days < 365) {
      const months = Math.floor(days / 30);
      relativeText = `${months} month${months > 1 ? "s" : ""} ago`;
    } else {
      const years = Math.floor(days / 365);
      relativeText = `${years} year${years > 1 ? "s" : ""} ago`;
    }
    return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: relativeText });
  }
  const dateOptions = format === "short" ? { month: "numeric", day: "numeric" } : format === "long" ? { month: "long", day: "numeric", year: "numeric" } : { month: "short", day: "numeric", year: "numeric" };
  if (format === "datetime") {
    const formatted2 = date.toLocaleDateString("en-US", {
      month: "short",
      day: "numeric",
      year: "numeric",
      hour: "numeric",
      minute: "2-digit"
    });
    return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-foreground", children: formatted2 });
  }
  const formatted = date.toLocaleDateString("en-US", dateOptions);
  return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-foreground", children: formatted });
}
function BooleanRenderer(props) {
  const { value } = props;
  if (value == null) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const isTrue = Boolean(value);
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "span",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium",
        isTrue ? "bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400" : "bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400"
      ),
      children: [
        isTrue ? /* @__PURE__ */ jsxRuntime.jsx(lucideReact.CheckCircle, { className: "h-3 w-3" }) : /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Clock, { className: "h-3 w-3" }),
        isTrue ? "Yes" : "No"
      ]
    }
  );
}
function CompanyRenderer(props) {
  const { data, value } = props;
  if (!value) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const domain = props.domainField && data ? getNestedValue(data, props.domainField) : data?.company?.domain || data?.domain;
  const faviconUrl = getFaviconUrl(domain);
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-2 py-0.5", children: [
    faviconUrl ? /* @__PURE__ */ jsxRuntime.jsx(
      "img",
      {
        src: faviconUrl,
        alt: value,
        className: "h-5 w-5 rounded bg-white object-contain",
        onError: (e) => {
          const target = e.target;
          target.style.display = "none";
          const sibling = target.nextElementSibling;
          if (sibling) sibling.style.display = "flex";
        }
      }
    ) : null,
    /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        className: "bg-primary-100 text-primary-600 dark:bg-primary-900/30 dark:text-primary-400 flex h-5 w-5 items-center justify-center rounded text-[9px] font-semibold",
        style: { display: faviconUrl ? "none" : "flex" },
        children: getInitials2(value)
      }
    ),
    /* @__PURE__ */ jsxRuntime.jsx("span", { className: "truncate font-medium", children: value })
  ] });
}
function ProgressRenderer(props) {
  const { value, barColor = "bg-primary-500", max = 100 } = props;
  if (value == null) return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  const percentage = Math.min(100, Math.max(0, Number(value) / max * 100));
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-2 py-1", children: [
    /* @__PURE__ */ jsxRuntime.jsx("div", { className: "h-2 w-20 overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700", children: /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        className: chunkOR5DRJCW_cjs.cn("h-full rounded-full transition-all", barColor),
        style: { width: `${percentage}%` }
      }
    ) }),
    /* @__PURE__ */ jsxRuntime.jsxs("span", { className: "text-muted-foreground text-xs font-medium", children: [
      Math.round(percentage),
      "%"
    ] })
  ] });
}
function TagsRenderer(props) {
  const { value } = props;
  if (!value || !Array.isArray(value) || value.length === 0) {
    return /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground", children: "--" });
  }
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-wrap gap-1", children: [
    value.slice(0, 3).map((tag, index) => /* @__PURE__ */ jsxRuntime.jsx(
      "span",
      {
        className: "inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-600 dark:bg-gray-800 dark:text-gray-400",
        children: tag
      },
      index
    )),
    value.length > 3 && /* @__PURE__ */ jsxRuntime.jsxs("span", { className: "text-muted-foreground text-xs", children: [
      "+",
      value.length - 3
    ] })
  ] });
}
var MemoizedAvatarNameRenderer = React20.memo(
  AvatarNameRenderer,
  cellRendererPropsAreEqual
);
var MemoizedStatusBadgeRenderer = React20.memo(
  StatusBadgeRenderer,
  cellRendererPropsAreEqual
);
var MemoizedEngagementScoreRenderer = React20.memo(
  EngagementScoreRenderer,
  cellRendererPropsAreEqual
);
var MemoizedEmailRenderer = React20.memo(
  EmailRenderer,
  cellRendererPropsAreEqual
);
var MemoizedPhoneRenderer = React20.memo(
  PhoneRenderer,
  cellRendererPropsAreEqual
);
var MemoizedLinkedInRenderer = React20.memo(
  LinkedInRenderer,
  cellRendererPropsAreEqual
);
var MemoizedDomainRenderer = React20.memo(
  DomainRenderer,
  cellRendererPropsAreEqual
);
var MemoizedCurrencyRenderer = React20.memo(
  CurrencyRenderer,
  cellRendererPropsAreEqual
);
var MemoizedNumberRenderer = React20.memo(
  NumberRenderer,
  cellRendererPropsAreEqual
);
var MemoizedDateRenderer = React20.memo(
  DateRenderer,
  cellRendererPropsAreEqual
);
var MemoizedBooleanRenderer = React20.memo(
  BooleanRenderer,
  cellRendererPropsAreEqual
);
var MemoizedCompanyRenderer = React20.memo(
  CompanyRenderer,
  cellRendererPropsAreEqual
);
var MemoizedProgressRenderer = React20.memo(
  ProgressRenderer,
  cellRendererPropsAreEqual
);
var MemoizedTagsRenderer = React20.memo(
  TagsRenderer,
  cellRendererPropsAreEqual
);
var CellRenderers = {
  // Original renderers
  AvatarNameRenderer,
  StatusBadgeRenderer,
  EngagementScoreRenderer,
  EmailRenderer,
  PhoneRenderer,
  LinkedInRenderer,
  DomainRenderer,
  CurrencyRenderer,
  NumberRenderer,
  DateRenderer,
  BooleanRenderer,
  CompanyRenderer,
  ProgressRenderer,
  TagsRenderer,
  // Memoized renderers (recommended for performance)
  MemoizedAvatarNameRenderer,
  MemoizedStatusBadgeRenderer,
  MemoizedEngagementScoreRenderer,
  MemoizedEmailRenderer,
  MemoizedPhoneRenderer,
  MemoizedLinkedInRenderer,
  MemoizedDomainRenderer,
  MemoizedCurrencyRenderer,
  MemoizedNumberRenderer,
  MemoizedDateRenderer,
  MemoizedBooleanRenderer,
  MemoizedCompanyRenderer,
  MemoizedProgressRenderer,
  MemoizedTagsRenderer,
  // Utility functions
  formatPhoneDisplay
};
var sizeClasses = {
  sm: "h-4 w-4",
  md: "h-5 w-5",
  lg: "h-7 w-7"
};
function SparklesIcon({ className, size = "md" }) {
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "svg",
    {
      className: chunkOR5DRJCW_cjs.cn(sizeClasses[size], className),
      viewBox: "0 0 24 24",
      fill: "currentColor",
      children: [
        /* @__PURE__ */ jsxRuntime.jsx("path", { d: "M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z" }),
        /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            d: "M20 3v4",
            stroke: "currentColor",
            strokeWidth: "2",
            strokeLinecap: "round"
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            d: "M22 5h-4",
            stroke: "currentColor",
            strokeWidth: "2",
            strokeLinecap: "round"
          }
        )
      ]
    }
  );
}
function AILogoIcon({ className, size = "md" }) {
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "svg",
    {
      className: chunkOR5DRJCW_cjs.cn(sizeClasses[size], className),
      viewBox: "0 0 24 24",
      fill: "none",
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            d: "M12 2L2 7L12 12L22 7L12 2Z",
            stroke: "currentColor",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            fill: "currentColor",
            fillOpacity: "0.2"
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            d: "M2 17L12 22L22 17",
            stroke: "currentColor",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round"
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            d: "M2 12L12 17L22 12",
            stroke: "currentColor",
            strokeWidth: "1.5",
            strokeLinecap: "round",
            strokeLinejoin: "round"
          }
        )
      ]
    }
  );
}
function CloseIcon({ className }) {
  return /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: chunkOR5DRJCW_cjs.cn("h-5 w-5", className),
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "2",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M6 18L18 6M6 6l12 12"
        }
      )
    }
  );
}
function RefreshIcon({ className }) {
  return /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: chunkOR5DRJCW_cjs.cn("h-5 w-5", className),
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"
        }
      )
    }
  );
}
var chevronRotation = {
  up: "-rotate-180",
  down: "",
  left: "rotate-90",
  right: "-rotate-90"
};
function ChevronIcon({
  className,
  direction = "down"
}) {
  return /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: chunkOR5DRJCW_cjs.cn("h-4 w-4", chevronRotation[direction], className),
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "2",
      children: /* @__PURE__ */ jsxRuntime.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M19 9l-7 7-7-7" })
    }
  );
}
function SendIcon({ className }) {
  return /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: chunkOR5DRJCW_cjs.cn("h-5 w-5", className),
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeWidth: 2,
          d: "M12 19l9 2-9-18-9 18 9-2zm0 0v-8"
        }
      )
    }
  );
}
function SpinnerIcon({ className }) {
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "svg",
    {
      className: chunkOR5DRJCW_cjs.cn("h-5 w-5 animate-spin", className),
      fill: "none",
      viewBox: "0 0 24 24",
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          "circle",
          {
            className: "opacity-25",
            cx: "12",
            cy: "12",
            r: "10",
            stroke: "currentColor",
            strokeWidth: "4"
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            className: "opacity-75",
            fill: "currentColor",
            d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
          }
        )
      ]
    }
  );
}
var statusIconVariants = classVarianceAuthority.cva(
  "flex h-5 w-5 items-center justify-center rounded-full",
  {
    variants: {
      status: {
        pending: "bg-neutral-200 dark:bg-neutral-700",
        running: "bg-primary-100 dark:bg-primary-900/50",
        success: "bg-green-100 dark:bg-green-900/50",
        error: "bg-red-100 dark:bg-red-900/50",
        cancelled: "bg-neutral-200 dark:bg-neutral-700"
      }
    },
    defaultVariants: {
      status: "pending"
    }
  }
);
function ToolStatusIcon({ status, className }) {
  return /* @__PURE__ */ jsxRuntime.jsxs("span", { className: chunkOR5DRJCW_cjs.cn(statusIconVariants({ status }), className), children: [
    status === "pending" && /* @__PURE__ */ jsxRuntime.jsx(
      "svg",
      {
        className: "h-3 w-3 text-neutral-500",
        fill: "currentColor",
        viewBox: "0 0 20 20",
        children: /* @__PURE__ */ jsxRuntime.jsx("circle", { cx: "10", cy: "10", r: "3" })
      }
    ),
    status === "running" && /* @__PURE__ */ jsxRuntime.jsxs(
      "svg",
      {
        className: "text-primary-600 dark:text-primary-400 h-3 w-3 animate-spin",
        fill: "none",
        viewBox: "0 0 24 24",
        children: [
          /* @__PURE__ */ jsxRuntime.jsx(
            "circle",
            {
              className: "opacity-25",
              cx: "12",
              cy: "12",
              r: "10",
              stroke: "currentColor",
              strokeWidth: "4"
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsx(
            "path",
            {
              className: "opacity-75",
              fill: "currentColor",
              d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
            }
          )
        ]
      }
    ),
    status === "success" && /* @__PURE__ */ jsxRuntime.jsx(
      "svg",
      {
        className: "h-3 w-3 text-green-600 dark:text-green-400",
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        strokeWidth: "3",
        children: /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M5 13l4 4L19 7"
          }
        )
      }
    ),
    status === "error" && /* @__PURE__ */ jsxRuntime.jsx(
      "svg",
      {
        className: "h-3 w-3 text-red-600 dark:text-red-400",
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        strokeWidth: "3",
        children: /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M6 18L18 6M6 6l12 12"
          }
        )
      }
    ),
    status === "cancelled" && /* @__PURE__ */ jsxRuntime.jsx(
      "svg",
      {
        className: "h-3 w-3 text-neutral-500",
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        strokeWidth: "3",
        children: /* @__PURE__ */ jsxRuntime.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M18 12H6" })
      }
    )
  ] });
}
var TOOL_ICONS = {
  // Patient tools
  create_patient: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM3 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 019.374 21c-2.331 0-4.512-.645-6.374-1.766z"
        }
      )
    }
  ),
  get_patient: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"
        }
      )
    }
  ),
  search_patients: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
        }
      )
    }
  ),
  // Appointment tools
  schedule_appointment: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"
        }
      )
    }
  ),
  // Document tools
  create_document: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"
        }
      )
    }
  ),
  // Default tool icon
  default: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z"
        }
      )
    }
  )
};
function getToolIcon(toolName) {
  return TOOL_ICONS[toolName] || TOOL_ICONS.default;
}
function ResourceLink({ link, onClick, className }) {
  const handleClick = (e) => {
    if (onClick) {
      e.preventDefault();
      onClick(link);
    }
  };
  const linkTypeIcons = {
    patient: /* @__PURE__ */ jsxRuntime.jsx(
      "svg",
      {
        className: "h-4 w-4",
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        strokeWidth: "1.5",
        children: /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"
          }
        )
      }
    ),
    document: /* @__PURE__ */ jsxRuntime.jsx(
      "svg",
      {
        className: "h-4 w-4",
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        strokeWidth: "1.5",
        children: /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"
          }
        )
      }
    ),
    appointment: /* @__PURE__ */ jsxRuntime.jsx(
      "svg",
      {
        className: "h-4 w-4",
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        strokeWidth: "1.5",
        children: /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"
          }
        )
      }
    ),
    order: /* @__PURE__ */ jsxRuntime.jsx(
      "svg",
      {
        className: "h-4 w-4",
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        strokeWidth: "1.5",
        children: /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25z"
          }
        )
      }
    ),
    external: /* @__PURE__ */ jsxRuntime.jsx(
      "svg",
      {
        className: "h-4 w-4",
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        strokeWidth: "1.5",
        children: /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"
          }
        )
      }
    ),
    internal: /* @__PURE__ */ jsxRuntime.jsx(
      "svg",
      {
        className: "h-4 w-4",
        fill: "none",
        viewBox: "0 0 24 24",
        stroke: "currentColor",
        strokeWidth: "1.5",
        children: /* @__PURE__ */ jsxRuntime.jsx(
          "path",
          {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"
          }
        )
      }
    )
  };
  const icon = link.type ? linkTypeIcons[link.type] : linkTypeIcons.internal;
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "a",
    {
      href: link.href,
      onClick: handleClick,
      className: chunkOR5DRJCW_cjs.cn(
        "inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5",
        "bg-primary-50 text-primary-700 hover:bg-primary-100",
        "dark:bg-primary-900/30 dark:text-primary-300 dark:hover:bg-primary-900/50",
        "text-sm font-medium transition-colors",
        "focus:ring-primary-500 focus:ring-2 focus:ring-offset-2 focus:outline-none",
        "dark:focus:ring-offset-neutral-900",
        className
      ),
      children: [
        icon,
        /* @__PURE__ */ jsxRuntime.jsx("span", { children: link.label }),
        link.type === "external" && /* @__PURE__ */ jsxRuntime.jsx(
          "svg",
          {
            className: "h-3 w-3 opacity-60",
            fill: "none",
            viewBox: "0 0 24 24",
            stroke: "currentColor",
            strokeWidth: "2",
            children: /* @__PURE__ */ jsxRuntime.jsx(
              "path",
              {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                d: "M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"
              }
            )
          }
        )
      ]
    }
  );
}
function ToolResultDisplay({
  result,
  onLinkClick,
  showRawData = false,
  className
}) {
  const [showJson, setShowJson] = React20__namespace.useState(false);
  if (result.type === "error") {
    return /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        className: chunkOR5DRJCW_cjs.cn(
          "mt-2 rounded-md bg-red-50 p-3 dark:bg-red-900/20",
          className
        ),
        children: /* @__PURE__ */ jsxRuntime.jsx("p", { className: "text-sm text-red-700 dark:text-red-300", children: typeof result.data === "string" ? String(result.data) : "An error occurred" })
      }
    );
  }
  const hasRawData = result.type === "json" && result.data !== void 0 && result.data !== null;
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: chunkOR5DRJCW_cjs.cn("space-y-2", className), children: [
    result.summary && /* @__PURE__ */ jsxRuntime.jsx("p", { className: "text-sm text-neutral-700 dark:text-neutral-300", children: result.summary }),
    result.link && /* @__PURE__ */ jsxRuntime.jsx(ResourceLink, { link: result.link, onClick: onLinkClick }),
    result.resources && result.resources.length > 0 && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex flex-wrap gap-2", children: result.resources.map((resource) => /* @__PURE__ */ jsxRuntime.jsx(
      ResourceLink,
      {
        link: {
          href: resource.uri || "#",
          label: resource.name,
          type: resource.type
        },
        onClick: onLinkClick
      },
      resource.id
    )) }),
    hasRawData && showRawData && /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "mt-2", children: [
      /* @__PURE__ */ jsxRuntime.jsxs(
        "button",
        {
          onClick: () => setShowJson(!showJson),
          className: "flex items-center gap-1 text-xs text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",
          children: [
            /* @__PURE__ */ jsxRuntime.jsx(
              "svg",
              {
                className: chunkOR5DRJCW_cjs.cn(
                  "h-3 w-3 transition-transform",
                  showJson && "rotate-90"
                ),
                fill: "none",
                viewBox: "0 0 24 24",
                stroke: "currentColor",
                strokeWidth: "2",
                children: /* @__PURE__ */ jsxRuntime.jsx(
                  "path",
                  {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    d: "M9 5l7 7-7 7"
                  }
                )
              }
            ),
            showJson ? "Hide" : "Show",
            " raw data"
          ]
        }
      ),
      showJson && /* @__PURE__ */ jsxRuntime.jsx("pre", { className: "mt-2 max-h-40 overflow-auto rounded-md bg-neutral-100 p-2 text-xs dark:bg-neutral-800", children: JSON.stringify(result.data, null, 2) })
    ] })
  ] });
}
var toolCallVariants = classVarianceAuthority.cva(
  ["rounded-lg border", "overflow-hidden", "transition-all duration-200"],
  {
    variants: {
      status: {
        pending: "border-neutral-200 bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-800/50",
        running: "border-primary-200 bg-primary-50/50 dark:border-primary-800 dark:bg-primary-900/20",
        success: "border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/20",
        error: "border-red-200 bg-red-50/50 dark:border-red-800 dark:bg-red-900/20",
        cancelled: "border-neutral-200 bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-800/50 opacity-60"
      },
      compact: {
        true: "p-2",
        false: "p-3"
      }
    },
    defaultVariants: {
      status: "pending",
      compact: false
    }
  }
);
var TOOL_FRIENDLY_NAMES = {
  create_patient: "Creating patient",
  get_patient: "Looking up patient",
  search_patients: "Searching patients",
  update_patient: "Updating patient",
  delete_patient: "Removing patient",
  schedule_appointment: "Scheduling appointment",
  cancel_appointment: "Canceling appointment",
  update_appointment: "Updating appointment",
  create_document: "Creating document",
  upload_document: "Uploading document",
  get_document: "Retrieving document",
  search_documents: "Searching documents",
  create_order: "Creating order",
  send_message: "Sending message",
  search: "Searching"
};
function getToolFriendlyName(toolName, status) {
  const baseName = TOOL_FRIENDLY_NAMES[toolName] || toolName.replace(/_/g, " ");
  if (status === "success") {
    if (baseName.startsWith("Creating"))
      return baseName.replace("Creating", "Created");
    if (baseName.startsWith("Scheduling"))
      return baseName.replace("Scheduling", "Scheduled");
    if (baseName.startsWith("Searching"))
      return baseName.replace("Searching", "Searched");
    if (baseName.startsWith("Looking"))
      return baseName.replace("Looking", "Found");
    if (baseName.startsWith("Updating"))
      return baseName.replace("Updating", "Updated");
    if (baseName.startsWith("Removing"))
      return baseName.replace("Removing", "Removed");
    if (baseName.startsWith("Canceling"))
      return baseName.replace("Canceling", "Canceled");
    if (baseName.startsWith("Retrieving"))
      return baseName.replace("Retrieving", "Retrieved");
    if (baseName.startsWith("Uploading"))
      return baseName.replace("Uploading", "Uploaded");
    if (baseName.startsWith("Sending"))
      return baseName.replace("Sending", "Sent");
  }
  return baseName;
}
function getParameterSummary(toolName, params) {
  const paramMap = Object.fromEntries(params.map((p) => [p.name, p.value]));
  if (toolName === "create_patient" && paramMap.firstName && paramMap.lastName) {
    return `${paramMap.firstName} ${paramMap.lastName}`;
  }
  if (toolName.includes("search") && paramMap.query) {
    return `"${paramMap.query}"`;
  }
  if (toolName.includes("appointment") && paramMap.patientName) {
    const date = paramMap.preferredDate || paramMap.date;
    return date ? `${paramMap.patientName} on ${date}` : String(paramMap.patientName);
  }
  return null;
}
function MCPToolCallDisplay({
  toolCall,
  showParameters = true,
  collapsible = true,
  defaultCollapsed = true,
  compact,
  onLinkClick,
  className
}) {
  const [showDetails, setShowDetails] = React20__namespace.useState(!defaultCollapsed);
  const formatDuration2 = (ms) => {
    if (!ms) return null;
    if (ms < 1e3) return `${ms}ms`;
    return `${(ms / 1e3).toFixed(1)}s`;
  };
  const friendlyName = getToolFriendlyName(toolCall.toolName, toolCall.status);
  const paramSummary = getParameterSummary(
    toolCall.toolName,
    toolCall.parameters
  );
  return /* @__PURE__ */ jsxRuntime.jsx(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        toolCallVariants({ status: toolCall.status, compact }),
        className
      ),
      children: /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-start gap-3", children: [
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex h-8 w-8 shrink-0 items-center justify-center rounded-md bg-white/50 text-neutral-600 dark:bg-neutral-700/50 dark:text-neutral-400", children: getToolIcon(toolCall.toolName) }),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "min-w-0 flex-1", children: [
          /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-sm font-medium text-neutral-900 dark:text-white", children: friendlyName }),
            /* @__PURE__ */ jsxRuntime.jsx(ToolStatusIcon, { status: toolCall.status }),
            toolCall.duration && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-xs text-neutral-400", children: formatDuration2(toolCall.duration) })
          ] }),
          paramSummary && toolCall.status !== "success" && /* @__PURE__ */ jsxRuntime.jsx("p", { className: "mt-0.5 text-sm text-neutral-600 dark:text-neutral-400", children: paramSummary }),
          toolCall.result && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "mt-2", children: /* @__PURE__ */ jsxRuntime.jsx(
            ToolResultDisplay,
            {
              result: toolCall.result,
              onLinkClick,
              showRawData: showDetails
            }
          ) }),
          toolCall.error && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "mt-2 rounded-md bg-red-100 p-2 dark:bg-red-900/30", children: /* @__PURE__ */ jsxRuntime.jsx("p", { className: "text-sm text-red-700 dark:text-red-300", children: toolCall.error }) }),
          collapsible && showParameters && toolCall.parameters.length > 0 && /* @__PURE__ */ jsxRuntime.jsxs(
            "button",
            {
              onClick: () => setShowDetails(!showDetails),
              className: "mt-2 flex items-center gap-1 text-xs text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-300",
              children: [
                /* @__PURE__ */ jsxRuntime.jsx(
                  "svg",
                  {
                    className: chunkOR5DRJCW_cjs.cn(
                      "h-3 w-3 transition-transform",
                      showDetails && "rotate-90"
                    ),
                    fill: "none",
                    viewBox: "0 0 24 24",
                    stroke: "currentColor",
                    strokeWidth: "2",
                    children: /* @__PURE__ */ jsxRuntime.jsx(
                      "path",
                      {
                        strokeLinecap: "round",
                        strokeLinejoin: "round",
                        d: "M9 5l7 7-7 7"
                      }
                    )
                  }
                ),
                showDetails ? "Hide" : "Show",
                " details"
              ]
            }
          ),
          showDetails && showParameters && toolCall.parameters.length > 0 && /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "mt-3 rounded-md bg-neutral-100 p-2 dark:bg-neutral-800", children: [
            /* @__PURE__ */ jsxRuntime.jsx("h4", { className: "mb-1.5 text-xs font-medium tracking-wide text-neutral-500 uppercase dark:text-neutral-400", children: "Parameters" }),
            /* @__PURE__ */ jsxRuntime.jsx("div", { className: "space-y-0.5", children: toolCall.parameters.map((param) => /* @__PURE__ */ jsxRuntime.jsxs(
              "div",
              {
                className: "flex items-start gap-2 text-xs",
                children: [
                  /* @__PURE__ */ jsxRuntime.jsxs("span", { className: "font-mono text-neutral-500 dark:text-neutral-500", children: [
                    param.name,
                    ":"
                  ] }),
                  /* @__PURE__ */ jsxRuntime.jsx("span", { className: "font-mono text-neutral-700 dark:text-neutral-300", children: typeof param.value === "string" ? param.value : JSON.stringify(param.value) })
                ]
              },
              param.name
            )) })
          ] })
        ] })
      ] })
    }
  );
}
var avatarVariants2 = classVarianceAuthority.cva(
  "flex shrink-0 items-center justify-center rounded-full",
  {
    variants: {
      role: {
        user: "bg-primary-100 text-primary-700 dark:bg-primary-900/50 dark:text-primary-300",
        assistant: "bg-primary-500 text-white dark:bg-primary-600",
        system: "bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400",
        tool: "bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300"
      },
      size: {
        sm: "h-6 w-6 text-xs",
        md: "h-8 w-8 text-sm",
        lg: "h-10 w-10 text-base"
      }
    },
    defaultVariants: {
      role: "user",
      size: "md"
    }
  }
);
function MessageAvatar({
  role,
  size,
  userName,
  className
}) {
  const getInitials3 = (name) => {
    if (!name) return "?";
    return name.split(" ").map((n) => n[0]).join("").substring(0, 2).toUpperCase();
  };
  return /* @__PURE__ */ jsxRuntime.jsx("div", { className: chunkOR5DRJCW_cjs.cn(avatarVariants2({ role, size }), className), children: role === "assistant" ? /* @__PURE__ */ jsxRuntime.jsx(SparklesIcon, { size: "md" }) : role === "user" ? /* @__PURE__ */ jsxRuntime.jsx("span", { className: "font-medium", children: getInitials3(userName) }) : role === "system" ? /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"
        }
      )
    }
  ) : /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z"
        }
      )
    }
  ) });
}
function AITypingIndicator({ className }) {
  const dotStyle = {
    width: "6px",
    height: "6px",
    minWidth: "6px",
    minHeight: "6px",
    flexShrink: 0
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn("inline-flex items-center justify-center gap-2", className),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          "span",
          {
            className: "rounded-full bg-neutral-500 dark:bg-neutral-400",
            style: {
              ...dotStyle,
              animation: "typing-dot 1.4s infinite ease-in-out both",
              animationDelay: "-0.32s"
            }
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(
          "span",
          {
            className: "rounded-full bg-neutral-500 dark:bg-neutral-400",
            style: {
              ...dotStyle,
              animation: "typing-dot 1.4s infinite ease-in-out both",
              animationDelay: "-0.16s"
            }
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(
          "span",
          {
            className: "rounded-full bg-neutral-500 dark:bg-neutral-400",
            style: {
              ...dotStyle,
              animation: "typing-dot 1.4s infinite ease-in-out both"
            }
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx("style", { children: `
        @keyframes typing-dot {
          0%, 80%, 100% { opacity: 0.4; }
          40% { opacity: 1; }
        }
      ` })
      ]
    }
  );
}
function ContentBlock({ content, onLinkClick }) {
  const [isCollapsed, setIsCollapsed] = React20__namespace.useState(
    content.collapsed ?? false
  );
  if (content.type === "text" && content.text) {
    return /* @__PURE__ */ jsxRuntime.jsx("div", { className: "prose prose-sm dark:prose-invert max-w-none", children: /* @__PURE__ */ jsxRuntime.jsx("p", { className: "whitespace-pre-wrap", children: content.text }) });
  }
  if (content.type === "tool_use" && content.toolCall) {
    return /* @__PURE__ */ jsxRuntime.jsx(
      MCPToolCallDisplay,
      {
        toolCall: content.toolCall,
        onLinkClick,
        defaultCollapsed: content.collapsed
      }
    );
  }
  if (content.type === "thinking" && content.text) {
    return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "rounded-lg border border-neutral-200 bg-neutral-50 dark:border-neutral-700 dark:bg-neutral-800/50", children: [
      /* @__PURE__ */ jsxRuntime.jsxs(
        "button",
        {
          onClick: () => setIsCollapsed(!isCollapsed),
          className: "flex w-full items-center justify-between px-3 py-2 text-left",
          children: [
            /* @__PURE__ */ jsxRuntime.jsxs("span", { className: "flex items-center gap-2 text-sm text-neutral-500 dark:text-neutral-400", children: [
              /* @__PURE__ */ jsxRuntime.jsx(
                "svg",
                {
                  className: "h-4 w-4",
                  fill: "none",
                  viewBox: "0 0 24 24",
                  stroke: "currentColor",
                  strokeWidth: "1.5",
                  children: /* @__PURE__ */ jsxRuntime.jsx(
                    "path",
                    {
                      strokeLinecap: "round",
                      strokeLinejoin: "round",
                      d: "M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"
                    }
                  )
                }
              ),
              "Thinking..."
            ] }),
            /* @__PURE__ */ jsxRuntime.jsx(
              ChevronIcon,
              {
                direction: isCollapsed ? "right" : "down",
                className: "text-neutral-400"
              }
            )
          ]
        }
      ),
      !isCollapsed && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "border-t border-neutral-200 px-3 py-2 dark:border-neutral-700", children: /* @__PURE__ */ jsxRuntime.jsx("p", { className: "text-sm text-neutral-600 italic dark:text-neutral-400", children: content.text }) })
    ] });
  }
  if (content.type === "code" && content.text) {
    return /* @__PURE__ */ jsxRuntime.jsx("pre", { className: "rounded-lg bg-neutral-900 p-3 text-sm dark:bg-neutral-950", children: /* @__PURE__ */ jsxRuntime.jsx(
      "code",
      {
        className: content.language ? `language-${content.language}` : "",
        children: content.text
      }
    ) });
  }
  return null;
}
var messageVariants = classVarianceAuthority.cva("flex gap-3", {
  variants: {
    role: {
      user: "flex-row-reverse",
      assistant: "flex-row",
      system: "flex-row justify-center",
      tool: "flex-row"
    }
  },
  defaultVariants: {
    role: "assistant"
  }
});
var bubbleVariants = classVarianceAuthority.cva("rounded-2xl px-4 py-2.5 w-fit max-w-[85%]", {
  variants: {
    role: {
      user: "bg-primary-600 text-white dark:bg-primary-500",
      assistant: "bg-neutral-100 text-neutral-900 dark:bg-neutral-800 dark:text-white",
      system: "bg-neutral-100 text-neutral-600 dark:bg-neutral-800 dark:text-neutral-400 text-center text-sm max-w-[95%]",
      tool: "bg-transparent p-0 max-w-full w-full"
    }
  },
  defaultVariants: {
    role: "assistant"
  }
});
function AIMessageDisplay({
  message,
  userName,
  showAvatar = true,
  showTimestamp = false,
  onLinkClick,
  className
}) {
  const isStreaming = message.status === "streaming";
  const hasContent = message.content.length > 0;
  const formatTime3 = (timestamp) => {
    const date = new Date(timestamp);
    return date.toLocaleTimeString(void 0, {
      hour: "numeric",
      minute: "2-digit"
    });
  };
  if (message.role === "tool") {
    return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: chunkOR5DRJCW_cjs.cn(messageVariants({ role: message.role }), className), children: [
      showAvatar && /* @__PURE__ */ jsxRuntime.jsx(MessageAvatar, { role: message.role }),
      /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex-1 space-y-2", children: message.content.map((content, index) => /* @__PURE__ */ jsxRuntime.jsx(
        ContentBlock,
        {
          content,
          onLinkClick
        },
        index
      )) })
    ] });
  }
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: chunkOR5DRJCW_cjs.cn(messageVariants({ role: message.role }), className), children: [
    showAvatar && message.role !== "system" && /* @__PURE__ */ jsxRuntime.jsx(MessageAvatar, { role: message.role, userName }),
    /* @__PURE__ */ jsxRuntime.jsxs(
      "div",
      {
        className: chunkOR5DRJCW_cjs.cn(
          "flex flex-col gap-1",
          message.role === "user" && "items-end"
        ),
        children: [
          /* @__PURE__ */ jsxRuntime.jsx("div", { className: bubbleVariants({ role: message.role }), children: hasContent ? /* @__PURE__ */ jsxRuntime.jsx("div", { className: "space-y-3", children: message.content.map((content, index) => /* @__PURE__ */ jsxRuntime.jsx(
            ContentBlock,
            {
              content,
              onLinkClick
            },
            index
          )) }) : isStreaming ? /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex items-center justify-center", children: /* @__PURE__ */ jsxRuntime.jsx(AITypingIndicator, {}) }) : null }),
          showTimestamp && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "px-2 text-xs text-neutral-500", children: formatTime3(message.timestamp) }),
          message.status === "error" && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "px-2 text-xs text-red-500", children: "Failed to send" })
        ]
      }
    )
  ] });
}
function getFileType(mimeType) {
  if (mimeType.startsWith("image/")) return "image";
  if (mimeType.startsWith("video/")) return "video";
  if (mimeType.startsWith("audio/")) return "audio";
  if (mimeType.includes("pdf") || mimeType.includes("document") || mimeType.includes("text")) {
    return "document";
  }
  return "file";
}
function formatFileSize(bytes) {
  if (bytes < 1024) return `${bytes} B`;
  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
}
function validateFile(file, acceptedTypes, maxSize) {
  if (acceptedTypes && acceptedTypes.length > 0) {
    const isAccepted = acceptedTypes.some((type) => {
      if (type.startsWith(".")) {
        return file.name.toLowerCase().endsWith(type.toLowerCase());
      }
      if (type.endsWith("/*")) {
        return file.type.startsWith(type.replace("/*", "/"));
      }
      return file.type === type;
    });
    if (!isAccepted) {
      return { valid: false, error: "File type not supported" };
    }
  }
  if (maxSize && file.size > maxSize) {
    return {
      valid: false,
      error: `File too large (max ${formatFileSize(maxSize)})`
    };
  }
  return { valid: true };
}
function generateAttachmentId() {
  return `attachment-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
}
function AttachmentPreviewItem({
  attachment,
  onRemove,
  onRetry,
  className
}) {
  const { file, previewUrl, type, state, progress } = attachment;
  const isImage = type === "image";
  const isVideo = type === "video";
  const isUploading = state === "uploading";
  const isFailed = state === "failed";
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "group relative overflow-hidden rounded-lg",
        "bg-neutral-100 dark:bg-neutral-800",
        "border border-neutral-200 dark:border-neutral-700",
        isFailed && "border-red-500",
        className
      ),
      children: [
        (isImage || isVideo) && previewUrl ? /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "relative h-20 w-20", children: [
          /* @__PURE__ */ jsxRuntime.jsx(
            "img",
            {
              src: previewUrl,
              alt: file.name,
              className: chunkOR5DRJCW_cjs.cn(
                "h-full w-full object-cover",
                (isUploading || isFailed) && "opacity-50"
              )
            }
          ),
          isVideo && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute inset-0 flex items-center justify-center", children: /* @__PURE__ */ jsxRuntime.jsx(
            "svg",
            {
              className: "h-6 w-6 text-white drop-shadow",
              fill: "currentColor",
              viewBox: "0 0 24 24",
              children: /* @__PURE__ */ jsxRuntime.jsx("path", { d: "M8 5v14l11-7z" })
            }
          ) })
        ] }) : (
          /* File preview */
          /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex h-20 w-20 flex-col items-center justify-center p-2", children: [
            /* @__PURE__ */ jsxRuntime.jsx(
              "svg",
              {
                className: "h-8 w-8 text-neutral-400",
                fill: "none",
                viewBox: "0 0 24 24",
                stroke: "currentColor",
                children: /* @__PURE__ */ jsxRuntime.jsx(
                  "path",
                  {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                  }
                )
              }
            ),
            /* @__PURE__ */ jsxRuntime.jsx("span", { className: "mt-1 max-w-full truncate px-1 text-xs text-neutral-500", children: file.name.split(".").pop()?.toUpperCase() })
          ] })
        ),
        isUploading && progress !== void 0 && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute inset-0 flex items-center justify-center bg-black/50", children: /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "text-center text-white", children: [
          /* @__PURE__ */ jsxRuntime.jsxs(
            "svg",
            {
              className: "mx-auto h-6 w-6 animate-spin",
              fill: "none",
              viewBox: "0 0 24 24",
              children: [
                /* @__PURE__ */ jsxRuntime.jsx(
                  "circle",
                  {
                    className: "opacity-25",
                    cx: "12",
                    cy: "12",
                    r: "10",
                    stroke: "currentColor",
                    strokeWidth: "4"
                  }
                ),
                /* @__PURE__ */ jsxRuntime.jsx(
                  "path",
                  {
                    className: "opacity-75",
                    fill: "currentColor",
                    d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
                  }
                )
              ]
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsxs("span", { className: "mt-1 text-xs", children: [
            progress,
            "%"
          ] })
        ] }) }),
        isFailed && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute inset-0 flex items-center justify-center bg-black/50", children: /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "text-center", children: [
          /* @__PURE__ */ jsxRuntime.jsx(
            "svg",
            {
              className: "mx-auto h-6 w-6 text-red-400",
              fill: "none",
              viewBox: "0 0 24 24",
              stroke: "currentColor",
              children: /* @__PURE__ */ jsxRuntime.jsx(
                "path",
                {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  strokeWidth: 2,
                  d: "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                }
              )
            }
          ),
          onRetry && /* @__PURE__ */ jsxRuntime.jsx(
            "button",
            {
              type: "button",
              onClick: onRetry,
              className: "mt-1 text-xs text-white underline hover:no-underline",
              children: "Retry"
            }
          )
        ] }) }),
        /* @__PURE__ */ jsxRuntime.jsx(
          "button",
          {
            type: "button",
            onClick: onRemove,
            className: chunkOR5DRJCW_cjs.cn(
              "absolute -top-1 -right-1 z-10",
              "rounded-full p-1",
              "bg-neutral-900 text-white",
              "opacity-0 group-hover:opacity-100",
              "focus:ring-primary-500 focus:opacity-100 focus:ring-2 focus:outline-none",
              "transition-opacity"
            ),
            "aria-label": `Remove ${file.name}`,
            children: /* @__PURE__ */ jsxRuntime.jsx(
              "svg",
              {
                className: "h-3 w-3",
                fill: "none",
                viewBox: "0 0 24 24",
                stroke: "currentColor",
                children: /* @__PURE__ */ jsxRuntime.jsx(
                  "path",
                  {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M6 18L18 6M6 6l12 12"
                  }
                )
              }
            )
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(
          "div",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "absolute right-0 bottom-0 left-0",
              "bg-black/70 px-1 py-0.5",
              "opacity-0 group-hover:opacity-100",
              "transition-opacity"
            ),
            children: /* @__PURE__ */ jsxRuntime.jsx("p", { className: "truncate text-xs text-white", children: file.name })
          }
        )
      ]
    }
  );
}
AttachmentPreviewItem.displayName = "AttachmentPreviewItem";
var AttachmentPicker = React20__namespace.forwardRef(
  ({
    onFilesSelected,
    acceptedTypes = ["image/*", "video/*", ".pdf", ".doc", ".docx"],
    maxFileSize = 25 * 1024 * 1024,
    // 25MB
    maxFiles = 10,
    multiple = true,
    disabled = false,
    onError,
    className,
    children
  }, ref) => {
    const inputRef = React20__namespace.useRef(null);
    React20__namespace.useImperativeHandle(ref, () => inputRef.current);
    const handleClick = () => {
      inputRef.current?.click();
    };
    const handleChange = (event) => {
      const files = Array.from(event.target.files || []);
      if (files.length === 0) return;
      const validFiles = [];
      for (const file of files.slice(0, maxFiles)) {
        const validation = validateFile(file, acceptedTypes, maxFileSize);
        if (validation.valid) {
          validFiles.push(file);
        } else if (onError) {
          onError(`${file.name}: ${validation.error}`);
        }
      }
      if (files.length > maxFiles && onError) {
        onError(`Maximum ${maxFiles} files allowed`);
      }
      if (validFiles.length > 0) {
        onFilesSelected(validFiles);
      }
      event.target.value = "";
    };
    return /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
      /* @__PURE__ */ jsxRuntime.jsx(
        "input",
        {
          ref: inputRef,
          type: "file",
          accept: acceptedTypes.join(","),
          multiple,
          onChange: handleChange,
          disabled,
          className: "sr-only",
          "aria-label": "Select files to attach"
        }
      ),
      /* @__PURE__ */ jsxRuntime.jsx(
        "button",
        {
          type: "button",
          onClick: handleClick,
          disabled,
          className: chunkOR5DRJCW_cjs.cn(
            "inline-flex items-center justify-center",
            "rounded-full p-2",
            "text-neutral-500 hover:text-neutral-700",
            "dark:text-neutral-400 dark:hover:text-neutral-200",
            "hover:bg-neutral-100 dark:hover:bg-neutral-800",
            "focus:ring-primary-500 focus:ring-2 focus:outline-none",
            "disabled:cursor-not-allowed disabled:opacity-50",
            "transition-colors",
            className
          ),
          "aria-label": "Attach files",
          children: children || /* @__PURE__ */ jsxRuntime.jsx(
            "svg",
            {
              className: "h-5 w-5",
              fill: "none",
              viewBox: "0 0 24 24",
              stroke: "currentColor",
              children: /* @__PURE__ */ jsxRuntime.jsx(
                "path",
                {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  strokeWidth: 2,
                  d: "M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"
                }
              )
            }
          )
        }
      )
    ] });
  }
);
AttachmentPicker.displayName = "AttachmentPicker";
function DragDropZone({
  onFilesDropped,
  acceptedTypes,
  maxFileSize,
  maxFiles = 10,
  disabled = false,
  onError,
  children,
  className
}) {
  const [isDragging, setIsDragging] = React20__namespace.useState(false);
  const dragCounterRef = React20__namespace.useRef(0);
  const handleDragEnter = (event) => {
    event.preventDefault();
    event.stopPropagation();
    if (disabled) return;
    dragCounterRef.current++;
    if (event.dataTransfer.items && event.dataTransfer.items.length > 0) {
      setIsDragging(true);
    }
  };
  const handleDragLeave = (event) => {
    event.preventDefault();
    event.stopPropagation();
    if (disabled) return;
    dragCounterRef.current--;
    if (dragCounterRef.current === 0) {
      setIsDragging(false);
    }
  };
  const handleDragOver = (event) => {
    event.preventDefault();
    event.stopPropagation();
  };
  const handleDrop = (event) => {
    event.preventDefault();
    event.stopPropagation();
    if (disabled) return;
    setIsDragging(false);
    dragCounterRef.current = 0;
    const files = Array.from(event.dataTransfer.files);
    if (files.length === 0) return;
    const validFiles = [];
    for (const file of files.slice(0, maxFiles)) {
      const validation = validateFile(file, acceptedTypes, maxFileSize);
      if (validation.valid) {
        validFiles.push(file);
      } else if (onError) {
        onError(`${file.name}: ${validation.error}`);
      }
    }
    if (files.length > maxFiles && onError) {
      onError(`Maximum ${maxFiles} files allowed`);
    }
    if (validFiles.length > 0) {
      onFilesDropped(validFiles);
    }
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      onDragEnter: handleDragEnter,
      onDragLeave: handleDragLeave,
      onDragOver: handleDragOver,
      onDrop: handleDrop,
      className: chunkOR5DRJCW_cjs.cn("relative", className),
      children: [
        children,
        isDragging && /* @__PURE__ */ jsxRuntime.jsx(
          "div",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "absolute inset-0 z-50",
              "flex items-center justify-center",
              "bg-primary-50/90 dark:bg-primary-900/90",
              "border-primary-500 border-2 border-dashed",
              "rounded-lg"
            ),
            children: /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "text-center", children: [
              /* @__PURE__ */ jsxRuntime.jsx(
                "svg",
                {
                  className: "text-primary-500 mx-auto h-12 w-12",
                  fill: "none",
                  viewBox: "0 0 24 24",
                  stroke: "currentColor",
                  children: /* @__PURE__ */ jsxRuntime.jsx(
                    "path",
                    {
                      strokeLinecap: "round",
                      strokeLinejoin: "round",
                      strokeWidth: 2,
                      d: "M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                    }
                  )
                }
              ),
              /* @__PURE__ */ jsxRuntime.jsx("p", { className: "text-primary-700 dark:text-primary-300 mt-2 text-sm font-medium", children: "Drop files here" })
            ] })
          }
        )
      ]
    }
  );
}
DragDropZone.displayName = "DragDropZone";
function CameraButton({
  onCapture,
  useFrontCamera = false,
  disabled = false,
  className
}) {
  const inputRef = React20__namespace.useRef(null);
  const handleClick = () => {
    inputRef.current?.click();
  };
  const handleChange = (event) => {
    const file = event.target.files?.[0];
    if (file) {
      onCapture(file);
    }
    event.target.value = "";
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
    /* @__PURE__ */ jsxRuntime.jsx(
      "input",
      {
        ref: inputRef,
        type: "file",
        accept: "image/*",
        capture: useFrontCamera ? "user" : "environment",
        onChange: handleChange,
        disabled,
        className: "sr-only",
        "aria-label": "Take a photo"
      }
    ),
    /* @__PURE__ */ jsxRuntime.jsx(
      "button",
      {
        type: "button",
        onClick: handleClick,
        disabled,
        className: chunkOR5DRJCW_cjs.cn(
          "inline-flex items-center justify-center",
          "rounded-full p-2",
          "text-neutral-500 hover:text-neutral-700",
          "dark:text-neutral-400 dark:hover:text-neutral-200",
          "hover:bg-neutral-100 dark:hover:bg-neutral-800",
          "focus:ring-primary-500 focus:ring-2 focus:outline-none",
          "disabled:cursor-not-allowed disabled:opacity-50",
          "transition-colors",
          className
        ),
        "aria-label": "Take a photo",
        children: /* @__PURE__ */ jsxRuntime.jsxs(
          "svg",
          {
            className: "h-5 w-5",
            fill: "none",
            viewBox: "0 0 24 24",
            stroke: "currentColor",
            children: [
              /* @__PURE__ */ jsxRuntime.jsx(
                "path",
                {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  strokeWidth: 2,
                  d: "M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"
                }
              ),
              /* @__PURE__ */ jsxRuntime.jsx(
                "path",
                {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  strokeWidth: 2,
                  d: "M15 13a3 3 0 11-6 0 3 3 0 016 0z"
                }
              )
            ]
          }
        )
      }
    )
  ] });
}
CameraButton.displayName = "CameraButton";
function CharacterCounter({
  current,
  max,
  showWarningAt = 0.9,
  className
}) {
  const percentage = current / max;
  const isWarning = percentage >= showWarningAt && percentage < 1;
  const isOver = current > max;
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "span",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "text-xs tabular-nums",
        isOver ? "font-medium text-red-500" : isWarning ? "text-amber-500" : "text-neutral-400",
        className
      ),
      "aria-live": "polite",
      "aria-label": `${current} of ${max} characters`,
      children: [
        current,
        "/",
        max
      ]
    }
  );
}
CharacterCounter.displayName = "CharacterCounter";
var sendButtonVariants = classVarianceAuthority.cva(
  [
    "inline-flex items-center justify-center",
    "rounded-full p-3 self-start",
    "transition-all duration-200",
    "focus:outline-none focus:ring-2 focus:ring-primary-500",
    "disabled:opacity-50 disabled:cursor-not-allowed"
  ],
  {
    variants: {
      variant: {
        primary: [
          "bg-primary-800 text-white",
          "hover:bg-primary-700",
          "active:scale-95"
        ],
        subtle: [
          "bg-transparent text-primary-600",
          "hover:bg-primary-50 dark:hover:bg-primary-900/20"
        ]
      },
      canSend: {
        true: "",
        false: "opacity-50 cursor-not-allowed"
      }
    },
    defaultVariants: {
      variant: "primary",
      canSend: false
    }
  }
);
var SendButton = React20__namespace.forwardRef(
  ({ className, variant, canSend, isLoading, disabled, ...props }, ref) => {
    return /* @__PURE__ */ jsxRuntime.jsx(
      "button",
      {
        ref,
        type: "submit",
        disabled: disabled || !canSend || isLoading,
        className: chunkOR5DRJCW_cjs.cn(sendButtonVariants({ variant, canSend }), className),
        "aria-label": isLoading ? "Sending message" : "Send message",
        ...props,
        children: isLoading ? /* @__PURE__ */ jsxRuntime.jsxs("svg", { className: "h-5 w-5 animate-spin", fill: "none", viewBox: "0 0 24 24", children: [
          /* @__PURE__ */ jsxRuntime.jsx(
            "circle",
            {
              className: "opacity-25",
              cx: "12",
              cy: "12",
              r: "10",
              stroke: "currentColor",
              strokeWidth: "4"
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsx(
            "path",
            {
              className: "opacity-75",
              fill: "currentColor",
              d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
            }
          )
        ] }) : /* @__PURE__ */ jsxRuntime.jsx(
          "svg",
          {
            className: "h-5 w-5",
            fill: "none",
            viewBox: "0 0 24 24",
            stroke: "currentColor",
            children: /* @__PURE__ */ jsxRuntime.jsx(
              "path",
              {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M12 19l9 2-9-18-9 18 9-2zm0 0v-8"
              }
            )
          }
        )
      }
    );
  }
);
SendButton.displayName = "SendButton";
var MessageComposer = React20__namespace.forwardRef(
  ({
    onSend,
    onTypingStart,
    onTypingStop,
    placeholder = "Type a message...",
    maxLength = 1600,
    showCharacterCount = false,
    disabled = false,
    isSending = false,
    showAttachmentPicker = true,
    showCameraButton = false,
    acceptedFileTypes = ["image/*", "video/*", ".pdf", ".doc", ".docx"],
    maxFileSize = 25 * 1024 * 1024,
    maxAttachments = 10,
    onError,
    autoFocus = false,
    replyTo = null,
    onCancelReply,
    variant = "default",
    className
  }, ref) => {
    const textareaRef = React20__namespace.useRef(null);
    const [content, setContent] = React20__namespace.useState("");
    const [attachments, setAttachments] = React20__namespace.useState(
      []
    );
    const [isTyping, setIsTyping] = React20__namespace.useState(false);
    const typingTimeoutRef = React20__namespace.useRef(null);
    React20__namespace.useImperativeHandle(ref, () => textareaRef.current);
    React20__namespace.useEffect(() => {
      const textarea = textareaRef.current;
      if (textarea) {
        textarea.style.height = "auto";
        textarea.style.height = `${Math.min(textarea.scrollHeight, 150)}px`;
      }
    }, [content]);
    React20__namespace.useEffect(() => {
      if (content.length > 0 && !isTyping) {
        setIsTyping(true);
        onTypingStart?.();
      }
      if (typingTimeoutRef.current) {
        clearTimeout(typingTimeoutRef.current);
      }
      typingTimeoutRef.current = setTimeout(() => {
        if (isTyping) {
          setIsTyping(false);
          onTypingStop?.();
        }
      }, 2e3);
      return () => {
        if (typingTimeoutRef.current) {
          clearTimeout(typingTimeoutRef.current);
        }
      };
    }, [content, isTyping, onTypingStart, onTypingStop]);
    React20__namespace.useEffect(() => {
      if (autoFocus) {
        textareaRef.current?.focus();
      }
    }, [autoFocus]);
    React20__namespace.useEffect(() => {
      if (replyTo) {
        textareaRef.current?.focus();
      }
    }, [replyTo]);
    const canSend = (content.trim().length > 0 || attachments.length > 0) && content.length <= maxLength && !disabled && !isSending;
    const handleSubmit = async (event) => {
      event.preventDefault();
      if (!canSend) return;
      const message = {
        content: content.trim(),
        attachments: attachments.map((a) => a.file),
        replyToId: replyTo?.id
      };
      setContent("");
      setAttachments([]);
      setIsTyping(false);
      onTypingStop?.();
      try {
        await onSend(message);
      } catch {
        setContent(message.content);
        onError?.("Failed to send message");
      }
    };
    const handleKeyDown = (event) => {
      if (event.key === "Enter" && !event.shiftKey) {
        event.preventDefault();
        if (canSend) {
          handleSubmit(event);
        }
      }
    };
    const handleFilesSelected = (files) => {
      const remainingSlots = maxAttachments - attachments.length;
      const filesToAdd = files.slice(0, remainingSlots);
      if (files.length > remainingSlots) {
        onError?.(`Maximum ${maxAttachments} attachments allowed`);
      }
      const newAttachments = filesToAdd.map((file) => {
        const type = getFileType(file.type);
        let previewUrl;
        if (type === "image" || type === "video") {
          previewUrl = URL.createObjectURL(file);
        }
        return {
          id: generateAttachmentId(),
          file,
          previewUrl,
          type,
          state: "pending"
        };
      });
      setAttachments((prev) => [...prev, ...newAttachments]);
    };
    const handleRemoveAttachment = (attachmentId) => {
      setAttachments((prev) => {
        const attachment = prev.find((a) => a.id === attachmentId);
        if (attachment?.previewUrl) {
          URL.revokeObjectURL(attachment.previewUrl);
        }
        return prev.filter((a) => a.id !== attachmentId);
      });
    };
    React20__namespace.useEffect(() => {
      const currentAttachments = attachments;
      return () => {
        currentAttachments.forEach((a) => {
          if (a.previewUrl) {
            URL.revokeObjectURL(a.previewUrl);
          }
        });
      };
    }, [attachments]);
    return /* @__PURE__ */ jsxRuntime.jsx(
      DragDropZone,
      {
        onFilesDropped: handleFilesSelected,
        acceptedTypes: acceptedFileTypes,
        maxFileSize,
        maxFiles: maxAttachments - attachments.length,
        disabled: disabled || attachments.length >= maxAttachments,
        onError,
        className: chunkOR5DRJCW_cjs.cn("w-full", className),
        children: /* @__PURE__ */ jsxRuntime.jsxs("form", { onSubmit: handleSubmit, className: "w-full", children: [
          replyTo && /* @__PURE__ */ jsxRuntime.jsxs(
            "div",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "flex items-center gap-2 px-4 py-2",
                "bg-neutral-50 dark:bg-neutral-800/50",
                "border-primary-500 border-l-4"
              ),
              children: [
                /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "min-w-0 flex-1", children: [
                  /* @__PURE__ */ jsxRuntime.jsxs("span", { className: "text-primary-600 dark:text-primary-400 text-xs font-medium", children: [
                    "Replying to ",
                    replyTo.senderName
                  ] }),
                  /* @__PURE__ */ jsxRuntime.jsx("p", { className: "truncate text-sm text-neutral-600 dark:text-neutral-300", children: replyTo.content })
                ] }),
                /* @__PURE__ */ jsxRuntime.jsx(
                  "button",
                  {
                    type: "button",
                    onClick: onCancelReply,
                    className: chunkOR5DRJCW_cjs.cn(
                      "shrink-0 rounded p-1",
                      "text-neutral-400 hover:text-neutral-600",
                      "dark:text-neutral-500 dark:hover:text-neutral-300",
                      "focus:ring-primary-500 focus:ring-2 focus:outline-none"
                    ),
                    "aria-label": "Cancel reply",
                    children: /* @__PURE__ */ jsxRuntime.jsx(
                      "svg",
                      {
                        className: "h-4 w-4",
                        fill: "none",
                        viewBox: "0 0 24 24",
                        stroke: "currentColor",
                        children: /* @__PURE__ */ jsxRuntime.jsx(
                          "path",
                          {
                            strokeLinecap: "round",
                            strokeLinejoin: "round",
                            strokeWidth: 2,
                            d: "M6 18L18 6M6 6l12 12"
                          }
                        )
                      }
                    )
                  }
                )
              ]
            }
          ),
          attachments.length > 0 && /* @__PURE__ */ jsxRuntime.jsx(
            "div",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "flex flex-wrap gap-2 p-3",
                "border-t border-neutral-200 dark:border-neutral-700"
              ),
              children: attachments.map((attachment) => /* @__PURE__ */ jsxRuntime.jsx(
                AttachmentPreviewItem,
                {
                  attachment,
                  onRemove: () => handleRemoveAttachment(attachment.id)
                },
                attachment.id
              ))
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsxs(
            "div",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "flex items-center gap-2 p-3",
                "bg-white dark:bg-neutral-900",
                variant === "default" && "border-t border-neutral-200 dark:border-neutral-700"
              ),
              children: [
                showAttachmentPicker && /* @__PURE__ */ jsxRuntime.jsx(
                  AttachmentPicker,
                  {
                    onFilesSelected: handleFilesSelected,
                    acceptedTypes: acceptedFileTypes,
                    maxFileSize,
                    maxFiles: maxAttachments - attachments.length,
                    disabled: disabled || attachments.length >= maxAttachments,
                    onError
                  }
                ),
                showCameraButton && /* @__PURE__ */ jsxRuntime.jsx(
                  CameraButton,
                  {
                    onCapture: (file) => handleFilesSelected([file]),
                    disabled: disabled || attachments.length >= maxAttachments
                  }
                ),
                /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "relative flex-1", children: [
                  /* @__PURE__ */ jsxRuntime.jsx(
                    "textarea",
                    {
                      ref: textareaRef,
                      value: content,
                      onChange: (e) => setContent(e.target.value),
                      onKeyDown: handleKeyDown,
                      placeholder,
                      disabled: disabled || isSending,
                      rows: 1,
                      className: chunkOR5DRJCW_cjs.cn(
                        "w-full resize-none rounded-2xl px-4 py-2.5",
                        "bg-neutral-100 dark:bg-neutral-800",
                        "text-neutral-900 dark:text-neutral-100",
                        "placeholder:text-neutral-400 dark:placeholder:text-neutral-500",
                        "focus:ring-primary-500 focus:ring-2 focus:outline-none",
                        "disabled:cursor-not-allowed disabled:opacity-50",
                        "transition-colors",
                        "max-h-[150px]"
                      ),
                      "aria-label": "Message",
                      "aria-describedby": showCharacterCount ? "char-count" : void 0
                    }
                  ),
                  showCharacterCount && /* @__PURE__ */ jsxRuntime.jsx("div", { id: "char-count", className: "absolute right-3 bottom-1.5", children: /* @__PURE__ */ jsxRuntime.jsx(CharacterCounter, { current: content.length, max: maxLength }) })
                ] }),
                /* @__PURE__ */ jsxRuntime.jsx(
                  SendButton,
                  {
                    canSend,
                    isLoading: isSending,
                    disabled
                  }
                )
              ]
            }
          )
        ] })
      }
    );
  }
);
MessageComposer.displayName = "MessageComposer";
var statusIconVariants2 = classVarianceAuthority.cva(
  "inline-flex items-center gap-0.5 text-current",
  {
    variants: {
      status: {
        sending: "text-neutral-400",
        sent: "text-neutral-500",
        delivered: "text-neutral-600 dark:text-neutral-400",
        read: "text-primary-600 dark:text-primary-400",
        failed: "text-red-500"
      }
    },
    defaultVariants: {
      status: "sent"
    }
  }
);
function MessageStatusIcon({ status, className }) {
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "span",
    {
      className: chunkOR5DRJCW_cjs.cn(statusIconVariants2({ status }), className),
      role: "img",
      "aria-label": `Message ${status}`,
      children: [
        status === "sending" && /* @__PURE__ */ jsxRuntime.jsxs(
          "svg",
          {
            className: "h-3.5 w-3.5 animate-spin",
            fill: "none",
            viewBox: "0 0 24 24",
            children: [
              /* @__PURE__ */ jsxRuntime.jsx(
                "circle",
                {
                  className: "opacity-25",
                  cx: "12",
                  cy: "12",
                  r: "10",
                  stroke: "currentColor",
                  strokeWidth: "4"
                }
              ),
              /* @__PURE__ */ jsxRuntime.jsx(
                "path",
                {
                  className: "opacity-75",
                  fill: "currentColor",
                  d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
                }
              )
            ]
          }
        ),
        status === "sent" && /* @__PURE__ */ jsxRuntime.jsx(
          "svg",
          {
            className: "h-3.5 w-3.5",
            fill: "none",
            viewBox: "0 0 24 24",
            stroke: "currentColor",
            strokeWidth: "2",
            children: /* @__PURE__ */ jsxRuntime.jsx(
              "path",
              {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                d: "M5 13l4 4L19 7"
              }
            )
          }
        ),
        (status === "delivered" || status === "read") && /* @__PURE__ */ jsxRuntime.jsxs(
          "svg",
          {
            className: "h-4 w-4",
            fill: "none",
            viewBox: "0 0 24 24",
            stroke: "currentColor",
            strokeWidth: "2",
            children: [
              /* @__PURE__ */ jsxRuntime.jsx(
                "path",
                {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  d: "M5 13l4 4L19 7"
                }
              ),
              /* @__PURE__ */ jsxRuntime.jsx(
                "path",
                {
                  strokeLinecap: "round",
                  strokeLinejoin: "round",
                  d: "M12 13l4 4L26 7",
                  transform: "translate(-5, 0)"
                }
              )
            ]
          }
        ),
        status === "failed" && /* @__PURE__ */ jsxRuntime.jsx(
          "svg",
          {
            className: "h-3.5 w-3.5",
            fill: "none",
            viewBox: "0 0 24 24",
            stroke: "currentColor",
            strokeWidth: "2",
            children: /* @__PURE__ */ jsxRuntime.jsx(
              "path",
              {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                d: "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
              }
            )
          }
        )
      ]
    }
  );
}
function ReadReceiptIndicator({
  receipts,
  maxAvatars = 3,
  size = "xs",
  className
}) {
  if (receipts.length === 0) return null;
  const visibleReceipts = receipts.slice(0, maxAvatars);
  const remainingCount = receipts.length - maxAvatars;
  const sizeClasses2 = {
    xs: "h-4 w-4 text-[8px]",
    sm: "h-5 w-5 text-[10px]"
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn("flex items-center -space-x-1", className),
      "aria-label": `Read by ${receipts.map((r) => r.participant.name).join(", ")}`,
      children: [
        visibleReceipts.map((receipt) => /* @__PURE__ */ jsxRuntime.jsx(
          "div",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "rounded-full ring-2 ring-white dark:ring-neutral-900",
              "bg-primary-800 font-medium text-white",
              "flex items-center justify-center",
              sizeClasses2[size]
            ),
            title: `Read by ${receipt.participant.name}`,
            children: receipt.participant.avatarUrl ? /* @__PURE__ */ jsxRuntime.jsx(
              "img",
              {
                src: receipt.participant.avatarUrl,
                alt: receipt.participant.name,
                className: "h-full w-full rounded-full object-cover"
              }
            ) : receipt.participant.name.charAt(0).toUpperCase()
          },
          receipt.participant.id
        )),
        remainingCount > 0 && /* @__PURE__ */ jsxRuntime.jsxs(
          "div",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "rounded-full ring-2 ring-white dark:ring-neutral-900",
              "bg-neutral-500 font-medium text-white",
              "flex items-center justify-center",
              sizeClasses2[size]
            ),
            children: [
              "+",
              remainingCount
            ]
          }
        )
      ]
    }
  );
}
function AttachmentPreview({
  attachment,
  onClick,
  className
}) {
  const isImage = attachment.type === "image";
  const isVideo = attachment.type === "video";
  if (isImage || isVideo) {
    return /* @__PURE__ */ jsxRuntime.jsxs(
      "button",
      {
        type: "button",
        onClick,
        className: chunkOR5DRJCW_cjs.cn(
          "relative block overflow-hidden rounded-lg",
          "focus:ring-primary-500 focus:ring-2 focus:outline-none",
          "transition-transform hover:scale-[1.02]",
          className
        ),
        "aria-label": `View ${attachment.alt || attachment.filename}`,
        children: [
          /* @__PURE__ */ jsxRuntime.jsx(
            "img",
            {
              src: attachment.thumbnailUrl || attachment.url,
              alt: attachment.alt || attachment.filename,
              className: "max-h-64 w-auto rounded-lg object-cover",
              loading: "lazy"
            }
          ),
          isVideo && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute inset-0 flex items-center justify-center bg-black/30", children: /* @__PURE__ */ jsxRuntime.jsx("div", { className: "rounded-full bg-white/90 p-3", children: /* @__PURE__ */ jsxRuntime.jsx(
            "svg",
            {
              className: "h-6 w-6 text-neutral-900",
              fill: "currentColor",
              viewBox: "0 0 24 24",
              children: /* @__PURE__ */ jsxRuntime.jsx("path", { d: "M8 5v14l11-7z" })
            }
          ) }) }),
          attachment.state === "uploading" && attachment.progress !== void 0 && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute inset-0 flex items-center justify-center bg-black/50", children: /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "text-center text-white", children: [
            /* @__PURE__ */ jsxRuntime.jsxs(
              "svg",
              {
                className: "mx-auto h-8 w-8 animate-spin",
                fill: "none",
                viewBox: "0 0 24 24",
                children: [
                  /* @__PURE__ */ jsxRuntime.jsx(
                    "circle",
                    {
                      className: "opacity-25",
                      cx: "12",
                      cy: "12",
                      r: "10",
                      stroke: "currentColor",
                      strokeWidth: "4"
                    }
                  ),
                  /* @__PURE__ */ jsxRuntime.jsx(
                    "path",
                    {
                      className: "opacity-75",
                      fill: "currentColor",
                      d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
                    }
                  )
                ]
              }
            ),
            /* @__PURE__ */ jsxRuntime.jsxs("span", { className: "mt-1 text-sm", children: [
              attachment.progress,
              "%"
            ] })
          ] }) }),
          attachment.state === "failed" && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute inset-0 flex items-center justify-center bg-black/50", children: /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "text-center text-white", children: [
            /* @__PURE__ */ jsxRuntime.jsx(
              "svg",
              {
                className: "mx-auto h-8 w-8 text-red-400",
                fill: "none",
                viewBox: "0 0 24 24",
                stroke: "currentColor",
                children: /* @__PURE__ */ jsxRuntime.jsx(
                  "path",
                  {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                  }
                )
              }
            ),
            /* @__PURE__ */ jsxRuntime.jsx("span", { className: "mt-1 text-sm", children: "Upload failed" })
          ] }) })
        ]
      }
    );
  }
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "button",
    {
      type: "button",
      onClick,
      className: chunkOR5DRJCW_cjs.cn(
        "flex items-center gap-3 rounded-lg p-3",
        "bg-white/10 hover:bg-white/20",
        "transition-colors",
        "focus:ring-primary-500 focus:ring-2 focus:outline-none",
        className
      ),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: "rounded-lg bg-white/20 p-2", children: /* @__PURE__ */ jsxRuntime.jsx(
          "svg",
          {
            className: "h-6 w-6",
            fill: "none",
            viewBox: "0 0 24 24",
            stroke: "currentColor",
            children: /* @__PURE__ */ jsxRuntime.jsx(
              "path",
              {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
              }
            )
          }
        ) }),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "min-w-0 flex-1 text-left", children: [
          /* @__PURE__ */ jsxRuntime.jsx("p", { className: "truncate text-sm font-medium", children: attachment.filename }),
          /* @__PURE__ */ jsxRuntime.jsx("p", { className: "text-xs opacity-70", children: formatFileSize2(attachment.size) })
        ] })
      ]
    }
  );
}
function formatFileSize2(bytes) {
  if (bytes < 1024) return `${bytes} B`;
  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
}
var bubbleVariants2 = classVarianceAuthority.cva(
  [
    "relative max-w-[85%] sm:max-w-[70%]",
    "rounded-2xl px-4 py-2",
    "transition-all duration-200"
  ],
  {
    variants: {
      variant: {
        outgoing: ["bg-primary-800 text-white", "rounded-br-md", "ml-auto"],
        incoming: [
          "bg-neutral-100 text-neutral-900",
          "dark:bg-neutral-800 dark:text-neutral-100",
          "rounded-bl-md",
          "mr-auto"
        ],
        system: [
          "mx-auto max-w-none",
          "bg-transparent text-neutral-500 dark:text-neutral-400",
          "text-center text-sm",
          "py-1 px-2"
        ]
      },
      status: {
        sending: "opacity-70",
        sent: "",
        delivered: "",
        read: "",
        failed: "ring-2 ring-red-500/50"
      }
    },
    defaultVariants: {
      variant: "incoming",
      status: "sent"
    }
  }
);
function defaultFormatTimestamp(timestamp) {
  const date = typeof timestamp === "string" ? new Date(timestamp) : timestamp;
  return date.toLocaleTimeString(void 0, {
    hour: "numeric",
    minute: "2-digit"
  });
}
var MessageBubble = React20__namespace.forwardRef(
  ({
    className,
    message,
    showAvatar = false,
    showSenderName = false,
    showTimestamp = true,
    showStatus = true,
    showReadReceipts = true,
    onRetry,
    onAttachmentClick,
    isOutgoing,
    formatTimestamp = defaultFormatTimestamp,
    ...props
  }, ref) => {
    const isSystem = message.type === "system";
    const variant = isSystem ? "system" : isOutgoing ? "outgoing" : "incoming";
    const hasAttachments = message.attachments && message.attachments.length > 0;
    const hasText = message.content && message.content.trim().length > 0;
    const isFailed = message.status === "failed";
    if (isSystem) {
      return /* @__PURE__ */ jsxRuntime.jsx(
        "div",
        {
          ref,
          className: chunkOR5DRJCW_cjs.cn(bubbleVariants2({ variant: "system" }), className),
          role: "status",
          "aria-live": "polite",
          ...props,
          children: message.content
        }
      );
    }
    return /* @__PURE__ */ jsxRuntime.jsxs(
      "div",
      {
        ref,
        className: chunkOR5DRJCW_cjs.cn(
          "group flex items-end gap-2",
          isOutgoing ? "flex-row-reverse" : "flex-row",
          className
        ),
        ...props,
        children: [
          showAvatar && !isOutgoing && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "mb-1 shrink-0", children: /* @__PURE__ */ jsxRuntime.jsx(
            "div",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "flex h-8 w-8 items-center justify-center rounded-full",
                "bg-primary-800 text-sm font-medium text-white"
              ),
              children: message.sender.avatarUrl ? /* @__PURE__ */ jsxRuntime.jsx(
                "img",
                {
                  src: message.sender.avatarUrl,
                  alt: message.sender.name,
                  className: "h-full w-full rounded-full object-cover"
                }
              ) : message.sender.name.charAt(0).toUpperCase()
            }
          ) }),
          /* @__PURE__ */ jsxRuntime.jsxs(
            "div",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "flex flex-col",
                isOutgoing ? "items-end" : "items-start"
              ),
              children: [
                showSenderName && !isOutgoing && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "mb-1 px-1 text-xs font-medium text-neutral-500 dark:text-neutral-400", children: message.sender.name }),
                message.replyTo && /* @__PURE__ */ jsxRuntime.jsxs(
                  "div",
                  {
                    className: chunkOR5DRJCW_cjs.cn(
                      "mb-1 max-w-full rounded-lg px-3 py-1.5 text-xs",
                      isOutgoing ? "bg-primary-700/50 text-white/80" : "bg-neutral-200 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-300"
                    ),
                    children: [
                      /* @__PURE__ */ jsxRuntime.jsx("span", { className: "font-medium", children: message.replyTo.sender.name }),
                      /* @__PURE__ */ jsxRuntime.jsx("p", { className: "truncate", children: message.replyTo.content })
                    ]
                  }
                ),
                /* @__PURE__ */ jsxRuntime.jsxs(
                  "div",
                  {
                    className: chunkOR5DRJCW_cjs.cn(bubbleVariants2({ variant, status: message.status })),
                    role: "article",
                    "aria-label": `Message from ${message.sender.name}`,
                    children: [
                      hasAttachments && /* @__PURE__ */ jsxRuntime.jsx("div", { className: chunkOR5DRJCW_cjs.cn("space-y-2", hasText && "mb-2"), children: message.attachments.map((attachment) => /* @__PURE__ */ jsxRuntime.jsx(
                        AttachmentPreview,
                        {
                          attachment,
                          onClick: () => onAttachmentClick?.(attachment)
                        },
                        attachment.id
                      )) }),
                      hasText && /* @__PURE__ */ jsxRuntime.jsx("p", { className: "break-words whitespace-pre-wrap", children: message.isDeleted ? /* @__PURE__ */ jsxRuntime.jsx("span", { className: "italic opacity-60", children: "This message was deleted" }) : message.content }),
                      message.isEdited && !message.isDeleted && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "ml-1 text-xs opacity-60", children: "(edited)" })
                    ]
                  }
                ),
                /* @__PURE__ */ jsxRuntime.jsxs(
                  "div",
                  {
                    className: chunkOR5DRJCW_cjs.cn(
                      "mt-1 flex items-center gap-2 px-1",
                      isOutgoing ? "flex-row-reverse" : "flex-row"
                    ),
                    children: [
                      showTimestamp && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-xs text-neutral-400 dark:text-neutral-500", children: formatTimestamp(message.timestamp) }),
                      showStatus && isOutgoing && /* @__PURE__ */ jsxRuntime.jsx(MessageStatusIcon, { status: message.status }),
                      showReadReceipts && isOutgoing && message.readReceipts && message.readReceipts.length > 0 && /* @__PURE__ */ jsxRuntime.jsx(ReadReceiptIndicator, { receipts: message.readReceipts }),
                      isFailed && onRetry && /* @__PURE__ */ jsxRuntime.jsxs(
                        "button",
                        {
                          type: "button",
                          onClick: onRetry,
                          className: chunkOR5DRJCW_cjs.cn(
                            "flex items-center gap-1 rounded px-2 py-0.5",
                            "text-xs font-medium text-red-500",
                            "hover:bg-red-50 dark:hover:bg-red-900/20",
                            "focus:ring-2 focus:ring-red-500 focus:outline-none"
                          ),
                          "aria-label": "Retry sending message",
                          children: [
                            /* @__PURE__ */ jsxRuntime.jsx(
                              "svg",
                              {
                                className: "h-3 w-3",
                                fill: "none",
                                viewBox: "0 0 24 24",
                                stroke: "currentColor",
                                children: /* @__PURE__ */ jsxRuntime.jsx(
                                  "path",
                                  {
                                    strokeLinecap: "round",
                                    strokeLinejoin: "round",
                                    strokeWidth: 2,
                                    d: "M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                                  }
                                )
                              }
                            ),
                            "Retry"
                          ]
                        }
                      )
                    ]
                  }
                ),
                message.reactions && message.reactions.length > 0 && /* @__PURE__ */ jsxRuntime.jsx(
                  "div",
                  {
                    className: chunkOR5DRJCW_cjs.cn(
                      "-mt-1 flex flex-wrap gap-1",
                      isOutgoing ? "justify-end" : "justify-start"
                    ),
                    children: message.reactions.map((reaction) => /* @__PURE__ */ jsxRuntime.jsxs(
                      "span",
                      {
                        className: chunkOR5DRJCW_cjs.cn(
                          "inline-flex items-center gap-1 rounded-full px-2 py-0.5",
                          "bg-neutral-100 text-xs dark:bg-neutral-800",
                          "border border-neutral-200 dark:border-neutral-700"
                        ),
                        title: reaction.participants.map((p) => p.name).join(", "),
                        children: [
                          /* @__PURE__ */ jsxRuntime.jsx("span", { children: reaction.emoji }),
                          reaction.count > 1 && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-neutral-500", children: reaction.count })
                        ]
                      },
                      reaction.emoji
                    ))
                  }
                )
              ]
            }
          ),
          showAvatar && isOutgoing && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "w-8 shrink-0" })
        ]
      }
    );
  }
);
MessageBubble.displayName = "MessageBubble";
function groupMessagesByDate(messages) {
  const groups = /* @__PURE__ */ new Map();
  messages.forEach((message) => {
    const date = new Date(message.timestamp);
    const dateKey = date.toDateString();
    const existing = groups.get(dateKey) || [];
    groups.set(dateKey, [...existing, message]);
  });
  return Array.from(groups.entries()).map(([dateKey, msgs]) => ({
    date: dateKey,
    label: formatDateLabel(new Date(dateKey)),
    messages: msgs
  }));
}
function formatDateLabel(date) {
  const now = /* @__PURE__ */ new Date();
  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
  const yesterday = new Date(today);
  yesterday.setDate(yesterday.getDate() - 1);
  const messageDate = new Date(
    date.getFullYear(),
    date.getMonth(),
    date.getDate()
  );
  if (messageDate.getTime() === today.getTime()) {
    return "Today";
  }
  if (messageDate.getTime() === yesterday.getTime()) {
    return "Yesterday";
  }
  if (date.getFullYear() === now.getFullYear()) {
    return date.toLocaleDateString(void 0, {
      weekday: "long",
      month: "long",
      day: "numeric"
    });
  }
  return date.toLocaleDateString(void 0, {
    weekday: "long",
    month: "long",
    day: "numeric",
    year: "numeric"
  });
}
function isSameSenderGroup(prev, current, thresholdMinutes = 5) {
  if (!prev) return false;
  if (prev.sender.id !== current.sender.id) return false;
  if (prev.type === "system" || current.type === "system") return false;
  const prevTime = new Date(prev.timestamp).getTime();
  const currentTime = new Date(current.timestamp).getTime();
  const diffMinutes = (currentTime - prevTime) / (1e3 * 60);
  return diffMinutes < thresholdMinutes;
}
function SkeletonMessage({
  isOutgoing = false,
  showAvatar = true,
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "flex items-end gap-2",
        isOutgoing ? "flex-row-reverse" : "flex-row",
        className
      ),
      "aria-hidden": "true",
      children: [
        showAvatar && !isOutgoing && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "h-8 w-8 animate-pulse rounded-full bg-neutral-200 dark:bg-neutral-700" }),
        /* @__PURE__ */ jsxRuntime.jsx(
          "div",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "animate-pulse rounded-2xl",
              isOutgoing ? "bg-primary-800/30 rounded-br-md" : "rounded-bl-md bg-neutral-200 dark:bg-neutral-700",
              "h-10 w-48"
            )
          }
        ),
        showAvatar && isOutgoing && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "w-8" })
      ]
    }
  );
}
SkeletonMessage.displayName = "SkeletonMessage";
function TypingIndicator({ typingState, className }) {
  const { participants } = typingState;
  if (participants.length === 0) return null;
  const typingText = participants.length === 1 ? `${participants[0].name} is typing` : participants.length === 2 ? `${participants[0].name} and ${participants[1].name} are typing` : `${participants[0].name} and ${participants.length - 1} others are typing`;
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn("flex items-center gap-2 px-4 py-2", className),
      role: "status",
      "aria-live": "polite",
      "aria-label": typingText,
      children: [
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-1 rounded-2xl rounded-bl-md bg-neutral-200 px-4 py-3 dark:bg-neutral-700", children: [
          /* @__PURE__ */ jsxRuntime.jsx(
            "span",
            {
              className: "h-2 w-2 animate-bounce rounded-full bg-neutral-500",
              style: { animationDelay: "0ms" }
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsx(
            "span",
            {
              className: "h-2 w-2 animate-bounce rounded-full bg-neutral-500",
              style: { animationDelay: "150ms" }
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsx(
            "span",
            {
              className: "h-2 w-2 animate-bounce rounded-full bg-neutral-500",
              style: { animationDelay: "300ms" }
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-xs text-neutral-500 dark:text-neutral-400", children: typingText })
      ]
    }
  );
}
TypingIndicator.displayName = "TypingIndicator";
function DateSeparator({ label, className }) {
  return /* @__PURE__ */ jsxRuntime.jsx(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn("flex items-center justify-center py-4", className),
      role: "separator",
      "aria-label": label,
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "span",
        {
          className: chunkOR5DRJCW_cjs.cn(
            "rounded-full px-3 py-1 text-xs font-medium",
            "bg-neutral-100 text-neutral-500",
            "dark:bg-neutral-800 dark:text-neutral-400"
          ),
          children: label
        }
      )
    }
  );
}
DateSeparator.displayName = "DateSeparator";
function EmptyState({
  title = "No messages yet",
  description = "Start the conversation by sending a message below.",
  icon,
  action,
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "flex flex-1 flex-col items-center justify-center p-8 text-center",
        className
      ),
      role: "status",
      "aria-label": title,
      children: [
        icon || /* @__PURE__ */ jsxRuntime.jsx("div", { className: "mb-4 rounded-full bg-neutral-100 p-4 dark:bg-neutral-800", children: /* @__PURE__ */ jsxRuntime.jsx(
          "svg",
          {
            className: "h-12 w-12 text-neutral-400",
            fill: "none",
            viewBox: "0 0 24 24",
            stroke: "currentColor",
            children: /* @__PURE__ */ jsxRuntime.jsx(
              "path",
              {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 1.5,
                d: "M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
              }
            )
          }
        ) }),
        /* @__PURE__ */ jsxRuntime.jsx("h3", { className: "mb-2 text-lg font-semibold text-neutral-900 dark:text-neutral-100", children: title }),
        /* @__PURE__ */ jsxRuntime.jsx("p", { className: "mb-4 max-w-sm text-sm text-neutral-500 dark:text-neutral-400", children: description }),
        action
      ]
    }
  );
}
EmptyState.displayName = "EmptyState";
function LoadMoreButton({
  isLoading,
  onClick,
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsx("div", { className: chunkOR5DRJCW_cjs.cn("flex justify-center py-4", className), children: /* @__PURE__ */ jsxRuntime.jsx(
    "button",
    {
      type: "button",
      onClick,
      disabled: isLoading,
      className: chunkOR5DRJCW_cjs.cn(
        "rounded-full px-4 py-2 text-sm font-medium",
        "bg-neutral-100 text-neutral-600 dark:bg-neutral-800 dark:text-neutral-300",
        "hover:bg-neutral-200 dark:hover:bg-neutral-700",
        "focus:ring-primary-500 focus:ring-2 focus:outline-none",
        "disabled:cursor-not-allowed disabled:opacity-50",
        "transition-colors"
      ),
      "aria-label": isLoading ? "Loading more messages" : "Load more messages",
      children: isLoading ? /* @__PURE__ */ jsxRuntime.jsxs("span", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsxRuntime.jsxs(
          "svg",
          {
            className: "h-4 w-4 animate-spin",
            fill: "none",
            viewBox: "0 0 24 24",
            children: [
              /* @__PURE__ */ jsxRuntime.jsx(
                "circle",
                {
                  className: "opacity-25",
                  cx: "12",
                  cy: "12",
                  r: "10",
                  stroke: "currentColor",
                  strokeWidth: "4"
                }
              ),
              /* @__PURE__ */ jsxRuntime.jsx(
                "path",
                {
                  className: "opacity-75",
                  fill: "currentColor",
                  d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
                }
              )
            ]
          }
        ),
        "Loading..."
      ] }) : "Load earlier messages"
    }
  ) });
}
LoadMoreButton.displayName = "LoadMoreButton";
var MessageList = React20__namespace.forwardRef(
  ({
    messages,
    currentUser,
    isLoading = false,
    hasMore = false,
    isLoadingMore = false,
    typingState,
    showAvatars = true,
    showSenderNames = false,
    groupByDate = true,
    onLoadMore,
    onRetryMessage,
    onAttachmentClick,
    emptyState,
    formatTimestamp,
    className,
    autoScroll = "onNewMessage"
  }, ref) => {
    const scrollContainerRef = React20__namespace.useRef(null);
    const bottomRef = React20__namespace.useRef(null);
    const [isUserScrolled, setIsUserScrolled] = React20__namespace.useState(false);
    const prevMessageCountRef = React20__namespace.useRef(messages.length);
    React20__namespace.useImperativeHandle(ref, () => scrollContainerRef.current);
    const handleScroll = React20__namespace.useCallback(() => {
      const container = scrollContainerRef.current;
      if (!container) return;
      const { scrollTop, scrollHeight, clientHeight } = container;
      const isAtBottom = scrollHeight - scrollTop - clientHeight < 100;
      setIsUserScrolled(!isAtBottom);
    }, []);
    React20__namespace.useEffect(() => {
      const container = scrollContainerRef.current;
      const bottom = bottomRef.current;
      if (!container || !bottom) return;
      const messageCountChanged = messages.length !== prevMessageCountRef.current;
      prevMessageCountRef.current = messages.length;
      if (autoScroll === "always") {
        bottom.scrollIntoView({ behavior: "smooth" });
      } else if (autoScroll === "onNewMessage" && messageCountChanged) {
        const lastMessage = messages[messages.length - 1];
        const isOutgoing = lastMessage?.sender.id === currentUser.id;
        if (isOutgoing || !isUserScrolled) {
          bottom.scrollIntoView({ behavior: "smooth" });
        }
      }
    }, [messages, currentUser.id, autoScroll, isUserScrolled]);
    React20__namespace.useEffect(() => {
      const bottom = bottomRef.current;
      if (bottom && !isLoading) {
        bottom.scrollIntoView();
      }
    }, [isLoading]);
    const messageGroups = groupByDate ? groupMessagesByDate(messages) : [{ date: "all", label: "", messages }];
    if (isLoading) {
      return /* @__PURE__ */ jsxRuntime.jsx(
        "div",
        {
          className: chunkOR5DRJCW_cjs.cn(
            "flex flex-1 flex-col gap-3 overflow-y-auto p-4",
            className
          ),
          "aria-busy": "true",
          "aria-label": "Loading messages",
          children: Array.from({ length: 8 }).map((_, i) => /* @__PURE__ */ jsxRuntime.jsx(
            SkeletonMessage,
            {
              isOutgoing: i % 3 === 0,
              showAvatar: showAvatars
            },
            i
          ))
        }
      );
    }
    if (messages.length === 0) {
      return emptyState || /* @__PURE__ */ jsxRuntime.jsx(EmptyState, {});
    }
    return /* @__PURE__ */ jsxRuntime.jsxs(
      "div",
      {
        ref: scrollContainerRef,
        className: chunkOR5DRJCW_cjs.cn(
          "flex flex-1 flex-col overflow-y-auto",
          "scroll-smooth",
          className
        ),
        onScroll: handleScroll,
        role: "log",
        "aria-label": "Message history",
        "aria-live": "polite",
        children: [
          hasMore && onLoadMore && /* @__PURE__ */ jsxRuntime.jsx(LoadMoreButton, { isLoading: isLoadingMore, onClick: onLoadMore }),
          /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex flex-col gap-1 p-4", children: messageGroups.map((group) => /* @__PURE__ */ jsxRuntime.jsxs(React20__namespace.Fragment, { children: [
            groupByDate && group.label && /* @__PURE__ */ jsxRuntime.jsx(DateSeparator, { label: group.label }),
            group.messages.map((message, index) => {
              const prevMessage = group.messages[index - 1];
              const isOutgoing = message.sender.id === currentUser.id;
              const isSameGroup = isSameSenderGroup(prevMessage, message);
              return /* @__PURE__ */ jsxRuntime.jsx(
                "div",
                {
                  className: chunkOR5DRJCW_cjs.cn(
                    "transition-opacity duration-200",
                    isSameGroup ? "mt-0.5" : "mt-3",
                    index === 0 && "mt-0"
                  ),
                  children: /* @__PURE__ */ jsxRuntime.jsx(
                    MessageBubble,
                    {
                      message,
                      isOutgoing,
                      showAvatar: showAvatars && !isSameGroup && !isOutgoing,
                      showSenderName: showSenderNames && !isSameGroup && !isOutgoing,
                      showTimestamp: !isSameGroup,
                      onRetry: message.status === "failed" && onRetryMessage ? () => onRetryMessage(message.id) : void 0,
                      onAttachmentClick: (attachment) => onAttachmentClick?.(attachment, message),
                      formatTimestamp
                    }
                  )
                },
                message.id
              );
            })
          ] }, group.date)) }),
          typingState && typingState.participants.length > 0 && /* @__PURE__ */ jsxRuntime.jsx(TypingIndicator, { typingState }),
          /* @__PURE__ */ jsxRuntime.jsx("div", { ref: bottomRef, className: "h-0", "aria-hidden": "true" }),
          isUserScrolled && /* @__PURE__ */ jsxRuntime.jsx(
            "button",
            {
              type: "button",
              onClick: () => {
                bottomRef.current?.scrollIntoView({ behavior: "smooth" });
              },
              className: chunkOR5DRJCW_cjs.cn(
                "fixed right-4 bottom-24 z-10",
                "rounded-full p-3 shadow-lg",
                "bg-white dark:bg-neutral-800",
                "border border-neutral-200 dark:border-neutral-700",
                "hover:bg-neutral-50 dark:hover:bg-neutral-700",
                "focus:ring-primary-500 focus:ring-2 focus:outline-none",
                "transition-all"
              ),
              "aria-label": "Scroll to bottom",
              children: /* @__PURE__ */ jsxRuntime.jsx(
                "svg",
                {
                  className: "h-5 w-5 text-neutral-600 dark:text-neutral-300",
                  fill: "none",
                  viewBox: "0 0 24 24",
                  stroke: "currentColor",
                  children: /* @__PURE__ */ jsxRuntime.jsx(
                    "path",
                    {
                      strokeLinecap: "round",
                      strokeLinejoin: "round",
                      strokeWidth: 2,
                      d: "M19 14l-7 7m0 0l-7-7m7 7V3"
                    }
                  )
                }
              )
            }
          )
        ]
      }
    );
  }
);
MessageList.displayName = "MessageList";
var ACTION_ICONS = {
  patient: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM3 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 019.374 21c-2.331 0-4.512-.645-6.374-1.766z"
        }
      )
    }
  ),
  search: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
        }
      )
    }
  ),
  appointment: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"
        }
      )
    }
  ),
  document: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"
        }
      )
    }
  ),
  help: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"
        }
      )
    }
  ),
  default: /* @__PURE__ */ jsxRuntime.jsx(
    "svg",
    {
      className: "h-4 w-4",
      fill: "none",
      viewBox: "0 0 24 24",
      stroke: "currentColor",
      strokeWidth: "1.5",
      children: /* @__PURE__ */ jsxRuntime.jsx(
        "path",
        {
          strokeLinecap: "round",
          strokeLinejoin: "round",
          d: "M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
        }
      )
    }
  )
};
function SuggestedActions({
  actions,
  onSelect,
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsx("div", { className: chunkOR5DRJCW_cjs.cn("flex flex-wrap gap-2", className), children: actions.map((action) => /* @__PURE__ */ jsxRuntime.jsxs(
    "button",
    {
      onClick: () => onSelect(action),
      className: chunkOR5DRJCW_cjs.cn(
        "flex items-center gap-2 rounded-full border border-neutral-200 px-3 py-1.5",
        "hover:border-primary-300 hover:bg-primary-50 hover:text-primary-700 text-sm text-neutral-700",
        "dark:border-neutral-700 dark:text-neutral-300",
        "dark:hover:border-primary-700 dark:hover:bg-primary-900/20 dark:hover:text-primary-300",
        "transition-colors"
      ),
      children: [
        ACTION_ICONS[action.icon || "default"] || ACTION_ICONS.default,
        /* @__PURE__ */ jsxRuntime.jsx("span", { children: action.label })
      ]
    },
    action.id
  )) });
}
function AIEmptyState({
  title = "How can I help you today?",
  description = "Ask me anything about patients, appointments, documents, or how to use the system.",
  suggestions,
  onSuggestionSelect,
  className,
  ...props
}) {
  const aiIcon = /* @__PURE__ */ jsxRuntime.jsx("div", { className: "bg-primary-500 dark:bg-primary-600 flex h-16 w-16 items-center justify-center rounded-full text-white", children: /* @__PURE__ */ jsxRuntime.jsx(SparklesIcon, { size: "lg", className: "h-8 w-8" }) });
  const suggestionsAction = suggestions && suggestions.length > 0 && onSuggestionSelect ? /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "mt-6", children: [
    /* @__PURE__ */ jsxRuntime.jsx("p", { className: "mb-3 text-sm text-neutral-500 dark:text-neutral-400", children: "Try asking:" }),
    /* @__PURE__ */ jsxRuntime.jsx(SuggestedActions, { actions: suggestions, onSelect: onSuggestionSelect })
  ] }) : void 0;
  return /* @__PURE__ */ jsxRuntime.jsx(
    EmptyState,
    {
      title,
      description,
      icon: aiIcon,
      action: suggestionsAction,
      className,
      ...props
    }
  );
}
var chatVariants = classVarianceAuthority.cva("flex flex-col", {
  variants: {
    variant: {
      default: "bg-white dark:bg-neutral-900",
      embedded: "bg-transparent",
      floating: "bg-white dark:bg-neutral-900 rounded-2xl shadow-xl border border-neutral-200 dark:border-neutral-700"
    },
    size: {
      sm: "max-w-sm",
      md: "max-w-lg",
      lg: "max-w-2xl",
      xl: "max-w-4xl",
      full: "w-full"
    }
  },
  defaultVariants: {
    variant: "default",
    size: "full"
  }
});
function AIChat({
  session,
  messages: messagesProp,
  isGenerating: isGeneratingProp,
  userName = "You",
  title = "AI Assistant",
  suggestions,
  showHeader = true,
  showTimestamps = false,
  inputPlaceholder = "Ask anything...",
  variant,
  size,
  height,
  composerProps,
  className,
  onSendMessage,
  onToolCall: _onToolCall,
  onResourceClick,
  onSuggestedAction,
  onCancel,
  onClear,
  onClose
}) {
  const messagesEndRef = React20__namespace.useRef(null);
  const messages = React20__namespace.useMemo(
    () => session?.messages || messagesProp || [],
    [session?.messages, messagesProp]
  );
  const isGenerating = session?.isGenerating || isGeneratingProp || false;
  React20__namespace.useEffect(() => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  }, [messages]);
  const handleSend = async (message) => {
    if (message.content.trim() && onSendMessage) {
      onSendMessage(message.content.trim());
    }
  };
  const handleSuggestionSelect = (action) => {
    if (onSuggestedAction) {
      onSuggestedAction(action);
    } else if (onSendMessage) {
      onSendMessage(action.prompt);
    }
  };
  const handleLinkClick = (link) => {
    if (onResourceClick) {
      onResourceClick(link);
    }
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(chatVariants({ variant, size }), className),
      style: { height: height || void 0 },
      children: [
        showHeader && /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center justify-between border-b border-neutral-200 px-4 py-3 dark:border-neutral-700", children: [
          /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ jsxRuntime.jsx("div", { className: "bg-primary-500 dark:bg-primary-600 flex h-8 w-8 items-center justify-center rounded-full text-white", children: /* @__PURE__ */ jsxRuntime.jsx(SparklesIcon, { size: "sm" }) }),
            /* @__PURE__ */ jsxRuntime.jsxs("div", { children: [
              /* @__PURE__ */ jsxRuntime.jsx("h2", { className: "font-semibold text-neutral-900 dark:text-white", children: title }),
              isGenerating && /* @__PURE__ */ jsxRuntime.jsx("p", { className: "text-xs text-neutral-500", children: "Generating..." })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-1", children: [
            isGenerating && onCancel && /* @__PURE__ */ jsxRuntime.jsx(
              "button",
              {
                onClick: onCancel,
                className: chunkOR5DRJCW_cjs.cn(
                  "rounded-lg px-3 py-1.5 text-sm",
                  "bg-red-100 text-red-600 hover:bg-red-200",
                  "dark:bg-red-900/30 dark:text-red-400 dark:hover:bg-red-900/50",
                  "transition-colors"
                ),
                children: "Stop"
              }
            ),
            onClear && messages.length > 0 && /* @__PURE__ */ jsxRuntime.jsx(
              "button",
              {
                onClick: onClear,
                className: "rounded-lg p-2 text-neutral-500 hover:bg-neutral-100 hover:text-neutral-700 dark:hover:bg-neutral-800 dark:hover:text-neutral-300",
                title: "Clear chat",
                children: /* @__PURE__ */ jsxRuntime.jsx(RefreshIcon, {})
              }
            ),
            onClose && /* @__PURE__ */ jsxRuntime.jsx(
              "button",
              {
                onClick: onClose,
                className: "rounded-lg p-2 text-neutral-500 hover:bg-neutral-100 hover:text-neutral-700 dark:hover:bg-neutral-800 dark:hover:text-neutral-300",
                title: "Close chat",
                "aria-label": "Close chat",
                children: /* @__PURE__ */ jsxRuntime.jsx(CloseIcon, {})
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex-1 overflow-y-auto px-4 py-4", children: messages.length === 0 ? /* @__PURE__ */ jsxRuntime.jsx(
          AIEmptyState,
          {
            suggestions,
            onSuggestionSelect: handleSuggestionSelect
          }
        ) : /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "space-y-4", children: [
          messages.map((message) => /* @__PURE__ */ jsxRuntime.jsx(
            AIMessageDisplay,
            {
              message,
              userName,
              showTimestamp: showTimestamps,
              onLinkClick: handleLinkClick
            },
            message.id
          )),
          /* @__PURE__ */ jsxRuntime.jsx("div", { ref: messagesEndRef })
        ] }) }),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "shrink-0 border-t border-neutral-200 dark:border-neutral-700", children: [
          suggestions && suggestions.length > 0 && messages.length > 0 && !isGenerating && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "px-4 pt-3", children: /* @__PURE__ */ jsxRuntime.jsx(
            SuggestedActions,
            {
              actions: suggestions,
              onSelect: handleSuggestionSelect
            }
          ) }),
          /* @__PURE__ */ jsxRuntime.jsx(
            MessageComposer,
            {
              onSend: handleSend,
              placeholder: inputPlaceholder,
              disabled: isGenerating,
              isSending: isGenerating,
              showAttachmentPicker: false,
              showCameraButton: false,
              showCharacterCount: false,
              variant: "minimal",
              ...composerProps
            }
          )
        ] })
      ]
    }
  );
}
function AIChatTrigger({
  isOpen = false,
  onClick,
  pulse = false,
  badge,
  position = "bottom-right",
  className
}) {
  const positionClasses = {
    "bottom-right": "bottom-4 right-4",
    "bottom-left": "bottom-4 left-4",
    "top-right": "top-4 right-4",
    "top-left": "top-4 left-4"
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "button",
    {
      onClick,
      className: chunkOR5DRJCW_cjs.cn(
        "fixed z-50 flex h-14 w-14 items-center justify-center rounded-full shadow-lg",
        "bg-primary-500 text-white",
        "hover:bg-primary-600",
        "focus:ring-primary-500 focus:ring-2 focus:ring-offset-2 focus:outline-none",
        "dark:focus:ring-offset-neutral-900",
        "transition-all duration-200",
        isOpen && "scale-0 opacity-0",
        positionClasses[position],
        className
      ),
      "aria-label": "Open AI Assistant",
      children: [
        pulse && !isOpen && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "bg-primary-400 absolute inline-flex h-full w-full animate-ping rounded-full opacity-75" }),
        badge && badge > 0 && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold", children: badge > 9 ? "9+" : badge }),
        /* @__PURE__ */ jsxRuntime.jsx(SparklesIcon, { size: "lg" })
      ]
    }
  );
}
function AIChatModal({
  open,
  onOpenChange,
  position = "bottom-right",
  width = 400,
  height = 600,
  modalClassName,
  ...chatProps
}) {
  const modalRef = chunkBR2XGATJ_cjs.useFocusTrap(open);
  chunkFHY3K6PL_cjs.useEscapeKey(() => {
    if (open) onOpenChange(false);
  });
  if (!open) return null;
  const positionClasses = {
    "bottom-right": "bottom-20 right-4",
    "bottom-left": "bottom-20 left-4",
    center: "top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
    position === "center" && /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        className: "fixed inset-0 z-40 bg-black/50 backdrop-blur-sm",
        onClick: () => onOpenChange(false),
        onKeyDown: (e) => e.key === "Escape" && onOpenChange(false),
        role: "button",
        tabIndex: 0,
        "aria-label": "Close dialog"
      }
    ),
    /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        ref: modalRef,
        className: chunkOR5DRJCW_cjs.cn(
          "fixed z-50",
          "animate-in fade-in-0 zoom-in-95",
          positionClasses[position],
          modalClassName
        ),
        style: {
          width: typeof width === "number" ? `${width}px` : width,
          height: typeof height === "number" ? `${height}px` : height,
          maxHeight: "calc(100vh - 6rem)",
          maxWidth: "calc(100vw - 2rem)"
        },
        role: "dialog",
        "aria-modal": "true",
        "aria-label": "AI Assistant Chat",
        children: /* @__PURE__ */ jsxRuntime.jsx("div", { className: "relative h-full w-full overflow-hidden rounded-2xl border border-neutral-200 bg-white shadow-2xl dark:border-neutral-700 dark:bg-neutral-900", children: /* @__PURE__ */ jsxRuntime.jsx(
          AIChat,
          {
            ...chatProps,
            variant: "embedded",
            height: "100%",
            className: "h-full",
            onClose: () => onOpenChange(false)
          }
        ) })
      }
    )
  ] });
}
function FloatingAIChat({
  defaultOpen = false,
  open: controlledOpen,
  onOpenChange: controlledOnOpenChange,
  buttonPosition = "bottom-right",
  position = "bottom-right",
  pulse = false,
  ...chatProps
}) {
  const [internalOpen, setInternalOpen] = React20__namespace.useState(defaultOpen);
  const isControlled = controlledOpen !== void 0;
  const isOpen = isControlled ? controlledOpen : internalOpen;
  const handleOpenChange = (open) => {
    if (!isControlled) {
      setInternalOpen(open);
    }
    controlledOnOpenChange?.(open);
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
    /* @__PURE__ */ jsxRuntime.jsx(
      AIChatTrigger,
      {
        isOpen,
        onClick: () => handleOpenChange(true),
        position: buttonPosition,
        pulse: pulse && !isOpen
      }
    ),
    /* @__PURE__ */ jsxRuntime.jsx(
      AIChatModal,
      {
        open: isOpen,
        onOpenChange: handleOpenChange,
        position,
        ...chatProps
      }
    )
  ] });
}
function AppHeader({
  children,
  className,
  sticky = true,
  bordered = true,
  height = "h-16",
  "data-testid": testId = "app-header"
}) {
  return /* @__PURE__ */ jsxRuntime.jsx(
    "header",
    {
      "data-testid": testId,
      className: chunkOR5DRJCW_cjs.cn(
        "flex items-center justify-between px-4 lg:px-6",
        "bg-white dark:bg-gray-900",
        height,
        sticky && "sticky top-0 z-30",
        bordered && "border-b border-gray-200 dark:border-gray-700",
        className
      ),
      children
    }
  );
}
function AppHeaderSection({
  children,
  align = "left",
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsx(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "flex items-center gap-3",
        align === "left" && "mr-auto",
        align === "center" && "mx-auto",
        align === "right" && "ml-auto",
        className
      ),
      children
    }
  );
}
function AppHeaderTitle({
  children,
  subtitle,
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: chunkOR5DRJCW_cjs.cn("min-w-0", className), children: [
    /* @__PURE__ */ jsxRuntime.jsx("h1", { className: "truncate text-lg font-semibold text-gray-900 dark:text-white", children }),
    subtitle && /* @__PURE__ */ jsxRuntime.jsx("p", { className: "truncate text-sm text-gray-500 dark:text-gray-400", children: subtitle })
  ] });
}
function AppHeaderActions({
  children,
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsx("div", { className: chunkOR5DRJCW_cjs.cn("flex items-center gap-2", className), children });
}
function AppHeaderDivider({
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsx(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn("mx-2 h-6 w-px bg-gray-200 dark:bg-gray-700", className),
      "aria-hidden": "true"
    }
  );
}
function AppHeaderIconButton({
  icon,
  label,
  onClick,
  badge,
  isActive = false,
  className,
  "data-testid": testId
}) {
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "button",
    {
      onClick,
      "data-testid": testId,
      className: chunkOR5DRJCW_cjs.cn(
        "relative rounded-lg p-2 transition-colors",
        "text-gray-500 dark:text-gray-400",
        "hover:bg-gray-100 dark:hover:bg-gray-800",
        "focus:ring-primary-500 focus:ring-2 focus:outline-none",
        isActive && "text-primary-600 dark:text-primary-400 bg-gray-100 dark:bg-gray-800",
        className
      ),
      "aria-label": label,
      title: label,
      children: [
        /* @__PURE__ */ jsxRuntime.jsx("span", { className: "h-5 w-5", children: icon }),
        typeof badge === "number" && badge > 0 && /* @__PURE__ */ jsxRuntime.jsx(
          "span",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "absolute -top-1 -right-1 flex items-center justify-center",
              "h-[18px] min-w-[18px] px-1 text-[10px] font-bold",
              "rounded-full bg-red-500 text-white"
            ),
            children: badge > 99 ? "99+" : badge
          }
        )
      ]
    }
  );
}
var SearchIcon = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-5 w-5",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx(
      "path",
      {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
      }
    )
  }
);
var isMac = typeof window !== "undefined" && typeof window.navigator !== "undefined" && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);
function AppHeaderSearch({
  onClick,
  placeholder = "Search...",
  showOnMobile = false,
  className,
  "data-testid": testId = "app-header-search"
}) {
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "button",
    {
      onClick,
      "data-testid": testId,
      className: chunkOR5DRJCW_cjs.cn(
        "flex items-center gap-3 rounded-lg border border-gray-300 dark:border-gray-600",
        "bg-white px-4 py-2 text-sm text-gray-500 dark:bg-gray-700 dark:text-gray-400",
        "hover:border-gray-400 dark:hover:border-gray-500",
        "transition-colors hover:bg-gray-50 dark:hover:bg-gray-600",
        !showOnMobile && "hidden sm:flex",
        "min-w-[200px] lg:min-w-[300px]",
        className
      ),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(SearchIcon, {}),
        /* @__PURE__ */ jsxRuntime.jsx("span", { className: "flex-1 text-left whitespace-nowrap", children: placeholder }),
        /* @__PURE__ */ jsxRuntime.jsxs(
          "kbd",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "hidden items-center gap-0.5 px-2 py-0.5 sm:inline-flex",
              "rounded border border-gray-200 bg-gray-100 dark:border-gray-500 dark:bg-gray-600",
              "flex-shrink-0 text-xs text-gray-600 dark:text-gray-300"
            ),
            children: [
              isMac ? "\u2318" : "Ctrl",
              "+K"
            ]
          }
        )
      ]
    }
  );
}
function AppHeaderUserMenu({
  name,
  email,
  avatarUrl,
  initials,
  isOpen = false,
  onClick,
  className,
  "data-testid": testId = "app-header-user-menu"
}) {
  const displayInitials = initials ?? name.split(" ").map((n) => n[0]).join("").toUpperCase().slice(0, 2);
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "button",
    {
      onClick,
      "data-testid": testId,
      className: chunkOR5DRJCW_cjs.cn(
        "flex items-center gap-3 rounded-lg px-2 py-1.5 transition-colors",
        "hover:bg-gray-100 dark:hover:bg-gray-800",
        "focus:ring-primary-500 focus:ring-2 focus:outline-none",
        isOpen && "bg-gray-100 dark:bg-gray-800",
        className
      ),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          "div",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "flex h-8 w-8 items-center justify-center overflow-hidden rounded-full",
              "bg-primary-100 dark:bg-primary-900 text-primary-900 dark:text-primary-100 text-sm font-medium"
            ),
            children: avatarUrl ? /* @__PURE__ */ jsxRuntime.jsx(
              "img",
              {
                src: avatarUrl,
                alt: name,
                className: "h-full w-full object-cover"
              }
            ) : displayInitials
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "hidden min-w-0 text-left lg:block", children: [
          /* @__PURE__ */ jsxRuntime.jsx("div", { className: "max-w-[150px] truncate text-sm font-medium text-gray-900 dark:text-white", children: name }),
          email && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "max-w-[150px] truncate text-xs text-gray-500 dark:text-gray-400", children: email })
        ] }),
        /* @__PURE__ */ jsxRuntime.jsx(
          "svg",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "hidden h-4 w-4 text-gray-400 transition-transform lg:block",
              isOpen && "rotate-180"
            ),
            fill: "none",
            viewBox: "0 0 24 24",
            stroke: "currentColor",
            strokeWidth: 2,
            children: /* @__PURE__ */ jsxRuntime.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M19 9l-7 7-7-7" })
          }
        )
      ]
    }
  );
}
var CommandPaletteContext = React20.createContext(
  null
);
function CommandPaletteProvider({
  children,
  enableShortcut = true,
  customEventName
}) {
  const [isOpen, setIsOpen] = React20.useState(false);
  const [query, setQuery] = React20.useState("");
  const [selectedIndex, setSelectedIndex] = React20.useState(-1);
  const [activeCategory, setActiveCategory] = React20.useState(null);
  const [items, setItems] = React20.useState([]);
  const [categories, setCategories] = React20.useState([]);
  const open = React20.useCallback(() => {
    setIsOpen(true);
    setQuery("");
    setSelectedIndex(-1);
    setActiveCategory(null);
  }, []);
  const close = React20.useCallback(() => {
    setIsOpen(false);
    setQuery("");
    setSelectedIndex(-1);
  }, []);
  const toggle = React20.useCallback(() => {
    if (isOpen) {
      close();
    } else {
      open();
    }
  }, [isOpen, open, close]);
  chunkR4DM4635_cjs.useCommandK(toggle, enableShortcut);
  React20__namespace.default.useEffect(() => {
    if (!customEventName) return;
    const handler = () => open();
    document.addEventListener(customEventName, handler);
    return () => document.removeEventListener(customEventName, handler);
  }, [customEventName, open]);
  const contextValue = React20.useMemo(
    () => ({
      isOpen,
      open,
      close,
      toggle,
      query,
      setQuery,
      selectedIndex,
      setSelectedIndex,
      activeCategory,
      setActiveCategory,
      items,
      categories,
      setItems,
      setCategories
    }),
    [
      isOpen,
      open,
      close,
      toggle,
      query,
      selectedIndex,
      activeCategory,
      items,
      categories
    ]
  );
  return /* @__PURE__ */ jsxRuntime.jsx(CommandPaletteContext.Provider, { value: contextValue, children });
}
function useCommandPalette() {
  const context = React20.useContext(CommandPaletteContext);
  if (!context) {
    throw new Error(
      "useCommandPalette must be used within a CommandPaletteProvider"
    );
  }
  return context;
}
var SearchIcon2 = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-5 w-5",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx(
      "path",
      {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
      }
    )
  }
);
var XIcon = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-4 w-4",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx(
      "path",
      {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M6 18L18 6M6 6l12 12"
      }
    )
  }
);
var SpinnerIcon2 = () => /* @__PURE__ */ jsxRuntime.jsxs("svg", { className: "h-4 w-4 animate-spin", fill: "none", viewBox: "0 0 24 24", children: [
  /* @__PURE__ */ jsxRuntime.jsx(
    "circle",
    {
      className: "opacity-25",
      cx: "12",
      cy: "12",
      r: "10",
      stroke: "currentColor",
      strokeWidth: "4"
    }
  ),
  /* @__PURE__ */ jsxRuntime.jsx(
    "path",
    {
      className: "opacity-75",
      fill: "currentColor",
      d: "M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
    }
  )
] });
var isMac2 = typeof window !== "undefined" && typeof window.navigator !== "undefined" && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);
function CommandPalette({
  placeholder = "Search...",
  isLoading = false,
  onSelect,
  emptyState,
  renderItem,
  footer,
  className,
  "data-testid": testId = "command-palette"
}) {
  const {
    isOpen,
    close,
    query,
    setQuery,
    selectedIndex,
    setSelectedIndex,
    activeCategory,
    setActiveCategory,
    items,
    categories
  } = useCommandPalette();
  const inputRef = React20.useRef(null);
  const containerRef = React20.useRef(null);
  const listRef = React20.useRef(null);
  const filteredItems = React20.useMemo(() => {
    let result = items;
    if (activeCategory) {
      result = result.filter((item) => item.category === activeCategory);
    }
    if (query.trim()) {
      const lowerQuery = query.toLowerCase();
      result = result.filter(
        (item) => item.label.toLowerCase().includes(lowerQuery) || item.subtitle?.toLowerCase().includes(lowerQuery) || item.description?.toLowerCase().includes(lowerQuery)
      );
    }
    return result;
  }, [items, query, activeCategory]);
  const groupedItems = React20.useMemo(() => {
    const groups = /* @__PURE__ */ new Map();
    filteredItems.forEach((item) => {
      const category = item.category ?? "Other";
      const group = groups.get(category) ?? [];
      group.push(item);
      groups.set(category, group);
    });
    return groups;
  }, [filteredItems]);
  chunkFHY3K6PL_cjs.useEscapeKey(close, isOpen);
  chunkSWMRCGL4_cjs.useClickOutside(containerRef, close);
  React20.useEffect(() => {
    if (isOpen) {
      setTimeout(() => inputRef.current?.focus(), 50);
    }
  }, [isOpen]);
  React20.useEffect(() => {
    setSelectedIndex(filteredItems.length > 0 ? 0 : -1);
  }, [filteredItems.length, setSelectedIndex]);
  React20.useEffect(() => {
    if (selectedIndex >= 0 && listRef.current) {
      const selectedElement = listRef.current.querySelector(
        `[data-index="${selectedIndex}"]`
      );
      selectedElement?.scrollIntoView({ block: "nearest" });
    }
  }, [selectedIndex]);
  const handleKeyDown = React20.useCallback(
    (e) => {
      switch (e.key) {
        case "ArrowDown":
          e.preventDefault();
          setSelectedIndex(
            Math.min(selectedIndex + 1, filteredItems.length - 1)
          );
          break;
        case "ArrowUp":
          e.preventDefault();
          setSelectedIndex(Math.max(selectedIndex - 1, 0));
          break;
        case "Enter":
          e.preventDefault();
          if (selectedIndex >= 0 && filteredItems[selectedIndex]) {
            const item = filteredItems[selectedIndex];
            if (!item.disabled) {
              onSelect?.(item);
              close();
            }
          }
          break;
        case "Tab":
          e.preventDefault();
          if (categories.length > 0) {
            const currentIdx = activeCategory ? categories.findIndex((c) => c.id === activeCategory) : -1;
            const nextIdx = e.shiftKey ? currentIdx <= 0 ? categories.length - 1 : currentIdx - 1 : currentIdx >= categories.length - 1 ? -1 : currentIdx + 1;
            setActiveCategory(nextIdx === -1 ? null : categories[nextIdx].id);
          }
          break;
      }
    },
    [
      filteredItems,
      selectedIndex,
      setSelectedIndex,
      onSelect,
      close,
      categories,
      activeCategory,
      setActiveCategory
    ]
  );
  const handleItemClick = React20.useCallback(
    (item) => {
      if (!item.disabled) {
        onSelect?.(item);
        close();
      }
    },
    [onSelect, close]
  );
  const getCategoryInfo = React20.useCallback(
    (categoryId) => {
      return categories.find((c) => c.id === categoryId);
    },
    [categories]
  );
  if (!isOpen) return null;
  let globalIndex = -1;
  return /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
    /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        className: "fixed inset-0 z-50 bg-black/50 backdrop-blur-sm dark:bg-black/70",
        "aria-hidden": "true"
      }
    ),
    /* @__PURE__ */ jsxRuntime.jsx("div", { className: "fixed inset-x-0 top-20 z-50 mx-auto max-w-2xl px-4", children: /* @__PURE__ */ jsxRuntime.jsxs(
      "div",
      {
        ref: containerRef,
        "data-testid": testId,
        className: chunkOR5DRJCW_cjs.cn(
          "rounded-xl border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800",
          "overflow-hidden shadow-2xl",
          className
        ),
        children: [
          /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "relative border-b border-gray-200 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute top-1/2 left-4 -translate-y-1/2 text-gray-400", children: /* @__PURE__ */ jsxRuntime.jsx(SearchIcon2, {}) }),
            /* @__PURE__ */ jsxRuntime.jsx(
              "input",
              {
                ref: inputRef,
                type: "text",
                value: query,
                onChange: (e) => setQuery(e.target.value),
                onKeyDown: handleKeyDown,
                placeholder,
                autoFocus: true,
                "data-testid": `${testId}-input`,
                className: chunkOR5DRJCW_cjs.cn(
                  "w-full bg-transparent py-4 pr-12 pl-12 text-base",
                  "focus:outline-none dark:text-white dark:placeholder-gray-400"
                )
              }
            ),
            query && /* @__PURE__ */ jsxRuntime.jsx(
              "button",
              {
                onClick: () => setQuery(""),
                "data-testid": `${testId}-clear`,
                className: "absolute top-1/2 right-12 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",
                children: /* @__PURE__ */ jsxRuntime.jsx(XIcon, {})
              }
            ),
            isLoading && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "text-primary-500 absolute top-1/2 right-4 -translate-y-1/2", children: /* @__PURE__ */ jsxRuntime.jsx(SpinnerIcon2, {}) })
          ] }),
          categories.length > 0 && /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-1 overflow-x-auto border-b border-gray-100 p-2 dark:border-gray-700", children: [
            /* @__PURE__ */ jsxRuntime.jsx(
              "button",
              {
                onClick: () => setActiveCategory(null),
                "data-testid": `${testId}-filter-all`,
                className: chunkOR5DRJCW_cjs.cn(
                  "rounded px-2 py-1 text-xs font-medium transition-colors",
                  activeCategory === null ? "bg-primary-500 text-white" : "text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"
                ),
                children: "All"
              }
            ),
            categories.map((cat) => /* @__PURE__ */ jsxRuntime.jsxs(
              "button",
              {
                onClick: () => setActiveCategory(cat.id),
                "data-testid": `${testId}-filter-${cat.id}`,
                className: chunkOR5DRJCW_cjs.cn(
                  "flex items-center gap-1 rounded px-2 py-1 text-xs font-medium transition-colors",
                  activeCategory === cat.id ? "bg-primary-500 text-white" : "text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"
                ),
                children: [
                  cat.icon && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "h-3 w-3", children: cat.icon }),
                  cat.label
                ]
              },
              cat.id
            ))
          ] }),
          /* @__PURE__ */ jsxRuntime.jsx("div", { ref: listRef, className: "max-h-[60vh] overflow-y-auto", children: filteredItems.length === 0 ? /* @__PURE__ */ jsxRuntime.jsx("div", { className: "p-8 text-center text-gray-500 dark:text-gray-400", children: emptyState ?? /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
            /* @__PURE__ */ jsxRuntime.jsx("div", { className: "mx-auto mb-2 h-8 w-8 opacity-50", children: /* @__PURE__ */ jsxRuntime.jsx(SearchIcon2, {}) }),
            /* @__PURE__ */ jsxRuntime.jsx("p", { className: "text-sm", children: query.trim() ? `No results for "${query}"` : "Start typing to search..." })
          ] }) }) : Array.from(groupedItems.entries()).map(
            ([categoryId, categoryItems]) => {
              const categoryInfo = getCategoryInfo(categoryId);
              return /* @__PURE__ */ jsxRuntime.jsxs("div", { children: [
                /* @__PURE__ */ jsxRuntime.jsxs(
                  "div",
                  {
                    className: chunkOR5DRJCW_cjs.cn(
                      "sticky top-0 px-3 py-2 text-xs font-semibold",
                      "text-gray-500 dark:text-gray-400",
                      "bg-gray-50 dark:bg-gray-900/50"
                    ),
                    children: [
                      categoryInfo?.icon && /* @__PURE__ */ jsxRuntime.jsx(
                        "span",
                        {
                          className: chunkOR5DRJCW_cjs.cn(
                            "mr-2 inline-block h-4 w-4 align-middle",
                            categoryInfo.colorClass
                          ),
                          children: categoryInfo.icon
                        }
                      ),
                      categoryInfo?.label ?? categoryId,
                      " (",
                      categoryItems.length,
                      ")"
                    ]
                  }
                ),
                categoryItems.map((item) => {
                  globalIndex++;
                  const currentIndex = globalIndex;
                  const isSelected = currentIndex === selectedIndex;
                  if (renderItem) {
                    return /* @__PURE__ */ jsxRuntime.jsx(
                      "div",
                      {
                        role: "option",
                        "aria-selected": isSelected,
                        "data-index": currentIndex,
                        onClick: () => handleItemClick(item),
                        onKeyDown: (e) => {
                          if (e.key === "Enter" || e.key === " ") {
                            e.preventDefault();
                            handleItemClick(item);
                          }
                        },
                        onMouseEnter: () => setSelectedIndex(currentIndex),
                        tabIndex: 0,
                        children: renderItem(item, {
                          isSelected,
                          index: currentIndex
                        })
                      },
                      item.id
                    );
                  }
                  return /* @__PURE__ */ jsxRuntime.jsxs(
                    "button",
                    {
                      "data-index": currentIndex,
                      onClick: () => handleItemClick(item),
                      onMouseEnter: () => setSelectedIndex(currentIndex),
                      disabled: item.disabled,
                      className: chunkOR5DRJCW_cjs.cn(
                        "flex w-full items-start gap-3 px-4 py-3 text-left transition-colors",
                        isSelected ? "bg-primary-50 dark:bg-primary-500/20" : "hover:bg-gray-50 dark:hover:bg-gray-700/50",
                        item.disabled && "cursor-not-allowed opacity-50"
                      ),
                      children: [
                        item.icon && /* @__PURE__ */ jsxRuntime.jsx(
                          "div",
                          {
                            className: chunkOR5DRJCW_cjs.cn(
                              "mt-0.5 h-4 w-4 flex-shrink-0",
                              isSelected ? "text-primary-600 dark:text-primary-400" : "text-gray-400"
                            ),
                            children: item.icon
                          }
                        ),
                        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "min-w-0 flex-1", children: [
                          /* @__PURE__ */ jsxRuntime.jsx("div", { className: "truncate text-sm font-medium text-gray-900 dark:text-white", children: item.label }),
                          item.subtitle && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "truncate text-xs text-gray-500 dark:text-gray-400", children: item.subtitle }),
                          item.description && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "mt-0.5 truncate text-xs text-gray-400 dark:text-gray-500", children: item.description })
                        ] }),
                        item.shortcut && /* @__PURE__ */ jsxRuntime.jsx(
                          "kbd",
                          {
                            className: chunkOR5DRJCW_cjs.cn(
                              "hidden items-center px-1.5 py-0.5 text-[10px] sm:inline-flex",
                              "rounded border bg-gray-100 dark:bg-gray-700",
                              "border-gray-200 dark:border-gray-600",
                              "text-gray-600 dark:text-gray-400"
                            ),
                            children: item.shortcut
                          }
                        )
                      ]
                    },
                    item.id
                  );
                })
              ] }, categoryId);
            }
          ) }),
          footer ?? /* @__PURE__ */ jsxRuntime.jsxs(
            "div",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "border-t border-gray-100 p-2 dark:border-gray-700",
                "bg-gray-50 text-xs text-gray-500 dark:bg-gray-900/50 dark:text-gray-400",
                "flex items-center justify-between"
              ),
              children: [
                /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center gap-2", children: [
                  /* @__PURE__ */ jsxRuntime.jsx("kbd", { className: "rounded border border-gray-200 bg-white px-1 py-0.5 dark:border-gray-600 dark:bg-gray-700", children: "\u2191\u2193" }),
                  /* @__PURE__ */ jsxRuntime.jsx("span", { children: "navigate" }),
                  /* @__PURE__ */ jsxRuntime.jsx("kbd", { className: "ml-2 rounded border border-gray-200 bg-white px-1 py-0.5 dark:border-gray-600 dark:bg-gray-700", children: "\u21B5" }),
                  /* @__PURE__ */ jsxRuntime.jsx("span", { children: "select" }),
                  /* @__PURE__ */ jsxRuntime.jsx("kbd", { className: "ml-2 rounded border border-gray-200 bg-white px-1 py-0.5 dark:border-gray-600 dark:bg-gray-700", children: "esc" }),
                  /* @__PURE__ */ jsxRuntime.jsx("span", { children: "close" })
                ] }),
                /* @__PURE__ */ jsxRuntime.jsxs("span", { children: [
                  filteredItems.length,
                  " results"
                ] })
              ]
            }
          )
        ]
      }
    ) })
  ] });
}
function CommandPaletteTrigger({
  children,
  placeholder = "Search...",
  className,
  "data-testid": testId = "command-palette-trigger"
}) {
  const { open } = useCommandPalette();
  return /* @__PURE__ */ jsxRuntime.jsx(
    "button",
    {
      onClick: open,
      "data-testid": testId,
      className: chunkOR5DRJCW_cjs.cn(
        "flex items-center gap-3 rounded-lg border border-gray-300 dark:border-gray-600",
        "bg-white px-4 py-2.5 text-sm text-gray-500 dark:bg-gray-700 dark:text-gray-400",
        "hover:border-gray-400 dark:hover:border-gray-500",
        "transition-colors hover:bg-gray-50 dark:hover:bg-gray-600",
        "min-w-[200px] sm:min-w-[300px]",
        className
      ),
      children: children ?? /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
        /* @__PURE__ */ jsxRuntime.jsx(SearchIcon2, {}),
        /* @__PURE__ */ jsxRuntime.jsx("span", { className: "flex-1 text-left whitespace-nowrap", children: placeholder }),
        /* @__PURE__ */ jsxRuntime.jsxs(
          "kbd",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "inline-flex items-center gap-0.5 px-2 py-0.5",
              "rounded border border-gray-200 bg-gray-100 dark:border-gray-500 dark:bg-gray-600",
              "flex-shrink-0 text-xs text-gray-600 dark:text-gray-300"
            ),
            children: [
              isMac2 ? "\u2318" : "Ctrl",
              "+K"
            ]
          }
        )
      ] })
    }
  );
}
function DropZone({
  onFilesSelected,
  acceptedFileTypes,
  multiple,
  disabled = false,
  className,
  children
}) {
  const [isDragging, setIsDragging] = React20__namespace.useState(false);
  const inputRef = React20__namespace.useRef(null);
  const dropZoneRef = React20__namespace.useRef(null);
  const dragCounter = React20__namespace.useRef(0);
  const handleDragEnter = React20__namespace.useCallback(
    (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (disabled) return;
      dragCounter.current++;
      if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {
        setIsDragging(true);
      }
    },
    [disabled]
  );
  const handleDragLeave = React20__namespace.useCallback(
    (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (disabled) return;
      dragCounter.current--;
      if (dragCounter.current === 0) {
        setIsDragging(false);
      }
    },
    [disabled]
  );
  const handleDragOver = React20__namespace.useCallback((e) => {
    e.preventDefault();
    e.stopPropagation();
  }, []);
  const handleDrop = React20__namespace.useCallback(
    (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (disabled) return;
      setIsDragging(false);
      dragCounter.current = 0;
      if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {
        onFilesSelected(e.dataTransfer.files);
      }
    },
    [disabled, onFilesSelected]
  );
  const handleClick = React20__namespace.useCallback(() => {
    if (!disabled) {
      inputRef.current?.click();
    }
  }, [disabled]);
  const handleKeyDown = React20__namespace.useCallback(
    (e) => {
      if ((e.key === "Enter" || e.key === " ") && !disabled) {
        e.preventDefault();
        inputRef.current?.click();
      }
    },
    [disabled]
  );
  const handleInputChange = React20__namespace.useCallback(
    (e) => {
      if (e.target.files && e.target.files.length > 0) {
        onFilesSelected(e.target.files);
        e.target.value = "";
      }
    },
    [onFilesSelected]
  );
  const acceptString = acceptedFileTypes.join(",");
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      ref: dropZoneRef,
      role: "button",
      tabIndex: disabled ? -1 : 0,
      "aria-label": "Drop files here or click to browse",
      "aria-disabled": disabled,
      onClick: handleClick,
      onKeyDown: handleKeyDown,
      onDragEnter: handleDragEnter,
      onDragLeave: handleDragLeave,
      onDragOver: handleDragOver,
      onDrop: handleDrop,
      className: chunkOR5DRJCW_cjs.cn(
        // Base styles
        "relative flex flex-col items-center justify-center",
        "min-h-[200px] w-full p-6",
        "rounded-xl border-2 border-dashed",
        "transition-all duration-200",
        "cursor-pointer",
        // Default state
        "border-neutral-300 bg-neutral-50",
        "dark:border-neutral-600 dark:bg-neutral-800/50",
        // Hover state
        "hover:border-primary-400 hover:bg-primary-50/50",
        "dark:hover:border-primary-500 dark:hover:bg-primary-900/20",
        // Focus state
        "focus-visible:ring-primary-500 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none",
        // Dragging state
        isDragging && [
          "border-primary-500 bg-primary-50",
          "dark:border-primary-400 dark:bg-primary-900/30",
          "scale-[1.01]"
        ],
        // Disabled state
        disabled && [
          "cursor-not-allowed opacity-50",
          "hover:border-neutral-300 hover:bg-neutral-50",
          "dark:hover:border-neutral-600 dark:hover:bg-neutral-800/50"
        ],
        className
      ),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          "input",
          {
            ref: inputRef,
            type: "file",
            accept: acceptString,
            multiple,
            onChange: handleInputChange,
            disabled,
            className: "sr-only",
            "aria-hidden": "true",
            tabIndex: -1
          }
        ),
        children,
        isDragging && /* @__PURE__ */ jsxRuntime.jsx(
          "div",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "absolute inset-0 flex items-center justify-center",
              "bg-primary-500/10 rounded-xl",
              "pointer-events-none"
            ),
            children: /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-primary-600 dark:text-primary-400 text-lg font-medium", children: "Drop files here" })
          }
        )
      ]
    }
  );
}
DropZone.displayName = "DropZone";
function FilePreviewItem({ file, onRemove, disabled }) {
  const isPdf = file.file.type === "application/pdf";
  const isImage = file.file.type.startsWith("image/");
  const handleRemove = React20__namespace.useCallback(() => {
    onRemove(file.id);
  }, [file.id, onRemove]);
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      role: "group",
      "aria-label": `File: ${file.file.name}`,
      className: chunkOR5DRJCW_cjs.cn(
        "group relative overflow-hidden rounded-lg",
        "border-border bg-card border",
        "focus-within:ring-primary-500 focus-within:ring-2 focus-within:ring-offset-2"
      ),
      children: [
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "relative aspect-[4/3] w-full overflow-hidden bg-neutral-100 dark:bg-neutral-800", children: [
          isImage ? /* @__PURE__ */ jsxRuntime.jsx(
            "img",
            {
              src: file.previewUrl,
              alt: `Preview of ${file.file.name}`,
              className: "h-full w-full object-cover"
            }
          ) : isPdf ? /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex h-full w-full flex-col items-center justify-center gap-2", children: [
            /* @__PURE__ */ jsxRuntime.jsx(lucideReact.FileText, { className: "text-muted-foreground h-12 w-12" }),
            /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground text-xs", children: "PDF Document" })
          ] }) : /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex h-full w-full flex-col items-center justify-center gap-2", children: [
            /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Image, { className: "text-muted-foreground h-12 w-12" }),
            /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-muted-foreground text-xs", children: "File" })
          ] }),
          /* @__PURE__ */ jsxRuntime.jsx(
            "div",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "absolute inset-0 flex items-center justify-center",
                "bg-black/0 transition-all duration-200",
                "group-hover:bg-black/30",
                disabled && "pointer-events-none"
              ),
              children: /* @__PURE__ */ jsxRuntime.jsx(
                chunkMKJDBXX4_cjs.Button,
                {
                  variant: "danger",
                  size: "icon",
                  onClick: handleRemove,
                  disabled,
                  className: chunkOR5DRJCW_cjs.cn(
                    "h-8 w-8 rounded-full",
                    "opacity-0 transition-all duration-200",
                    "group-hover:opacity-100",
                    "focus-visible:opacity-100"
                  ),
                  "aria-label": `Remove ${file.file.name}`,
                  children: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.X, { className: "h-4 w-4" })
                }
              )
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsx(
            "span",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "absolute bottom-2 left-2 px-2 py-0.5",
                "rounded-full text-xs font-medium",
                "bg-black/50 text-white",
                "capitalize"
              ),
              children: file.source
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "p-2", children: [
          /* @__PURE__ */ jsxRuntime.jsx(
            "p",
            {
              className: "text-foreground truncate text-sm font-medium",
              title: file.file.name,
              children: file.file.name
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsx("p", { className: "text-muted-foreground text-xs", children: formatFileSize3(file.file.size) })
        ] })
      ]
    }
  );
}
function formatFileSize3(bytes) {
  if (bytes === 0) return "0 Bytes";
  const k = 1024;
  const sizes = ["Bytes", "KB", "MB", "GB"];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i];
}
function FilePreview({ files, onRemove, disabled }) {
  if (files.length === 0) {
    return null;
  }
  return /* @__PURE__ */ jsxRuntime.jsx(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "grid gap-4",
        files.length === 1 && "mx-auto max-w-xs grid-cols-1",
        files.length === 2 && "grid-cols-2",
        files.length >= 3 && "grid-cols-2 sm:grid-cols-3 lg:grid-cols-4"
      ),
      role: "list",
      "aria-label": "Selected files",
      children: files.map((file) => /* @__PURE__ */ jsxRuntime.jsx(
        FilePreviewItem,
        {
          file,
          onRemove,
          disabled
        },
        file.id
      ))
    }
  );
}
FilePreview.displayName = "FilePreview";
function hasCameraSupport() {
  return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);
}
async function checkCameraPermission() {
  if (!hasCameraSupport()) {
    return "unavailable";
  }
  try {
    if (navigator.permissions) {
      const result = await navigator.permissions.query({
        name: "camera"
      });
      return result.state;
    }
    return "prompt";
  } catch {
    return "prompt";
  }
}
function useCamera({
  facingMode: initialFacingMode = "environment",
  width = 1920,
  height = 1080
} = {}) {
  const [permission, setPermission] = React20__namespace.useState("prompt");
  const [stream, setStream] = React20__namespace.useState(null);
  const [isReady, setIsReady] = React20__namespace.useState(false);
  const [error, setError] = React20__namespace.useState(null);
  const [currentFacingMode, setCurrentFacingMode] = React20__namespace.useState(initialFacingMode);
  const videoRef = React20__namespace.useRef(null);
  const canvasRef = React20__namespace.useRef(null);
  React20__namespace.useEffect(() => {
    checkCameraPermission().then(setPermission);
  }, []);
  React20__namespace.useEffect(() => {
    return () => {
      if (stream) {
        stream.getTracks().forEach((track) => track.stop());
      }
    };
  }, [stream]);
  const startCamera = React20__namespace.useCallback(async () => {
    if (!hasCameraSupport()) {
      setPermission("unavailable");
      setError(new Error("Camera is not supported on this device"));
      return;
    }
    try {
      setError(null);
      const constraints = {
        video: {
          facingMode: currentFacingMode,
          width: { ideal: width },
          height: { ideal: height }
        },
        audio: false
      };
      const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);
      setStream(mediaStream);
      setPermission("granted");
      if (videoRef.current) {
        videoRef.current.srcObject = mediaStream;
        await videoRef.current.play();
        setIsReady(true);
      }
    } catch (err) {
      const error2 = err;
      setError(error2);
      if (error2.name === "NotAllowedError" || error2.name === "PermissionDeniedError") {
        setPermission("denied");
      } else if (error2.name === "NotFoundError" || error2.name === "DevicesNotFoundError") {
        setPermission("unavailable");
      }
    }
  }, [currentFacingMode, width, height]);
  const stopCamera = React20__namespace.useCallback(() => {
    if (stream) {
      stream.getTracks().forEach((track) => track.stop());
      setStream(null);
    }
    setIsReady(false);
    if (videoRef.current) {
      videoRef.current.srcObject = null;
    }
  }, [stream]);
  const shouldRestartRef = React20__namespace.useRef(false);
  const switchCamera = React20__namespace.useCallback(() => {
    const newFacingMode = currentFacingMode === "user" ? "environment" : "user";
    if (stream) {
      stream.getTracks().forEach((track) => track.stop());
      setStream(null);
      setIsReady(false);
      if (videoRef.current) {
        videoRef.current.srcObject = null;
      }
      shouldRestartRef.current = true;
    }
    setCurrentFacingMode(newFacingMode);
  }, [currentFacingMode, stream]);
  React20__namespace.useEffect(() => {
    if (shouldRestartRef.current && !stream) {
      shouldRestartRef.current = false;
      startCamera();
    }
  }, [currentFacingMode, stream, startCamera]);
  const capturePhoto = React20__namespace.useCallback(() => {
    if (!videoRef.current || !isReady) {
      return null;
    }
    const video = videoRef.current;
    if (!canvasRef.current) {
      canvasRef.current = document.createElement("canvas");
    }
    const canvas = canvasRef.current;
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const context = canvas.getContext("2d");
    if (!context) {
      return null;
    }
    context.drawImage(video, 0, 0, canvas.width, canvas.height);
    const dataUrl = canvas.toDataURL("image/jpeg", 0.92);
    const byteString = atob(dataUrl.split(",")[1]);
    const mimeType = dataUrl.split(",")[0].split(":")[1].split(";")[0];
    const arrayBuffer = new ArrayBuffer(byteString.length);
    const uint8Array = new Uint8Array(arrayBuffer);
    for (let i = 0; i < byteString.length; i++) {
      uint8Array[i] = byteString.charCodeAt(i);
    }
    const blob = new Blob([arrayBuffer], { type: mimeType });
    const timestamp = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    const filename = `capture-${timestamp}.jpg`;
    return new File([blob], filename, { type: "image/jpeg" });
  }, [isReady]);
  return {
    permission,
    stream,
    videoRef,
    isReady,
    error,
    startCamera,
    stopCamera,
    capturePhoto,
    switchCamera,
    currentFacingMode
  };
}
var DEFAULT_CONFIG = {
  minFocusScore: 15,
  minBrightness: 30,
  maxBrightness: 240,
  minDocumentCoverage: 10,
  maxDocumentCoverage: 95,
  stabilityDuration: 500,
  captureCountdown: 2,
  detectionFps: 5,
  enableAutoCapture: true
};
var INITIAL_METRICS = {
  focusScore: 0,
  isInFocus: false,
  brightness: 0,
  isBrightnessOk: false,
  boundary: null,
  isDocumentDetected: false,
  documentCoverage: 0,
  isStable: false,
  stabilityDuration: 0
};
var INITIAL_STATE = {
  isDetecting: false,
  metrics: INITIAL_METRICS,
  isReadyForCapture: false,
  captureCountdown: 0,
  error: null
};
function calculateLaplacianVariance(imageData) {
  const { data, width, height } = imageData;
  let sum = 0;
  let sumSq = 0;
  let count = 0;
  const step = 4;
  for (let y = step; y < height - step; y += step) {
    for (let x = step; x < width - step; x += step) {
      const getGray = (px, py) => {
        const idx = (py * width + px) * 4;
        return 0.299 * data[idx] + 0.587 * data[idx + 1] + 0.114 * data[idx + 2];
      };
      const center = getGray(x, y);
      const neighbors = (getGray(x, y - step) + getGray(x - step, y) + getGray(x + step, y) + getGray(x, y + step)) / 4;
      const laplacian = center - neighbors;
      sum += laplacian;
      sumSq += laplacian * laplacian;
      count++;
    }
  }
  if (count === 0) return 0;
  const mean = sum / count;
  const variance = sumSq / count - mean * mean;
  return Math.abs(variance);
}
function calculateBrightness(imageData) {
  const { data } = imageData;
  let sum = 0;
  let count = 0;
  for (let i = 0; i < data.length; i += 64) {
    sum += 0.299 * data[i] + 0.587 * data[i + 1] + 0.114 * data[i + 2];
    count++;
  }
  return count > 0 ? sum / count : 0;
}
function calculateFrameFingerprint(imageData) {
  const { data, width, height } = imageData;
  const gridSize = 8;
  const cellWidth = Math.floor(width / gridSize);
  const cellHeight = Math.floor(height / gridSize);
  const values = [];
  for (let gy = 0; gy < gridSize; gy++) {
    for (let gx = 0; gx < gridSize; gx++) {
      let sum = 0;
      let count = 0;
      const startX = gx * cellWidth;
      const startY = gy * cellHeight;
      for (let y = startY; y < startY + cellHeight; y += 4) {
        for (let x = startX; x < startX + cellWidth; x += 4) {
          const idx = (y * width + x) * 4;
          if (idx < data.length - 2) {
            sum += 0.299 * data[idx] + 0.587 * data[idx + 1] + 0.114 * data[idx + 2];
            count++;
          }
        }
      }
      values.push(count > 0 ? sum / count : 0);
    }
  }
  return values;
}
function compareFingerprints(fp1, fp2) {
  if (fp1.length !== fp2.length || fp1.length === 0) return 0;
  let totalDiff = 0;
  for (let i = 0; i < fp1.length; i++) {
    totalDiff += Math.abs(fp1[i] - fp2[i]) / 255;
  }
  const avgDiff = totalDiff / fp1.length;
  return Math.max(0, Math.min(100, (1 - avgDiff * 5) * 100));
}
function useDocumentDetection(videoRef, config = {}, onAutoCapture) {
  const mergedConfig = React20.useMemo(
    () => ({ ...DEFAULT_CONFIG, ...config }),
    // Intentionally depend on individual properties to avoid unnecessary re-renders
    // eslint-disable-next-line react-hooks/exhaustive-deps
    [
      config.minFocusScore,
      config.minBrightness,
      config.maxBrightness,
      config.minDocumentCoverage,
      config.maxDocumentCoverage,
      config.stabilityDuration,
      config.captureCountdown,
      config.detectionFps,
      config.enableAutoCapture
    ]
  );
  const [state, setState] = React20.useState(INITIAL_STATE);
  const canvasRef = React20.useRef(null);
  const ctxRef = React20.useRef(null);
  const animationFrameRef = React20.useRef(null);
  const lastFingerprintRef = React20.useRef([]);
  const stabilityStartRef = React20.useRef(null);
  const countdownIntervalRef = React20.useRef(null);
  const isDetectingRef = React20.useRef(false);
  const STABILITY_THRESHOLD = 85;
  React20.useEffect(() => {
    canvasRef.current = document.createElement("canvas");
    ctxRef.current = canvasRef.current.getContext("2d", {
      willReadFrequently: true
    });
    return () => {
      canvasRef.current = null;
      ctxRef.current = null;
    };
  }, []);
  const processFrame = React20.useCallback(() => {
    const video = videoRef.current;
    const canvas = canvasRef.current;
    const ctx = ctxRef.current;
    if (!video || !canvas || !ctx || !isDetectingRef.current) {
      return;
    }
    if (video.readyState < 2) {
      animationFrameRef.current = requestAnimationFrame(processFrame);
      return;
    }
    const scale = 0.15;
    const width = Math.floor(video.videoWidth * scale);
    const height = Math.floor(video.videoHeight * scale);
    if (width === 0 || height === 0) {
      animationFrameRef.current = requestAnimationFrame(processFrame);
      return;
    }
    canvas.width = width;
    canvas.height = height;
    ctx.drawImage(video, 0, 0, width, height);
    const imageData = ctx.getImageData(0, 0, width, height);
    const focusScore = calculateLaplacianVariance(imageData);
    const brightness = calculateBrightness(imageData);
    const fingerprint = calculateFrameFingerprint(imageData);
    const now = Date.now();
    const similarity = compareFingerprints(
      fingerprint,
      lastFingerprintRef.current
    );
    const isSimilarFrame = similarity >= STABILITY_THRESHOLD;
    if (isSimilarFrame && lastFingerprintRef.current.length > 0) {
      if (!stabilityStartRef.current) {
        stabilityStartRef.current = now;
      }
    } else {
      stabilityStartRef.current = now;
    }
    lastFingerprintRef.current = fingerprint;
    const stabilityDuration = stabilityStartRef.current ? now - stabilityStartRef.current : 0;
    const isStable = stabilityDuration >= mergedConfig.stabilityDuration;
    const isInFocus = focusScore >= mergedConfig.minFocusScore;
    const isBrightnessOk = brightness >= mergedConfig.minBrightness && brightness <= mergedConfig.maxBrightness;
    const isDocumentDetected = isInFocus && isBrightnessOk;
    const isReadyForCapture = isInFocus && isBrightnessOk && isStable;
    const metrics = {
      focusScore: Math.round(focusScore),
      isInFocus,
      brightness: Math.round(brightness),
      isBrightnessOk,
      boundary: null,
      // No longer doing boundary detection
      isDocumentDetected,
      documentCoverage: isDocumentDetected ? 50 : 0,
      // Dummy value
      isStable,
      stabilityDuration
    };
    setState((prev) => ({
      ...prev,
      metrics,
      isReadyForCapture
    }));
    const frameDelay = 1e3 / mergedConfig.detectionFps;
    setTimeout(() => {
      if (isDetectingRef.current) {
        animationFrameRef.current = requestAnimationFrame(processFrame);
      }
    }, frameDelay);
  }, [videoRef, mergedConfig]);
  React20.useEffect(() => {
    if (state.isReadyForCapture && mergedConfig.enableAutoCapture && state.captureCountdown === 0 && !countdownIntervalRef.current) {
      let countdown = mergedConfig.captureCountdown;
      setState((prev) => ({ ...prev, captureCountdown: countdown }));
      countdownIntervalRef.current = setInterval(() => {
        countdown -= 1;
        if (countdown <= 0) {
          if (countdownIntervalRef.current) {
            clearInterval(countdownIntervalRef.current);
            countdownIntervalRef.current = null;
          }
          setState((prev) => ({ ...prev, captureCountdown: 0 }));
          onAutoCapture?.();
        } else {
          setState((prev) => ({ ...prev, captureCountdown: countdown }));
        }
      }, 1e3);
    } else if (!state.isReadyForCapture && countdownIntervalRef.current) {
      clearInterval(countdownIntervalRef.current);
      countdownIntervalRef.current = null;
      setState((prev) => ({ ...prev, captureCountdown: 0 }));
    }
  }, [
    state.isReadyForCapture,
    mergedConfig.enableAutoCapture,
    mergedConfig.captureCountdown,
    onAutoCapture,
    state.captureCountdown
  ]);
  React20.useEffect(() => {
    return () => {
      if (animationFrameRef.current) {
        cancelAnimationFrame(animationFrameRef.current);
      }
      if (countdownIntervalRef.current) {
        clearInterval(countdownIntervalRef.current);
      }
    };
  }, []);
  const startDetection = React20.useCallback(() => {
    isDetectingRef.current = true;
    setState((prev) => ({ ...prev, isDetecting: true, error: null }));
    processFrame();
  }, [processFrame]);
  const stopDetection = React20.useCallback(() => {
    isDetectingRef.current = false;
    if (animationFrameRef.current) {
      cancelAnimationFrame(animationFrameRef.current);
      animationFrameRef.current = null;
    }
    if (countdownIntervalRef.current) {
      clearInterval(countdownIntervalRef.current);
      countdownIntervalRef.current = null;
    }
    setState((prev) => ({ ...prev, isDetecting: false }));
  }, []);
  const resetDetection = React20.useCallback(() => {
    stopDetection();
    lastFingerprintRef.current = [];
    stabilityStartRef.current = null;
    setState(INITIAL_STATE);
  }, [stopDetection]);
  return {
    ...state,
    startDetection,
    stopDetection,
    resetDetection
  };
}
function StatusPill({
  label,
  isOk,
  value
}) {
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: `inline-flex items-center gap-1.5 rounded-full px-2 py-1 text-xs font-medium ${isOk ? "bg-green-500/20 text-green-400" : "bg-red-500/20 text-red-400"} `,
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          "span",
          {
            className: `h-2 w-2 rounded-full ${isOk ? "bg-green-400" : "bg-red-400"}`
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx("span", { children: label }),
        value !== void 0 && /* @__PURE__ */ jsxRuntime.jsxs("span", { className: "opacity-70", children: [
          "(",
          value,
          ")"
        ] })
      ]
    }
  );
}
function CountdownDisplay({ seconds }) {
  if (seconds <= 0) return null;
  return /* @__PURE__ */ jsxRuntime.jsx("div", { className: "pointer-events-none absolute inset-0 flex items-center justify-center", children: /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "relative", children: [
    /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute inset-0 animate-ping rounded-full bg-green-500 opacity-25" }),
    /* @__PURE__ */ jsxRuntime.jsx("div", { className: "relative flex h-24 w-24 items-center justify-center rounded-full bg-green-500/90", children: /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-4xl font-bold text-white", children: seconds }) })
  ] }) });
}
function StabilityBar({
  stabilityDuration,
  targetDuration
}) {
  const progress = Math.min(stabilityDuration / targetDuration * 100, 100);
  const isComplete = progress >= 100;
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "w-full", children: [
    /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "mb-1 flex justify-between text-xs text-white/70", children: [
      /* @__PURE__ */ jsxRuntime.jsx("span", { children: "Stability" }),
      /* @__PURE__ */ jsxRuntime.jsx("span", { children: isComplete ? "Stable!" : "Hold steady..." })
    ] }),
    /* @__PURE__ */ jsxRuntime.jsx("div", { className: "h-1.5 overflow-hidden rounded-full bg-white/20", children: /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        className: `h-full transition-all duration-100 ${isComplete ? "bg-green-400" : "bg-yellow-400"}`,
        style: { width: `${progress}%` }
      }
    ) })
  ] });
}
function DocumentDetectionOverlay({
  metrics,
  isReadyForCapture,
  captureCountdown,
  videoDimensions: _videoDimensions,
  showDetailedMetrics = false
}) {
  const {
    focusScore,
    isInFocus,
    brightness,
    isBrightnessOk,
    isDocumentDetected,
    isStable,
    stabilityDuration
  } = metrics;
  const borderColor = isReadyForCapture ? "border-green-500" : isDocumentDetected ? "border-yellow-400" : "border-white/40";
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "pointer-events-none absolute inset-0", children: [
    /* @__PURE__ */ jsxRuntime.jsxs(
      "div",
      {
        className: `absolute inset-4 rounded-lg border-4 transition-colors duration-300 ${borderColor}`,
        children: [
          /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute -top-1 -left-1 h-6 w-6 rounded-tl border-t-4 border-l-4 border-current" }),
          /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute -top-1 -right-1 h-6 w-6 rounded-tr border-t-4 border-r-4 border-current" }),
          /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute -bottom-1 -left-1 h-6 w-6 rounded-bl border-b-4 border-l-4 border-current" }),
          /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute -right-1 -bottom-1 h-6 w-6 rounded-br border-r-4 border-b-4 border-current" })
        ]
      }
    ),
    /* @__PURE__ */ jsxRuntime.jsx(CountdownDisplay, { seconds: captureCountdown }),
    /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "absolute top-3 right-3 left-3", children: [
      /* @__PURE__ */ jsxRuntime.jsx(
        "div",
        {
          className: `mb-2 rounded-lg px-4 py-2 text-center backdrop-blur-sm ${isReadyForCapture ? "bg-green-500/80 text-white" : "bg-black/60 text-white"} `,
          children: isReadyForCapture ? /* @__PURE__ */ jsxRuntime.jsx("span", { className: "font-medium", children: captureCountdown > 0 ? `Capturing in ${captureCountdown}...` : "\u2713 Ready to capture!" }) : /* @__PURE__ */ jsxRuntime.jsx("span", { children: !isInFocus ? "\u{1F50D} Hold camera steady" : !isBrightnessOk ? brightness < 40 ? "\u{1F4A1} Need more light" : "\u{1F4A1} Too bright" : !isStable ? "\u270B Hold steady..." : "\u{1F4C4} Position document in frame" })
        }
      ),
      isDocumentDetected && !isStable && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "px-2", children: /* @__PURE__ */ jsxRuntime.jsx(
        StabilityBar,
        {
          stabilityDuration,
          targetDuration: 500
        }
      ) })
    ] }),
    showDetailedMetrics && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute right-3 bottom-3 left-3", children: /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-wrap justify-center gap-2 rounded-lg bg-black/60 p-2 backdrop-blur-sm", children: [
      /* @__PURE__ */ jsxRuntime.jsx(StatusPill, { label: "Focus", isOk: isInFocus, value: focusScore }),
      /* @__PURE__ */ jsxRuntime.jsx(
        StatusPill,
        {
          label: "Brightness",
          isOk: isBrightnessOk,
          value: brightness
        }
      ),
      /* @__PURE__ */ jsxRuntime.jsx(StatusPill, { label: "Stable", isOk: isStable })
    ] }) })
  ] });
}
function CameraViewfinder({
  videoRef,
  isReady,
  detectionOverlay
}) {
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "relative aspect-[4/3] w-full overflow-hidden rounded-lg bg-black", children: [
    /* @__PURE__ */ jsxRuntime.jsx(
      "video",
      {
        ref: videoRef,
        autoPlay: true,
        playsInline: true,
        muted: true,
        className: chunkOR5DRJCW_cjs.cn(
          "h-full w-full object-cover",
          "transition-opacity duration-300",
          isReady ? "opacity-100" : "opacity-0"
        )
      }
    ),
    !isReady && /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "absolute inset-0 flex flex-col items-center justify-center gap-3", children: [
      /* @__PURE__ */ jsxRuntime.jsx(chunkJYMQJ32S_cjs.Spinner, { size: "lg" }),
      /* @__PURE__ */ jsxRuntime.jsx("span", { className: "text-sm text-neutral-400", children: "Starting camera..." })
    ] }),
    isReady && detectionOverlay,
    isReady && !detectionOverlay && /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "pointer-events-none absolute inset-0", children: [
      /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "absolute inset-8 rounded-lg border-2 border-white/30", children: [
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute -top-0.5 -left-0.5 h-6 w-6 rounded-tl-lg border-t-4 border-l-4 border-white" }),
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute -top-0.5 -right-0.5 h-6 w-6 rounded-tr-lg border-t-4 border-r-4 border-white" }),
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute -bottom-0.5 -left-0.5 h-6 w-6 rounded-bl-lg border-b-4 border-l-4 border-white" }),
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute -right-0.5 -bottom-0.5 h-6 w-6 rounded-br-lg border-r-4 border-b-4 border-white" })
      ] }),
      /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute right-0 bottom-4 left-0 text-center", children: /* @__PURE__ */ jsxRuntime.jsx("span", { className: "rounded-full bg-black/50 px-3 py-1 text-sm text-white", children: "Position document within the frame" }) })
    ] })
  ] });
}
function PermissionDeniedMessage({ onRetry }) {
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col items-center justify-center gap-4 py-8", children: [
    /* @__PURE__ */ jsxRuntime.jsxs(chunkIY7UQPDO_cjs.Alert, { variant: "warning", className: "w-full", children: [
      /* @__PURE__ */ jsxRuntime.jsx(lucideReact.AlertCircle, { className: "h-5 w-5" }),
      /* @__PURE__ */ jsxRuntime.jsx(chunkIY7UQPDO_cjs.AlertTitle, { children: "Camera access denied" }),
      /* @__PURE__ */ jsxRuntime.jsx(chunkIY7UQPDO_cjs.AlertDescription, { children: "Please allow camera access in your browser settings to use this feature. You may need to refresh the page after changing permissions." })
    ] }),
    /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col gap-2 text-center", children: [
      /* @__PURE__ */ jsxRuntime.jsx("p", { className: "text-muted-foreground text-sm", children: "To enable camera access:" }),
      /* @__PURE__ */ jsxRuntime.jsxs("ol", { className: "text-muted-foreground list-inside list-decimal space-y-1 text-left text-sm", children: [
        /* @__PURE__ */ jsxRuntime.jsx("li", { children: "Click the camera/lock icon in your browser's address bar" }),
        /* @__PURE__ */ jsxRuntime.jsx("li", { children: "Allow camera access for this site" }),
        /* @__PURE__ */ jsxRuntime.jsx("li", { children: "Click the button below to try again" })
      ] })
    ] }),
    /* @__PURE__ */ jsxRuntime.jsx(chunkMKJDBXX4_cjs.Button, { onClick: onRetry, leftIcon: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.RefreshCw, { className: "h-4 w-4" }), children: "Try again" })
  ] });
}
function CameraUnavailableMessage() {
  return /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex flex-col items-center justify-center gap-4 py-8", children: /* @__PURE__ */ jsxRuntime.jsxs(chunkIY7UQPDO_cjs.Alert, { variant: "danger", children: [
    /* @__PURE__ */ jsxRuntime.jsx(lucideReact.AlertCircle, { className: "h-5 w-5" }),
    /* @__PURE__ */ jsxRuntime.jsx(chunkIY7UQPDO_cjs.AlertTitle, { children: "Camera unavailable" }),
    /* @__PURE__ */ jsxRuntime.jsx(chunkIY7UQPDO_cjs.AlertDescription, { children: "No camera was detected on this device. Please ensure your camera is connected and not in use by another application." })
  ] }) });
}
function PhotoPreview({
  previewUrl,
  onConfirm,
  onRetake
}) {
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col gap-4", children: [
    /* @__PURE__ */ jsxRuntime.jsx("div", { className: "relative aspect-[4/3] w-full overflow-hidden rounded-lg bg-black", children: /* @__PURE__ */ jsxRuntime.jsx(
      "img",
      {
        src: previewUrl,
        alt: "Captured document",
        className: "h-full w-full object-cover"
      }
    ) }),
    /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex justify-center gap-3", children: [
      /* @__PURE__ */ jsxRuntime.jsx(
        chunkMKJDBXX4_cjs.Button,
        {
          variant: "secondary",
          onClick: onRetake,
          leftIcon: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.RefreshCw, { className: "h-4 w-4" }),
          children: "Retake"
        }
      ),
      /* @__PURE__ */ jsxRuntime.jsx(
        chunkMKJDBXX4_cjs.Button,
        {
          variant: "primary",
          onClick: onConfirm,
          leftIcon: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Check, { className: "h-4 w-4" }),
          children: "Use this photo"
        }
      )
    ] })
  ] });
}
function WebcamModal({
  open,
  onOpenChange,
  onCapture,
  enableAutoCapture = true
}) {
  const {
    permission,
    videoRef,
    isReady,
    startCamera,
    stopCamera,
    capturePhoto,
    switchCamera,
    currentFacingMode
  } = useCamera({
    facingMode: "environment",
    width: 1920,
    height: 1080
  });
  const [capturedFile, setCapturedFile] = React20__namespace.useState(null);
  const [previewUrl, setPreviewUrl] = React20__namespace.useState(null);
  const [autoDetectEnabled, setAutoDetectEnabled] = React20__namespace.useState(enableAutoCapture);
  const [videoDimensions, setVideoDimensions] = React20__namespace.useState({
    width: 0,
    height: 0
  });
  const handleAutoCapture = React20__namespace.useCallback(() => {
    const file = capturePhoto();
    if (file) {
      setCapturedFile(file);
      setPreviewUrl(URL.createObjectURL(file));
      stopCamera();
    }
  }, [capturePhoto, stopCamera]);
  const detection = useDocumentDetection(
    videoRef,
    {
      enableAutoCapture: autoDetectEnabled,
      minFocusScore: 15,
      // Very forgiving focus threshold
      stabilityDuration: 500,
      // 0.5 seconds of stability
      captureCountdown: 2
      // 2 second countdown
    },
    handleAutoCapture
  );
  const hasStartedRef = React20__namespace.useRef(false);
  React20__namespace.useEffect(() => {
    const video = videoRef.current;
    if (video && isReady) {
      const updateDimensions = () => {
        setVideoDimensions({
          width: video.videoWidth,
          height: video.videoHeight
        });
      };
      updateDimensions();
      video.addEventListener("resize", updateDimensions);
      return () => video.removeEventListener("resize", updateDimensions);
    }
  }, [isReady, videoRef]);
  React20__namespace.useEffect(() => {
    if (open && permission !== "denied" && permission !== "unavailable") {
      if (!hasStartedRef.current) {
        hasStartedRef.current = true;
        startCamera();
      }
    } else if (!open) {
      hasStartedRef.current = false;
      stopCamera();
      detection.stopDetection();
      setCapturedFile(null);
      setPreviewUrl((prev) => {
        if (prev) {
          URL.revokeObjectURL(prev);
        }
        return null;
      });
    }
  }, [open, permission]);
  React20__namespace.useEffect(() => {
    if (isReady && autoDetectEnabled && !capturedFile) {
      detection.startDetection();
    }
    return () => {
      detection.stopDetection();
    };
  }, [isReady, autoDetectEnabled, capturedFile]);
  const handleCapture = React20__namespace.useCallback(() => {
    const file = capturePhoto();
    if (file) {
      setCapturedFile(file);
      setPreviewUrl(URL.createObjectURL(file));
      stopCamera();
    }
  }, [capturePhoto, stopCamera]);
  const handleRetake = React20__namespace.useCallback(() => {
    if (previewUrl) {
      URL.revokeObjectURL(previewUrl);
    }
    setCapturedFile(null);
    setPreviewUrl(null);
    detection.resetDetection();
    startCamera();
  }, [previewUrl, startCamera, detection]);
  const handleConfirm = React20__namespace.useCallback(() => {
    if (capturedFile) {
      onCapture(capturedFile);
      onOpenChange(false);
    }
  }, [capturedFile, onCapture, onOpenChange]);
  const handleClose = React20__namespace.useCallback(() => {
    stopCamera();
    detection.stopDetection();
    if (previewUrl) {
      URL.revokeObjectURL(previewUrl);
    }
    setCapturedFile(null);
    setPreviewUrl(null);
    onOpenChange(false);
  }, [stopCamera, detection, previewUrl, onOpenChange]);
  const renderContent = () => {
    if (permission === "denied") {
      return /* @__PURE__ */ jsxRuntime.jsx(PermissionDeniedMessage, { onRetry: startCamera });
    }
    if (permission === "unavailable") {
      return /* @__PURE__ */ jsxRuntime.jsx(CameraUnavailableMessage, {});
    }
    if (capturedFile && previewUrl) {
      return /* @__PURE__ */ jsxRuntime.jsx(
        PhotoPreview,
        {
          previewUrl,
          onConfirm: handleConfirm,
          onRetake: handleRetake
        }
      );
    }
    return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col gap-4", children: [
      /* @__PURE__ */ jsxRuntime.jsx(
        CameraViewfinder,
        {
          videoRef,
          isReady,
          detectionOverlay: autoDetectEnabled && isReady ? /* @__PURE__ */ jsxRuntime.jsx(
            DocumentDetectionOverlay,
            {
              metrics: detection.metrics,
              isReadyForCapture: detection.isReadyForCapture,
              captureCountdown: detection.captureCountdown,
              videoDimensions,
              showDetailedMetrics: false
            }
          ) : void 0
        }
      ),
      /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col gap-3", children: [
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex items-center justify-center gap-2", children: /* @__PURE__ */ jsxRuntime.jsx(
          chunkMKJDBXX4_cjs.Button,
          {
            variant: autoDetectEnabled ? "primary" : "secondary",
            size: "sm",
            onClick: () => {
              setAutoDetectEnabled(!autoDetectEnabled);
              if (!autoDetectEnabled) {
                detection.startDetection();
              } else {
                detection.stopDetection();
              }
            },
            leftIcon: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.ScanLine, { className: "h-4 w-4" }),
            children: autoDetectEnabled ? "Auto-capture ON" : "Auto-capture OFF"
          }
        ) }),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex justify-center gap-3", children: [
          /* @__PURE__ */ jsxRuntime.jsx(
            chunkMKJDBXX4_cjs.Button,
            {
              variant: "secondary",
              size: "icon",
              onClick: switchCamera,
              disabled: !isReady,
              "aria-label": `Switch to ${currentFacingMode === "user" ? "back" : "front"} camera`,
              children: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.RefreshCw, { className: "h-5 w-5" })
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsx(
            chunkMKJDBXX4_cjs.Button,
            {
              variant: "primary",
              size: "lg",
              onClick: handleCapture,
              disabled: !isReady,
              leftIcon: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Camera, { className: "h-5 w-5" }),
              children: autoDetectEnabled ? "Manual Capture" : "Capture"
            }
          )
        ] })
      ] })
    ] });
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(
    chunkNH2JVQ6V_cjs.Modal,
    {
      open,
      onOpenChange: handleClose,
      size: "lg",
      "aria-label": "Webcam capture",
      children: [
        /* @__PURE__ */ jsxRuntime.jsxs(chunkNH2JVQ6V_cjs.ModalHeader, { children: [
          /* @__PURE__ */ jsxRuntime.jsx(chunkNH2JVQ6V_cjs.ModalTitle, { children: "Take a Photo" }),
          /* @__PURE__ */ jsxRuntime.jsx(chunkNH2JVQ6V_cjs.ModalClose, {})
        ] }),
        /* @__PURE__ */ jsxRuntime.jsx(chunkNH2JVQ6V_cjs.ModalBody, { children: renderContent() }),
        permission !== "denied" && permission !== "unavailable" && !capturedFile && /* @__PURE__ */ jsxRuntime.jsx(chunkNH2JVQ6V_cjs.ModalFooter, { children: /* @__PURE__ */ jsxRuntime.jsx(chunkMKJDBXX4_cjs.Button, { variant: "secondary", onClick: handleClose, children: "Cancel" }) })
      ]
    }
  );
}
WebcamModal.displayName = "WebcamModal";

// src/components/DocumentScanner/types.ts
var DEFAULT_ACCEPTED_FILE_TYPES = [
  "image/jpeg",
  "image/jpg",
  "image/png",
  "image/heic",
  "image/webp",
  "application/pdf"
];
var DEFAULT_MAX_FILE_SIZE_MB = 10;

// src/components/DocumentScanner/useFileUpload.ts
function generateFileId() {
  return `file-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;
}
function validateFile2(file, acceptedTypes, maxSizeMb) {
  if (!acceptedTypes.includes(file.type)) {
    return {
      file,
      type: "type",
      message: `File type "${file.type || "unknown"}" is not supported. Accepted types: ${acceptedTypes.join(", ")}`
    };
  }
  const maxSizeBytes = maxSizeMb * 1024 * 1024;
  if (file.size > maxSizeBytes) {
    return {
      file,
      type: "size",
      message: `File size (${(file.size / 1024 / 1024).toFixed(2)} MB) exceeds the maximum allowed size of ${maxSizeMb} MB`
    };
  }
  return null;
}
function createPreviewUrl(file) {
  return URL.createObjectURL(file);
}
function useFileUpload({
  acceptedFileTypes = [...DEFAULT_ACCEPTED_FILE_TYPES],
  maxFileSizeMb = DEFAULT_MAX_FILE_SIZE_MB,
  multiple = false,
  onValidationError
} = {}) {
  const [files, setFiles] = React20__namespace.useState([]);
  React20__namespace.useEffect(() => {
    return () => {
      files.forEach((f) => URL.revokeObjectURL(f.previewUrl));
    };
  }, []);
  const addFiles = React20__namespace.useCallback(
    (fileList, source = "upload") => {
      const newFiles = [];
      const errors = [];
      Array.from(fileList).forEach((file) => {
        const error = validateFile2(file, acceptedFileTypes, maxFileSizeMb);
        if (error) {
          errors.push(error);
        } else {
          newFiles.push({
            file,
            previewUrl: createPreviewUrl(file),
            source,
            id: generateFileId()
          });
        }
      });
      if (errors.length > 0) {
        onValidationError?.(errors);
      }
      if (newFiles.length > 0) {
        setFiles((prev) => {
          if (!multiple) {
            prev.forEach((f) => URL.revokeObjectURL(f.previewUrl));
            return newFiles.slice(0, 1);
          }
          return [...prev, ...newFiles];
        });
      }
    },
    [acceptedFileTypes, maxFileSizeMb, multiple, onValidationError]
  );
  const addFile = React20__namespace.useCallback(
    (file, source = "upload") => {
      const dataTransfer = new DataTransfer();
      dataTransfer.items.add(file);
      addFiles(dataTransfer.files, source);
    },
    [addFiles]
  );
  const removeFile = React20__namespace.useCallback((id) => {
    setFiles((prev) => {
      const fileToRemove = prev.find((f) => f.id === id);
      if (fileToRemove) {
        URL.revokeObjectURL(fileToRemove.previewUrl);
      }
      return prev.filter((f) => f.id !== id);
    });
  }, []);
  const clearFiles = React20__namespace.useCallback(() => {
    setFiles((prev) => {
      prev.forEach((f) => URL.revokeObjectURL(f.previewUrl));
      return [];
    });
  }, []);
  const getFiles = React20__namespace.useCallback(() => {
    return files.map((f) => f.file);
  }, [files]);
  return {
    files,
    addFiles,
    addFile,
    removeFile,
    clearFiles,
    getFiles,
    hasFiles: files.length > 0
  };
}
function DocumentScanner({
  onScan,
  onResult,
  multiple = false,
  acceptedFileTypes = [...DEFAULT_ACCEPTED_FILE_TYPES],
  maxFileSizeMb = DEFAULT_MAX_FILE_SIZE_MB,
  disabled = false,
  enableWebcam = true,
  enableCamera = true,
  title = "Scan your document",
  description = "Upload a file, take a photo, or use your webcam",
  className,
  onValidationError,
  onStateChange
}) {
  const [state, setState] = React20__namespace.useState("idle");
  const [error, setError] = React20__namespace.useState(null);
  const [isWebcamOpen, setIsWebcamOpen] = React20__namespace.useState(false);
  const [validationErrors, setValidationErrors] = React20__namespace.useState([]);
  const isMobile = chunkR4DM4635_cjs.useIsMobile();
  const cameraInputRef = React20__namespace.useRef(null);
  const {
    files,
    addFiles,
    addFile,
    removeFile,
    clearFiles,
    getFiles,
    hasFiles
  } = useFileUpload({
    acceptedFileTypes,
    maxFileSizeMb,
    multiple,
    onValidationError: (errors) => {
      setValidationErrors(errors);
      onValidationError?.(errors);
    }
  });
  React20__namespace.useEffect(() => {
    onStateChange?.(state);
  }, [state, onStateChange]);
  React20__namespace.useEffect(() => {
    if (hasFiles && state === "idle") {
      setState("preview");
    } else if (!hasFiles && state === "preview") {
      setState("idle");
    }
  }, [hasFiles, state]);
  const handleFilesSelected = React20__namespace.useCallback(
    (fileList) => {
      setError(null);
      setValidationErrors([]);
      addFiles(fileList, "upload");
    },
    [addFiles]
  );
  const handleCameraCapture = React20__namespace.useCallback(() => {
    cameraInputRef.current?.click();
  }, []);
  const handleCameraInputChange = React20__namespace.useCallback(
    (e) => {
      if (e.target.files && e.target.files.length > 0) {
        setError(null);
        setValidationErrors([]);
        addFiles(e.target.files, "camera");
        e.target.value = "";
      }
    },
    [addFiles]
  );
  const handleWebcamCapture = React20__namespace.useCallback(
    (file) => {
      setError(null);
      setValidationErrors([]);
      addFile(file, "webcam");
    },
    [addFile]
  );
  const handleScan = React20__namespace.useCallback(async () => {
    if (!hasFiles) return;
    try {
      setState("processing");
      setError(null);
      const filesToScan = getFiles();
      const result = await onScan(filesToScan);
      setState("success");
      onResult(result);
      setTimeout(() => {
        clearFiles();
        setState("idle");
      }, 2e3);
    } catch (err) {
      setState("error");
      const errorMessage = err instanceof Error ? err.message : "An error occurred while processing your document. Please try again.";
      setError(errorMessage);
    }
  }, [hasFiles, getFiles, onScan, onResult, clearFiles]);
  const handleRetry = React20__namespace.useCallback(() => {
    setState("preview");
    setError(null);
  }, []);
  const handleClearAll = React20__namespace.useCallback(() => {
    clearFiles();
    setError(null);
    setValidationErrors([]);
    setState("idle");
  }, [clearFiles]);
  const cameraAcceptString = acceptedFileTypes.filter((type) => type.startsWith("image/")).join(",");
  const renderContent = () => {
    if (state === "processing") {
      return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col items-center justify-center gap-4 py-12", children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          chunkJYMQJ32S_cjs.SpinnerWithLabel,
          {
            size: "xl",
            label: "Analyzing your document...",
            labelPosition: "bottom"
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(chunkQDGZBDBI_cjs.Text, { variant: "muted", size: "sm", className: "max-w-xs text-center", children: "Our AI is extracting information from your document. This usually takes a few seconds." })
      ] });
    }
    if (state === "success") {
      return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col items-center justify-center gap-4 py-12", children: [
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex h-16 w-16 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30", children: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.CheckCircle, { className: "h-8 w-8 text-green-600 dark:text-green-400" }) }),
        /* @__PURE__ */ jsxRuntime.jsx(chunkQDGZBDBI_cjs.Text, { weight: "semibold", size: "lg", children: "Document scanned successfully!" }),
        /* @__PURE__ */ jsxRuntime.jsx(chunkQDGZBDBI_cjs.Text, { variant: "muted", size: "sm", children: "The extracted data has been processed." })
      ] });
    }
    if (state === "error") {
      return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col items-center gap-4 py-8", children: [
        /* @__PURE__ */ jsxRuntime.jsxs(chunkIY7UQPDO_cjs.Alert, { variant: "danger", className: "w-full", children: [
          /* @__PURE__ */ jsxRuntime.jsx(lucideReact.AlertCircle, { className: "h-5 w-5" }),
          /* @__PURE__ */ jsxRuntime.jsx(chunkIY7UQPDO_cjs.AlertTitle, { children: "Processing failed" }),
          /* @__PURE__ */ jsxRuntime.jsx(chunkIY7UQPDO_cjs.AlertDescription, { children: error })
        ] }),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex gap-3", children: [
          /* @__PURE__ */ jsxRuntime.jsx(chunkMKJDBXX4_cjs.Button, { variant: "secondary", onClick: handleClearAll, children: "Start over" }),
          /* @__PURE__ */ jsxRuntime.jsx(chunkMKJDBXX4_cjs.Button, { variant: "primary", onClick: handleRetry, children: "Try again" })
        ] })
      ] });
    }
    if (state === "preview" && hasFiles) {
      return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col gap-6", children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          FilePreview,
          {
            files,
            onRemove: removeFile,
            disabled
          }
        ),
        validationErrors.length > 0 && /* @__PURE__ */ jsxRuntime.jsxs(
          chunkIY7UQPDO_cjs.Alert,
          {
            variant: "warning",
            dismissible: true,
            onDismiss: () => setValidationErrors([]),
            children: [
              /* @__PURE__ */ jsxRuntime.jsx(lucideReact.AlertCircle, { className: "h-5 w-5" }),
              /* @__PURE__ */ jsxRuntime.jsx(chunkIY7UQPDO_cjs.AlertTitle, { children: "Some files were not added" }),
              /* @__PURE__ */ jsxRuntime.jsx(chunkIY7UQPDO_cjs.AlertDescription, { children: /* @__PURE__ */ jsxRuntime.jsx("ul", { className: "mt-2 list-inside list-disc space-y-1", children: validationErrors.map((err, index) => /* @__PURE__ */ jsxRuntime.jsxs("li", { className: "text-sm", children: [
                /* @__PURE__ */ jsxRuntime.jsxs("strong", { children: [
                  err.file.name,
                  ":"
                ] }),
                " ",
                err.message
              ] }, index)) }) })
            ]
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-wrap items-center justify-center gap-3", children: [
          multiple && /* @__PURE__ */ jsxRuntime.jsx(jsxRuntime.Fragment, { children: /* @__PURE__ */ jsxRuntime.jsx(
            chunkMKJDBXX4_cjs.Button,
            {
              variant: "secondary",
              onClick: () => {
                const input = document.createElement("input");
                input.type = "file";
                input.accept = acceptedFileTypes.join(",");
                input.multiple = multiple;
                input.onchange = (e) => {
                  const files2 = e.target.files;
                  if (files2) addFiles(files2, "upload");
                };
                input.click();
              },
              leftIcon: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Upload, { className: "h-4 w-4" }),
              disabled,
              children: "Add more files"
            }
          ) }),
          /* @__PURE__ */ jsxRuntime.jsx(
            chunkMKJDBXX4_cjs.Button,
            {
              variant: "secondary",
              onClick: handleClearAll,
              leftIcon: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Trash2, { className: "h-4 w-4" }),
              disabled,
              children: "Clear all"
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsxs(
            chunkMKJDBXX4_cjs.Button,
            {
              variant: "primary",
              onClick: handleScan,
              leftIcon: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Scan, { className: "h-4 w-4" }),
              disabled,
              children: [
                "Scan ",
                files.length > 1 ? `${files.length} documents` : "document"
              ]
            }
          )
        ] })
      ] });
    }
    return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col gap-6", children: [
      /* @__PURE__ */ jsxRuntime.jsx(
        DropZone,
        {
          onFilesSelected: handleFilesSelected,
          acceptedFileTypes,
          multiple,
          disabled,
          className: "min-h-[240px]",
          children: /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col items-center gap-4 text-center", children: [
            /* @__PURE__ */ jsxRuntime.jsx("div", { className: "bg-primary-100 dark:bg-primary-900/30 flex h-14 w-14 items-center justify-center rounded-full", children: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Upload, { className: "text-primary-600 dark:text-primary-400 h-7 w-7" }) }),
            /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "space-y-1", children: [
              /* @__PURE__ */ jsxRuntime.jsx(chunkQDGZBDBI_cjs.Text, { weight: "medium", children: "Drag and drop your files here" }),
              /* @__PURE__ */ jsxRuntime.jsx(chunkQDGZBDBI_cjs.Text, { variant: "muted", size: "sm", children: "or click to browse" })
            ] }),
            /* @__PURE__ */ jsxRuntime.jsxs(chunkQDGZBDBI_cjs.Text, { variant: "muted", size: "xs", className: "max-w-xs", children: [
              "Supported formats: JPEG, PNG, HEIC, WebP, PDF",
              /* @__PURE__ */ jsxRuntime.jsx("br", {}),
              "Max size: ",
              maxFileSizeMb,
              " MB"
            ] })
          ] })
        }
      ),
      (enableCamera || enableWebcam) && /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-col items-center gap-3", children: [
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex w-full max-w-xs items-center gap-3", children: [
          /* @__PURE__ */ jsxRuntime.jsx("div", { className: "bg-border h-px flex-1" }),
          /* @__PURE__ */ jsxRuntime.jsx(chunkQDGZBDBI_cjs.Text, { variant: "muted", size: "sm", children: "or" }),
          /* @__PURE__ */ jsxRuntime.jsx("div", { className: "bg-border h-px flex-1" })
        ] }),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex flex-wrap justify-center gap-3", children: [
          enableCamera && isMobile && /* @__PURE__ */ jsxRuntime.jsx(
            chunkMKJDBXX4_cjs.Button,
            {
              variant: "secondary",
              onClick: handleCameraCapture,
              leftIcon: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Camera, { className: "h-4 w-4" }),
              disabled,
              children: "Take a photo"
            }
          ),
          enableWebcam && !isMobile && /* @__PURE__ */ jsxRuntime.jsx(
            chunkMKJDBXX4_cjs.Button,
            {
              variant: "secondary",
              onClick: () => setIsWebcamOpen(true),
              leftIcon: /* @__PURE__ */ jsxRuntime.jsx(lucideReact.Camera, { className: "h-4 w-4" }),
              disabled,
              children: "Use webcam"
            }
          )
        ] })
      ] }),
      validationErrors.length > 0 && /* @__PURE__ */ jsxRuntime.jsxs(
        chunkIY7UQPDO_cjs.Alert,
        {
          variant: "warning",
          dismissible: true,
          onDismiss: () => setValidationErrors([]),
          children: [
            /* @__PURE__ */ jsxRuntime.jsx(lucideReact.AlertCircle, { className: "h-5 w-5" }),
            /* @__PURE__ */ jsxRuntime.jsx(chunkIY7UQPDO_cjs.AlertTitle, { children: "Invalid files" }),
            /* @__PURE__ */ jsxRuntime.jsx(chunkIY7UQPDO_cjs.AlertDescription, { children: /* @__PURE__ */ jsxRuntime.jsx("ul", { className: "mt-2 list-inside list-disc space-y-1", children: validationErrors.map((err, index) => /* @__PURE__ */ jsxRuntime.jsxs("li", { className: "text-sm", children: [
              /* @__PURE__ */ jsxRuntime.jsxs("strong", { children: [
                err.file.name,
                ":"
              ] }),
              " ",
              err.message
            ] }, index)) }) })
          ]
        }
      )
    ] });
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "border-border bg-card w-full rounded-xl border p-6",
        "shadow-sm",
        className
      ),
      children: [
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "mb-6 text-center", children: [
          /* @__PURE__ */ jsxRuntime.jsx(chunkQDGZBDBI_cjs.Text, { as: "h2", size: "xl", weight: "semibold", className: "mb-1", children: title }),
          /* @__PURE__ */ jsxRuntime.jsx(chunkQDGZBDBI_cjs.Text, { variant: "muted", size: "sm", children: description })
        ] }),
        renderContent(),
        /* @__PURE__ */ jsxRuntime.jsx(
          "input",
          {
            ref: cameraInputRef,
            type: "file",
            accept: cameraAcceptString,
            capture: "environment",
            onChange: handleCameraInputChange,
            className: "sr-only",
            "aria-hidden": "true",
            tabIndex: -1
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(
          WebcamModal,
          {
            open: isWebcamOpen,
            onOpenChange: setIsWebcamOpen,
            onCapture: handleWebcamCapture
          }
        )
      ]
    }
  );
}
DocumentScanner.displayName = "DocumentScanner";
var headerVariants = classVarianceAuthority.cva(
  [
    "flex items-center gap-3 px-4 py-3",
    "bg-white dark:bg-neutral-900",
    "border-b border-neutral-200 dark:border-neutral-700"
  ],
  {
    variants: {
      size: {
        sm: "py-2",
        md: "py-3",
        lg: "py-4"
      }
    },
    defaultVariants: {
      size: "md"
    }
  }
);
function getConversationTitle(conversation, participant) {
  if (conversation?.name) return conversation.name;
  if (participant?.name) return participant.name;
  if (conversation?.participants && conversation.participants.length > 0) {
    const names = conversation.participants.filter((p) => !p.isCurrentUser).map((p) => p.name);
    if (names.length <= 2) return names.join(" & ");
    return `${names[0]} and ${names.length - 1} others`;
  }
  return "Conversation";
}
function getConversationSubtitle(conversation, participant, showOnlineStatus) {
  if (participant) {
    if (showOnlineStatus && participant.isOnline) {
      return "Online";
    }
    if (participant.lastSeen) {
      const lastSeen = new Date(participant.lastSeen);
      return `Last seen ${formatLastSeen(lastSeen)}`;
    }
    if (participant.phoneNumber) {
      return participant.phoneNumber;
    }
  }
  if (conversation?.type === "group" && conversation.participants) {
    return `${conversation.participants.length} participants`;
  }
  return void 0;
}
function formatLastSeen(date) {
  const now = /* @__PURE__ */ new Date();
  const diffMs = now.getTime() - date.getTime();
  const diffMins = Math.floor(diffMs / (1e3 * 60));
  const diffHours = Math.floor(diffMs / (1e3 * 60 * 60));
  const diffDays = Math.floor(diffMs / (1e3 * 60 * 60 * 24));
  if (diffMins < 1) return "just now";
  if (diffMins < 60) return `${diffMins}m ago`;
  if (diffHours < 24) return `${diffHours}h ago`;
  if (diffDays < 7) return `${diffDays}d ago`;
  return date.toLocaleDateString();
}
var ConversationHeader = React20__namespace.forwardRef(
  ({
    className,
    size,
    conversation,
    title,
    subtitle,
    avatarUrl,
    participant,
    showOnlineStatus = true,
    showBackButton = false,
    onBack,
    actions,
    leftContent,
    rightContent,
    ...props
  }, ref) => {
    const displayTitle = title || getConversationTitle(conversation, participant);
    const displaySubtitle = subtitle || getConversationSubtitle(conversation, participant, showOnlineStatus);
    const displayAvatar = avatarUrl || conversation?.avatarUrl || participant?.avatarUrl;
    const isOnline = participant?.isOnline;
    return /* @__PURE__ */ jsxRuntime.jsxs(
      "header",
      {
        ref,
        className: chunkOR5DRJCW_cjs.cn(headerVariants({ size }), className),
        ...props,
        children: [
          leftContent || showBackButton && onBack && /* @__PURE__ */ jsxRuntime.jsx(
            "button",
            {
              type: "button",
              onClick: onBack,
              className: chunkOR5DRJCW_cjs.cn(
                "-ml-2 rounded-full p-2",
                "text-neutral-500 hover:text-neutral-700",
                "dark:text-neutral-400 dark:hover:text-neutral-200",
                "hover:bg-neutral-100 dark:hover:bg-neutral-800",
                "focus:ring-primary-500 focus:ring-2 focus:outline-none",
                "transition-colors"
              ),
              "aria-label": "Go back",
              children: /* @__PURE__ */ jsxRuntime.jsx(
                "svg",
                {
                  className: "h-5 w-5",
                  fill: "none",
                  viewBox: "0 0 24 24",
                  stroke: "currentColor",
                  children: /* @__PURE__ */ jsxRuntime.jsx(
                    "path",
                    {
                      strokeLinecap: "round",
                      strokeLinejoin: "round",
                      strokeWidth: 2,
                      d: "M15 19l-7-7 7-7"
                    }
                  )
                }
              )
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "relative shrink-0", children: [
            /* @__PURE__ */ jsxRuntime.jsx(
              "div",
              {
                className: chunkOR5DRJCW_cjs.cn(
                  "flex h-10 w-10 items-center justify-center rounded-full",
                  "bg-primary-800 font-medium text-white"
                ),
                children: displayAvatar ? /* @__PURE__ */ jsxRuntime.jsx(
                  "img",
                  {
                    src: displayAvatar,
                    alt: displayTitle,
                    className: "h-full w-full rounded-full object-cover"
                  }
                ) : displayTitle.charAt(0).toUpperCase()
              }
            ),
            showOnlineStatus && isOnline && /* @__PURE__ */ jsxRuntime.jsx(
              "span",
              {
                className: chunkOR5DRJCW_cjs.cn(
                  "absolute right-0 bottom-0",
                  "h-3 w-3 rounded-full",
                  "bg-green-500 ring-2 ring-white dark:ring-neutral-900"
                ),
                "aria-label": "Online"
              }
            )
          ] }),
          /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "min-w-0 flex-1", children: [
            /* @__PURE__ */ jsxRuntime.jsx("h2", { className: "truncate font-semibold text-neutral-900 dark:text-neutral-100", children: displayTitle }),
            displaySubtitle && /* @__PURE__ */ jsxRuntime.jsx(
              "p",
              {
                className: chunkOR5DRJCW_cjs.cn(
                  "truncate text-sm",
                  isOnline ? "text-green-600 dark:text-green-400" : "text-neutral-500 dark:text-neutral-400"
                ),
                children: displaySubtitle
              }
            )
          ] }),
          rightContent || actions && /* @__PURE__ */ jsxRuntime.jsx("div", { className: "flex shrink-0 items-center gap-1", children: actions })
        ]
      }
    );
  }
);
ConversationHeader.displayName = "ConversationHeader";
var ConversationListItem = React20__namespace.forwardRef(({ className, conversation, isSelected, onSelect, ...props }, ref) => {
  const participant = conversation.participants.find((p) => !p.isCurrentUser);
  const title = getConversationTitle(conversation, participant);
  const avatarUrl = conversation.avatarUrl || participant?.avatarUrl;
  const lastMessage = conversation.lastMessage;
  const isUnread = conversation.unreadCount > 0;
  const formatTime3 = (timestamp) => {
    const date = new Date(timestamp);
    const now = /* @__PURE__ */ new Date();
    const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    const messageDate = new Date(
      date.getFullYear(),
      date.getMonth(),
      date.getDate()
    );
    if (messageDate.getTime() === today.getTime()) {
      return date.toLocaleTimeString(void 0, {
        hour: "numeric",
        minute: "2-digit"
      });
    }
    const yesterday = new Date(today);
    yesterday.setDate(yesterday.getDate() - 1);
    if (messageDate.getTime() === yesterday.getTime()) {
      return "Yesterday";
    }
    return date.toLocaleDateString(void 0, {
      month: "short",
      day: "numeric"
    });
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "button",
    {
      ref,
      type: "button",
      onClick: () => onSelect?.(conversation),
      className: chunkOR5DRJCW_cjs.cn(
        "flex w-full items-center gap-3 px-4 py-3",
        "text-left transition-colors",
        isSelected ? "bg-primary-50 dark:bg-primary-900/20" : "hover:bg-neutral-50 dark:hover:bg-neutral-800/50",
        "focus:bg-neutral-50 focus:outline-none dark:focus:bg-neutral-800/50",
        className
      ),
      "aria-current": isSelected ? "true" : void 0,
      ...props,
      children: [
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "relative shrink-0", children: [
          /* @__PURE__ */ jsxRuntime.jsx(
            "div",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "flex h-12 w-12 items-center justify-center rounded-full",
                "bg-primary-800 font-medium text-white"
              ),
              children: avatarUrl ? /* @__PURE__ */ jsxRuntime.jsx(
                "img",
                {
                  src: avatarUrl,
                  alt: title,
                  className: "h-full w-full rounded-full object-cover"
                }
              ) : title.charAt(0).toUpperCase()
            }
          ),
          participant?.isOnline && /* @__PURE__ */ jsxRuntime.jsx(
            "span",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "absolute right-0 bottom-0",
                "h-3 w-3 rounded-full",
                "bg-green-500 ring-2 ring-white dark:ring-neutral-900"
              )
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "min-w-0 flex-1", children: [
          /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center justify-between gap-2", children: [
            /* @__PURE__ */ jsxRuntime.jsx(
              "h3",
              {
                className: chunkOR5DRJCW_cjs.cn(
                  "truncate text-sm",
                  isUnread ? "font-semibold text-neutral-900 dark:text-neutral-100" : "font-medium text-neutral-700 dark:text-neutral-300"
                ),
                children: title
              }
            ),
            lastMessage && /* @__PURE__ */ jsxRuntime.jsx("span", { className: "shrink-0 text-xs text-neutral-500 dark:text-neutral-400", children: formatTime3(lastMessage.timestamp) })
          ] }),
          /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex items-center justify-between gap-2", children: [
            /* @__PURE__ */ jsxRuntime.jsx(
              "p",
              {
                className: chunkOR5DRJCW_cjs.cn(
                  "truncate text-sm",
                  isUnread ? "text-neutral-700 dark:text-neutral-300" : "text-neutral-500 dark:text-neutral-400"
                ),
                children: lastMessage?.content || "No messages yet"
              }
            ),
            isUnread && /* @__PURE__ */ jsxRuntime.jsx(
              "span",
              {
                className: chunkOR5DRJCW_cjs.cn(
                  "flex shrink-0 items-center justify-center",
                  "h-5 min-w-[20px] rounded-full px-1.5",
                  "bg-primary-600 text-xs font-medium text-white"
                ),
                children: conversation.unreadCount > 99 ? "99+" : conversation.unreadCount
              }
            )
          ] })
        ] }),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex shrink-0 flex-col items-center gap-1", children: [
          conversation.isPinned && /* @__PURE__ */ jsxRuntime.jsx(
            "svg",
            {
              className: "text-primary-500 h-4 w-4",
              fill: "currentColor",
              viewBox: "0 0 24 24",
              children: /* @__PURE__ */ jsxRuntime.jsx("path", { d: "M16 4v8l2 2v2h-6v6l-1 1-1-1v-6H4v-2l2-2V4c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2z" })
            }
          ),
          conversation.isMuted && /* @__PURE__ */ jsxRuntime.jsxs(
            "svg",
            {
              className: "h-4 w-4 text-neutral-400",
              fill: "none",
              viewBox: "0 0 24 24",
              stroke: "currentColor",
              children: [
                /* @__PURE__ */ jsxRuntime.jsx(
                  "path",
                  {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"
                  }
                ),
                /* @__PURE__ */ jsxRuntime.jsx(
                  "path",
                  {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"
                  }
                )
              ]
            }
          )
        ] })
      ]
    }
  );
});
ConversationListItem.displayName = "ConversationListItem";
function ConversationListSkeleton({
  count = 5,
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsx(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "divide-y divide-neutral-200 dark:divide-neutral-700",
        className
      ),
      children: Array.from({ length: count }).map((_, i) => /* @__PURE__ */ jsxRuntime.jsxs(
        "div",
        {
          className: "flex items-center gap-3 px-4 py-3",
          "aria-hidden": "true",
          children: [
            /* @__PURE__ */ jsxRuntime.jsx("div", { className: "h-12 w-12 animate-pulse rounded-full bg-neutral-200 dark:bg-neutral-700" }),
            /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "flex-1 space-y-2", children: [
              /* @__PURE__ */ jsxRuntime.jsx("div", { className: "h-4 w-32 animate-pulse rounded bg-neutral-200 dark:bg-neutral-700" }),
              /* @__PURE__ */ jsxRuntime.jsx("div", { className: "h-3 w-48 animate-pulse rounded bg-neutral-200 dark:bg-neutral-700" })
            ] })
          ]
        },
        i
      ))
    }
  );
}
ConversationListSkeleton.displayName = "ConversationListSkeleton";
function LightboxModal({ attachment, onClose }) {
  React20__namespace.useEffect(() => {
    const handleKeyDown = (event) => {
      if (event.key === "Escape") {
        onClose();
      }
    };
    if (attachment) {
      document.addEventListener("keydown", handleKeyDown);
      document.body.style.overflow = "hidden";
    }
    return () => {
      document.removeEventListener("keydown", handleKeyDown);
      document.body.style.overflow = "";
    };
  }, [attachment, onClose]);
  if (!attachment) return null;
  const isImage = attachment.type === "image";
  const isVideo = attachment.type === "video";
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn("fixed inset-0 z-50", "flex items-center justify-center"),
      role: "dialog",
      "aria-modal": "true",
      "aria-label": `View ${attachment.filename}`,
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          "button",
          {
            type: "button",
            className: "absolute inset-0 cursor-default bg-black/90",
            onClick: onClose,
            "aria-label": "Close lightbox"
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(
          "button",
          {
            type: "button",
            onClick: onClose,
            className: chunkOR5DRJCW_cjs.cn(
              "absolute top-4 right-4 z-10",
              "rounded-full p-2",
              "bg-white/10 text-white",
              "hover:bg-white/20",
              "focus:ring-2 focus:ring-white focus:outline-none",
              "transition-colors"
            ),
            "aria-label": "Close",
            children: /* @__PURE__ */ jsxRuntime.jsx(
              "svg",
              {
                className: "h-6 w-6",
                fill: "none",
                viewBox: "0 0 24 24",
                stroke: "currentColor",
                children: /* @__PURE__ */ jsxRuntime.jsx(
                  "path",
                  {
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M6 18L18 6M6 6l12 12"
                  }
                )
              }
            )
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "relative z-10 max-h-[90vh] max-w-[90vw]", children: [
          isImage && /* @__PURE__ */ jsxRuntime.jsx(
            "img",
            {
              src: attachment.url,
              alt: attachment.alt || attachment.filename,
              className: "max-h-[90vh] max-w-[90vw] object-contain"
            }
          ),
          isVideo && /* @__PURE__ */ jsxRuntime.jsx(
            "video",
            {
              src: attachment.url,
              controls: true,
              autoPlay: true,
              className: "max-h-[90vh] max-w-[90vw]",
              children: /* @__PURE__ */ jsxRuntime.jsx("track", { kind: "captions" })
            }
          )
        ] }),
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute bottom-4 left-1/2 -translate-x-1/2", children: /* @__PURE__ */ jsxRuntime.jsx("p", { className: "rounded-full bg-black/50 px-4 py-2 text-sm text-white", children: attachment.filename }) })
      ]
    }
  );
}
LightboxModal.displayName = "LightboxModal";
var MessageThread = React20__namespace.forwardRef(
  ({
    conversation,
    messages,
    currentUser,
    typingState,
    isLoading = false,
    hasMore = false,
    isLoadingMore = false,
    isSending = false,
    eventHandlers = {},
    showHeader = true,
    showBackButton = false,
    onBack,
    headerActions,
    placeholder = "Type a message...",
    maxMessageLength = 1600,
    showCharacterCount = false,
    showAttachmentPicker = true,
    showCameraButton = false,
    acceptedFileTypes,
    maxFileSize,
    maxAttachments,
    showAvatars = true,
    showSenderNames = false,
    groupByDate = true,
    emptyState,
    formatTimestamp,
    onError,
    className
  }, ref) => {
    const [lightboxAttachment, setLightboxAttachment] = React20__namespace.useState(null);
    const [replyTo, setReplyTo] = React20__namespace.useState(null);
    const participant = conversation?.type === "direct" ? conversation.participants.find((p) => p.id !== currentUser.id) : void 0;
    const handleAttachmentClick = (attachment, message) => {
      if (attachment.type === "image" || attachment.type === "video") {
        setLightboxAttachment(attachment);
      }
      eventHandlers.onAttachmentClick?.(attachment, message);
    };
    const handleSendMessage = async (newMessage) => {
      const messageWithReply = {
        ...newMessage,
        replyToId: replyTo?.id || newMessage.replyToId
      };
      setReplyTo(null);
      await eventHandlers.onSendMessage?.(messageWithReply);
    };
    return /* @__PURE__ */ jsxRuntime.jsxs(
      "div",
      {
        ref,
        className: chunkOR5DRJCW_cjs.cn(
          "flex h-full flex-col",
          "bg-white dark:bg-neutral-900",
          className
        ),
        children: [
          showHeader && /* @__PURE__ */ jsxRuntime.jsx(
            ConversationHeader,
            {
              conversation,
              participant,
              showBackButton,
              onBack,
              actions: headerActions
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsx(
            DragDropZone,
            {
              onFilesDropped: () => {
                onError?.("Drop files on the composer to attach them");
              },
              disabled: !showAttachmentPicker,
              className: "flex-1 overflow-hidden",
              children: /* @__PURE__ */ jsxRuntime.jsx(
                MessageList,
                {
                  messages,
                  currentUser,
                  isLoading,
                  hasMore,
                  isLoadingMore,
                  typingState,
                  showAvatars,
                  showSenderNames,
                  groupByDate,
                  onLoadMore: eventHandlers.onLoadMore,
                  onRetryMessage: eventHandlers.onRetryMessage,
                  onAttachmentClick: handleAttachmentClick,
                  emptyState,
                  formatTimestamp,
                  className: "h-full"
                }
              )
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsx(
            MessageComposer,
            {
              onSend: handleSendMessage,
              onTypingStart: eventHandlers.onTypingStart,
              onTypingStop: eventHandlers.onTypingStop,
              placeholder,
              maxLength: maxMessageLength,
              showCharacterCount,
              isSending,
              showAttachmentPicker,
              showCameraButton,
              acceptedFileTypes,
              maxFileSize,
              maxAttachments,
              onError,
              replyTo,
              onCancelReply: () => setReplyTo(null)
            }
          ),
          /* @__PURE__ */ jsxRuntime.jsx(
            LightboxModal,
            {
              attachment: lightboxAttachment,
              onClose: () => setLightboxAttachment(null)
            }
          )
        ]
      }
    );
  }
);
MessageThread.displayName = "MessageThread";
function MessagingSplitView({
  conversationList,
  messageThread,
  hasSelectedConversation = false,
  listWidth = 320,
  mobileBreakpoint = "md",
  className
}) {
  const breakpointClasses = {
    sm: "sm:flex",
    md: "md:flex",
    lg: "lg:flex"
  };
  const hideMobileClasses = {
    sm: hasSelectedConversation ? "hidden sm:block" : "block sm:block",
    md: hasSelectedConversation ? "hidden md:block" : "block md:block",
    lg: hasSelectedConversation ? "hidden lg:block" : "block lg:block"
  };
  const showMobileClasses = {
    sm: hasSelectedConversation ? "block sm:block" : "hidden sm:block",
    md: hasSelectedConversation ? "block md:block" : "hidden md:block",
    lg: hasSelectedConversation ? "block lg:block" : "hidden lg:block"
  };
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "h-full w-full",
        breakpointClasses[mobileBreakpoint],
        className
      ),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          "div",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "h-full w-full flex-shrink-0",
              "border-r border-neutral-200 dark:border-neutral-700",
              hideMobileClasses[mobileBreakpoint]
            ),
            style: {
              width: typeof listWidth === "number" ? `${listWidth}px` : listWidth
            },
            children: conversationList
          }
        ),
        /* @__PURE__ */ jsxRuntime.jsx(
          "div",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "h-full min-w-0 flex-1",
              showMobileClasses[mobileBreakpoint]
            ),
            children: messageThread
          }
        )
      ]
    }
  );
}
MessagingSplitView.displayName = "MessagingSplitView";
function useMessages(options) {
  const {
    initialMessages = [],
    currentUser,
    onSend,
    onRetry,
    onLoadMore
  } = options;
  const [messages, setMessages] = React20__namespace.useState(initialMessages);
  const [isSending, setIsSending] = React20__namespace.useState(false);
  const [isLoadingMore, setIsLoadingMore] = React20__namespace.useState(false);
  React20__namespace.useEffect(() => {
    setMessages(initialMessages);
  }, [initialMessages]);
  const addMessage = React20__namespace.useCallback((message) => {
    setMessages((prev) => {
      if (prev.some((m) => m.id === message.id)) {
        return prev;
      }
      return [...prev, message];
    });
  }, []);
  const updateMessage = React20__namespace.useCallback(
    (messageId, updates) => {
      setMessages(
        (prev) => prev.map((m) => m.id === messageId ? { ...m, ...updates } : m)
      );
    },
    []
  );
  const removeMessage = React20__namespace.useCallback((messageId) => {
    setMessages((prev) => prev.filter((m) => m.id !== messageId));
  }, []);
  const updateStatus = React20__namespace.useCallback(
    (messageId, status) => {
      updateMessage(messageId, { status });
    },
    [updateMessage]
  );
  const markAsRead = React20__namespace.useCallback(
    (messageId) => {
      updateStatus(messageId, "read");
    },
    [updateStatus]
  );
  const sendMessage = React20__namespace.useCallback(
    async (newMessage) => {
      const optimisticId = `optimistic-${Date.now()}`;
      const optimisticMessage = {
        id: optimisticId,
        type: "text",
        content: newMessage.content,
        sender: currentUser,
        timestamp: /* @__PURE__ */ new Date(),
        status: "sending",
        attachments: []
        // Would handle attachment uploads here
      };
      addMessage(optimisticMessage);
      setIsSending(true);
      try {
        if (onSend) {
          const sentMessage = await onSend(newMessage);
          setMessages(
            (prev) => prev.map((m) => m.id === optimisticId ? sentMessage : m)
          );
        } else {
          updateStatus(optimisticId, "sent");
        }
      } catch {
        updateStatus(optimisticId, "failed");
      } finally {
        setIsSending(false);
      }
    },
    [currentUser, onSend, addMessage, updateStatus]
  );
  const retryMessage = React20__namespace.useCallback(
    async (messageId) => {
      updateStatus(messageId, "sending");
      try {
        if (onRetry) {
          await onRetry(messageId);
          updateStatus(messageId, "sent");
        }
      } catch {
        updateStatus(messageId, "failed");
      }
    },
    [onRetry, updateStatus]
  );
  const loadMore = React20__namespace.useCallback(async () => {
    if (isLoadingMore || !onLoadMore) return;
    setIsLoadingMore(true);
    try {
      const olderMessages = await onLoadMore();
      setMessages((prev) => [...olderMessages, ...prev]);
    } finally {
      setIsLoadingMore(false);
    }
  }, [isLoadingMore, onLoadMore]);
  return {
    messages,
    addMessage,
    updateMessage,
    removeMessage,
    sendMessage,
    retryMessage,
    loadMore,
    isSending,
    isLoadingMore,
    markAsRead,
    updateStatus
  };
}
function useTypingIndicator(options = {}) {
  const {
    typingParticipants: initialParticipants = [],
    debounceTime = 2e3,
    onTypingStart,
    onTypingStop
  } = options;
  const [participants, setParticipants] = React20__namespace.useState(initialParticipants);
  const [isLocalTyping, setIsLocalTyping] = React20__namespace.useState(false);
  const typingTimeoutRef = React20__namespace.useRef(null);
  React20__namespace.useEffect(() => {
    setParticipants(initialParticipants);
  }, [initialParticipants]);
  const startTyping = React20__namespace.useCallback(() => {
    if (!isLocalTyping) {
      setIsLocalTyping(true);
      onTypingStart?.();
    }
    if (typingTimeoutRef.current) {
      clearTimeout(typingTimeoutRef.current);
    }
    typingTimeoutRef.current = setTimeout(() => {
      setIsLocalTyping(false);
      onTypingStop?.();
    }, debounceTime);
  }, [isLocalTyping, debounceTime, onTypingStart, onTypingStop]);
  const stopTyping = React20__namespace.useCallback(() => {
    if (typingTimeoutRef.current) {
      clearTimeout(typingTimeoutRef.current);
    }
    setIsLocalTyping(false);
    onTypingStop?.();
  }, [onTypingStop]);
  React20__namespace.useEffect(() => {
    return () => {
      if (typingTimeoutRef.current) {
        clearTimeout(typingTimeoutRef.current);
      }
    };
  }, []);
  const typingState = React20__namespace.useMemo(
    () => ({
      participants,
      lastUpdated: /* @__PURE__ */ new Date()
    }),
    [participants]
  );
  return {
    typingState,
    startTyping,
    stopTyping,
    setTypingParticipants: setParticipants
  };
}
function useMessageScroll(options) {
  const { messages, currentUserId, threshold = 100 } = options;
  const scrollContainerRef = React20__namespace.useRef(null);
  const bottomRef = React20__namespace.useRef(null);
  const [isScrolledUp, setIsScrolledUp] = React20__namespace.useState(false);
  const prevMessageCountRef = React20__namespace.useRef(messages.length);
  React20__namespace.useEffect(() => {
    const container = scrollContainerRef.current;
    if (!container) return;
    const handleScroll = () => {
      const { scrollTop, scrollHeight, clientHeight } = container;
      const isAtBottom = scrollHeight - scrollTop - clientHeight < threshold;
      setIsScrolledUp(!isAtBottom);
    };
    container.addEventListener("scroll", handleScroll);
    return () => container.removeEventListener("scroll", handleScroll);
  }, [threshold]);
  const scrollToBottom = React20__namespace.useCallback((smooth = true) => {
    bottomRef.current?.scrollIntoView({
      behavior: smooth ? "smooth" : "auto"
    });
  }, []);
  React20__namespace.useEffect(() => {
    const messageCountChanged = messages.length !== prevMessageCountRef.current;
    prevMessageCountRef.current = messages.length;
    if (!messageCountChanged) return;
    const lastMessage = messages[messages.length - 1];
    const isOutgoing = lastMessage?.sender.id === currentUserId;
    if (isOutgoing || !isScrolledUp) {
      scrollToBottom(true);
    }
  }, [messages, currentUserId, isScrolledUp, scrollToBottom]);
  return {
    scrollContainerRef,
    bottomRef,
    isScrolledUp,
    scrollToBottom
  };
}
function useReadReceipts(options) {
  const { currentUserId, onMarkRead, threshold = 0.5 } = options;
  const observerRef = React20__namespace.useRef(null);
  const observedMessagesRef = React20__namespace.useRef(/* @__PURE__ */ new Set());
  React20__namespace.useEffect(() => {
    observerRef.current = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const messageId = entry.target.getAttribute("data-message-id");
            if (messageId && !observedMessagesRef.current.has(messageId)) {
              observedMessagesRef.current.add(messageId);
              onMarkRead?.(messageId);
            }
          }
        });
      },
      { threshold }
    );
    return () => {
      observerRef.current?.disconnect();
    };
  }, [onMarkRead, threshold]);
  const observeMessage = React20__namespace.useCallback(
    (element, message) => {
      if (!element || !observerRef.current) return;
      if (message.sender.id !== currentUserId && message.status !== "read" && !observedMessagesRef.current.has(message.id)) {
        element.setAttribute("data-message-id", message.id);
        observerRef.current.observe(element);
      }
    },
    [currentUserId]
  );
  return { observeMessage };
}
var SidebarContext = React20.createContext(null);
function SidebarProvider({
  children,
  defaultCollapsed = false,
  storageKey = "sidebar-collapsed",
  persistCollapsed = true,
  defaultExpandedGroup = null,
  mobileBreakpoint = "(max-width: 1023px)"
}) {
  const isMobileViewport = chunkR4DM4635_cjs.useMediaQuery(mobileBreakpoint);
  const [isCollapsed, setIsCollapsed] = React20.useState(() => {
    if (typeof window !== "undefined" && persistCollapsed) {
      const stored = localStorage.getItem(storageKey);
      if (stored !== null) {
        return stored === "true";
      }
    }
    return defaultCollapsed;
  });
  const [isMobileOpen, setIsMobileOpen] = React20.useState(false);
  const [expandedGroup, setExpandedGroup] = React20.useState(
    defaultExpandedGroup
  );
  React20.useEffect(() => {
    if (persistCollapsed && typeof window !== "undefined") {
      localStorage.setItem(storageKey, String(isCollapsed));
    }
  }, [isCollapsed, persistCollapsed, storageKey]);
  React20.useEffect(() => {
    if (!isMobileViewport && isMobileOpen) {
      setIsMobileOpen(false);
    }
  }, [isMobileViewport, isMobileOpen]);
  const toggleCollapsed = React20.useCallback(() => {
    setIsCollapsed((prev) => !prev);
  }, []);
  const setCollapsed = React20.useCallback((collapsed) => {
    setIsCollapsed(collapsed);
  }, []);
  const openMobile = React20.useCallback(() => {
    setIsMobileOpen(true);
  }, []);
  const closeMobile = React20.useCallback(() => {
    setIsMobileOpen(false);
  }, []);
  const toggleMobile = React20.useCallback(() => {
    setIsMobileOpen((prev) => !prev);
  }, []);
  const toggleGroup = React20.useCallback((group) => {
    setExpandedGroup((prev) => prev === group ? null : group);
  }, []);
  const contextValue = React20.useMemo(
    () => ({
      isCollapsed,
      toggleCollapsed,
      setCollapsed,
      isMobileOpen,
      openMobile,
      closeMobile,
      toggleMobile,
      isMobileViewport,
      expandedGroup,
      setExpandedGroup,
      toggleGroup
    }),
    [
      isCollapsed,
      toggleCollapsed,
      setCollapsed,
      isMobileOpen,
      openMobile,
      closeMobile,
      toggleMobile,
      isMobileViewport,
      expandedGroup,
      toggleGroup
    ]
  );
  return /* @__PURE__ */ jsxRuntime.jsx(SidebarContext.Provider, { value: contextValue, children });
}
function useSidebar() {
  const context = React20.useContext(SidebarContext);
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider");
  }
  return context;
}
var ChevronLeftIcon = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-4 w-4",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M15 19l-7-7 7-7" })
  }
);
var ChevronRightIcon = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-4 w-4",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M9 5l7 7-7 7" })
  }
);
var ChevronDownIcon = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-3 w-3",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M19 9l-7 7-7-7" })
  }
);
var XIcon2 = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-5 w-5",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx(
      "path",
      {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M6 18L18 6M6 6l12 12"
      }
    )
  }
);
var MenuIcon = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-5 w-5",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx(
      "path",
      {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M4 6h16M4 12h16M4 18h16"
      }
    )
  }
);
var SearchIcon3 = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-4 w-4",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx(
      "path",
      {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
      }
    )
  }
);
function Sidebar({
  children,
  className,
  expandedWidth = "280px",
  collapsedWidth = "80px",
  style,
  "data-testid": testId = "sidebar"
}) {
  const { isCollapsed, isMobileOpen, closeMobile, isMobileViewport } = useSidebar();
  const width = isMobileViewport ? expandedWidth : isCollapsed ? collapsedWidth : expandedWidth;
  return /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
    isMobileViewport && isMobileOpen && /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        className: "fixed inset-0 z-40 bg-black/50 lg:hidden",
        onClick: closeMobile,
        "aria-hidden": "true"
      }
    ),
    /* @__PURE__ */ jsxRuntime.jsx(
      "nav",
      {
        "data-testid": testId,
        className: chunkOR5DRJCW_cjs.cn(
          "flex h-screen flex-col",
          "border-r border-neutral-200 bg-white dark:border-neutral-700 dark:bg-neutral-900",
          "transition-all duration-300 ease-in-out",
          // Mobile positioning
          isMobileViewport && "fixed top-0 left-0 z-50",
          isMobileViewport && (isMobileOpen ? "translate-x-0" : "-translate-x-full"),
          // Desktop positioning
          !isMobileViewport && "relative",
          className
        ),
        style: {
          width,
          minWidth: width,
          ...style
        },
        "aria-label": "Main navigation",
        children
      }
    )
  ] });
}
function SidebarHeader({
  children,
  className,
  showMobileClose = true
}) {
  const { closeMobile, isMobileViewport, isCollapsed } = useSidebar();
  const showCollapsed = !isMobileViewport && isCollapsed;
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "flex items-center border-b border-neutral-200 py-4 dark:border-neutral-700",
        showCollapsed ? "justify-center px-2" : "justify-between px-4",
        className
      ),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx(
          "div",
          {
            className: chunkOR5DRJCW_cjs.cn(
              "min-w-0",
              showCollapsed ? "flex justify-center" : "flex-1"
            ),
            children
          }
        ),
        showMobileClose && isMobileViewport && /* @__PURE__ */ jsxRuntime.jsx(
          "button",
          {
            onClick: closeMobile,
            className: "-mr-2 rounded-lg p-2 text-neutral-500 transition-colors hover:bg-neutral-100 lg:hidden dark:hover:bg-neutral-800",
            "aria-label": "Close navigation",
            children: /* @__PURE__ */ jsxRuntime.jsx(XIcon2, {})
          }
        )
      ]
    }
  );
}
function SidebarFooter({
  children,
  className
}) {
  const { isCollapsed, isMobileViewport } = useSidebar();
  const showCollapsed = !isMobileViewport && isCollapsed;
  return /* @__PURE__ */ jsxRuntime.jsx(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "mt-auto border-t border-neutral-200 py-4 dark:border-neutral-700",
        showCollapsed ? "flex justify-center px-2" : "px-4",
        className
      ),
      children
    }
  );
}
function SidebarContent({
  children,
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsx("div", { className: chunkOR5DRJCW_cjs.cn("flex-1 overflow-y-auto py-4", className), children });
}
function SidebarNav({
  children,
  className
}) {
  return /* @__PURE__ */ jsxRuntime.jsx("nav", { className: chunkOR5DRJCW_cjs.cn("space-y-1 px-2", className), children });
}
function SidebarNavGroup({
  label,
  icon,
  children,
  defaultExpanded = false,
  groupId,
  className
}) {
  const { isCollapsed, isMobileViewport, expandedGroup, toggleGroup } = useSidebar();
  const showCollapsed = !isMobileViewport && isCollapsed;
  const isExpanded = groupId ? expandedGroup === groupId : defaultExpanded;
  const [localExpanded, setLocalExpanded] = React20.useState(defaultExpanded);
  const effectiveExpanded = groupId ? isExpanded : localExpanded;
  const handleToggle = React20.useCallback(() => {
    if (groupId) {
      toggleGroup(groupId);
    } else {
      setLocalExpanded((prev) => !prev);
    }
  }, [groupId, toggleGroup]);
  return /* @__PURE__ */ jsxRuntime.jsxs("div", { className: chunkOR5DRJCW_cjs.cn("mb-2", className), children: [
    /* @__PURE__ */ jsxRuntime.jsxs(
      "button",
      {
        onClick: handleToggle,
        className: chunkOR5DRJCW_cjs.cn(
          "flex w-full items-center rounded-lg px-3 py-2 text-sm font-semibold",
          "text-neutral-700 dark:text-neutral-300",
          "transition-colors hover:bg-neutral-100 dark:hover:bg-neutral-800",
          showCollapsed && "justify-center"
        ),
        title: showCollapsed ? label : void 0,
        children: [
          icon && /* @__PURE__ */ jsxRuntime.jsx(
            "span",
            {
              className: chunkOR5DRJCW_cjs.cn(
                "h-5 w-5 flex-shrink-0 text-neutral-500 dark:text-neutral-400",
                !showCollapsed && "mr-3"
              ),
              children: icon
            }
          ),
          !showCollapsed && /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
            /* @__PURE__ */ jsxRuntime.jsx("span", { className: "flex-1 truncate text-left", children: label }),
            /* @__PURE__ */ jsxRuntime.jsx(
              "span",
              {
                className: chunkOR5DRJCW_cjs.cn(
                  "ml-2 flex-shrink-0 transition-transform duration-200",
                  effectiveExpanded && "rotate-180"
                ),
                children: /* @__PURE__ */ jsxRuntime.jsx(ChevronDownIcon, {})
              }
            )
          ] })
        ]
      }
    ),
    !showCollapsed && /* @__PURE__ */ jsxRuntime.jsx(
      "div",
      {
        className: chunkOR5DRJCW_cjs.cn(
          "overflow-hidden transition-all duration-300",
          effectiveExpanded ? "mt-1 max-h-[1000px] opacity-100" : "max-h-0 opacity-0"
        ),
        children: /* @__PURE__ */ jsxRuntime.jsx("div", { className: "pl-2", children })
      }
    )
  ] });
}
function SidebarNavItem({
  label,
  icon,
  isActive = false,
  onClick,
  href,
  badge,
  disabled = false,
  className,
  "data-testid": testId
}) {
  const { isCollapsed, isMobileViewport, closeMobile } = useSidebar();
  const showCollapsed = !isMobileViewport && isCollapsed;
  const handleClick = React20.useCallback(() => {
    if (disabled) return;
    onClick?.();
    if (isMobileViewport) {
      closeMobile();
    }
  }, [disabled, onClick, isMobileViewport, closeMobile]);
  const content = /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
    icon && /* @__PURE__ */ jsxRuntime.jsx(
      "span",
      {
        className: chunkOR5DRJCW_cjs.cn(
          "h-5 w-5 flex-shrink-0",
          isActive ? "text-primary-600 dark:text-primary-400" : "text-neutral-500 dark:text-neutral-400",
          !showCollapsed && "mr-3"
        ),
        children: icon
      }
    ),
    !showCollapsed && /* @__PURE__ */ jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [
      /* @__PURE__ */ jsxRuntime.jsx("span", { className: "flex-1 truncate text-left", children: label }),
      badge && /* @__PURE__ */ jsxRuntime.jsx(
        "span",
        {
          className: chunkOR5DRJCW_cjs.cn(
            "ml-2 rounded-full px-2 py-0.5 text-xs font-medium",
            isActive ? "bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300" : "bg-neutral-100 text-neutral-600 dark:bg-neutral-700 dark:text-neutral-400"
          ),
          children: badge
        }
      )
    ] })
  ] });
  const baseClasses = chunkOR5DRJCW_cjs.cn(
    "flex items-center w-full px-3 py-2 text-sm rounded-lg transition-colors",
    isActive ? "bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 font-medium" : "text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-800",
    disabled && "opacity-50 cursor-not-allowed",
    showCollapsed && "justify-center",
    className
  );
  if (href && !disabled) {
    return /* @__PURE__ */ jsxRuntime.jsx(
      "a",
      {
        href,
        onClick: handleClick,
        "data-testid": testId,
        className: baseClasses,
        title: showCollapsed ? label : void 0,
        children: content
      }
    );
  }
  return /* @__PURE__ */ jsxRuntime.jsx(
    "button",
    {
      onClick: handleClick,
      disabled,
      "data-testid": testId,
      className: baseClasses,
      title: showCollapsed ? label : void 0,
      children: content
    }
  );
}
function SidebarToggle({
  className,
  position = "inline"
}) {
  const { isCollapsed, toggleCollapsed, isMobileViewport } = useSidebar();
  if (isMobileViewport) return /* @__PURE__ */ jsxRuntime.jsx(jsxRuntime.Fragment, {});
  const button = /* @__PURE__ */ jsxRuntime.jsx(
    "button",
    {
      onClick: toggleCollapsed,
      className: chunkOR5DRJCW_cjs.cn(
        "rounded-lg p-2 text-neutral-500 dark:text-neutral-400",
        "transition-colors hover:bg-neutral-100 dark:hover:bg-neutral-800",
        "focus:ring-primary-500 focus:ring-2 focus:outline-none",
        className
      ),
      "aria-label": isCollapsed ? "Expand sidebar" : "Collapse sidebar",
      children: isCollapsed ? /* @__PURE__ */ jsxRuntime.jsx(ChevronRightIcon, {}) : /* @__PURE__ */ jsxRuntime.jsx(ChevronLeftIcon, {})
    }
  );
  if (position === "floating") {
    return /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute top-6 -right-3 z-10 rounded-full border border-neutral-200 bg-white shadow-md dark:border-neutral-700 dark:bg-neutral-900", children: button });
  }
  return button;
}
function SidebarMobileToggle({
  className,
  icon
}) {
  const { openMobile, isMobileViewport } = useSidebar();
  if (!isMobileViewport) return /* @__PURE__ */ jsxRuntime.jsx(jsxRuntime.Fragment, {});
  return /* @__PURE__ */ jsxRuntime.jsx(
    "button",
    {
      onClick: openMobile,
      className: chunkOR5DRJCW_cjs.cn(
        "rounded-lg p-2 text-neutral-500 dark:text-neutral-400",
        "transition-colors hover:bg-neutral-100 dark:hover:bg-neutral-800",
        "focus:ring-primary-500 focus:ring-2 focus:outline-none",
        className
      ),
      "aria-label": "Open navigation",
      children: icon ?? /* @__PURE__ */ jsxRuntime.jsx(MenuIcon, {})
    }
  );
}
function SidebarSearch({
  value,
  onChange,
  placeholder = "Search...",
  shortcutHint = "/",
  className,
  "data-testid": testId = "sidebar-search"
}) {
  const { isCollapsed, isMobileViewport, setCollapsed } = useSidebar();
  const inputRef = React20.useRef(null);
  const showCollapsed = !isMobileViewport && isCollapsed;
  React20.useEffect(() => {
    const handleKeyDown = (e) => {
      const target = e.target;
      if (target.tagName === "INPUT" || target.tagName === "TEXTAREA" || target.isContentEditable) {
        return;
      }
      if (e.key === "/") {
        e.preventDefault();
        if (showCollapsed) {
          setCollapsed(false);
          setTimeout(() => inputRef.current?.focus(), 350);
        } else {
          inputRef.current?.focus();
        }
      }
    };
    document.addEventListener("keydown", handleKeyDown);
    return () => document.removeEventListener("keydown", handleKeyDown);
  }, [showCollapsed, setCollapsed]);
  if (showCollapsed) return /* @__PURE__ */ jsxRuntime.jsx(jsxRuntime.Fragment, {});
  return /* @__PURE__ */ jsxRuntime.jsx("div", { className: chunkOR5DRJCW_cjs.cn("px-3 py-2", className), children: /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "relative", children: [
    /* @__PURE__ */ jsxRuntime.jsx("div", { className: "absolute top-1/2 left-3 -translate-y-1/2 text-neutral-400", children: /* @__PURE__ */ jsxRuntime.jsx(SearchIcon3, {}) }),
    /* @__PURE__ */ jsxRuntime.jsx(
      "input",
      {
        ref: inputRef,
        type: "text",
        value,
        onChange: (e) => onChange(e.target.value),
        placeholder: `${placeholder} (${shortcutHint})`,
        "data-testid": testId,
        className: chunkOR5DRJCW_cjs.cn(
          "w-full rounded-lg py-2 pr-4 pl-10 text-sm",
          "border-transparent bg-neutral-100 dark:bg-neutral-800",
          "text-neutral-900 placeholder-neutral-400 dark:text-white dark:placeholder-neutral-500",
          "focus:ring-primary-500 focus:bg-white focus:ring-2 focus:outline-none dark:focus:bg-neutral-700",
          "transition-colors"
        )
      }
    )
  ] }) });
}
var CheckIcon = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-5 w-5",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M5 13l4 4L19 7" })
  }
);
var XCircleIcon = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-5 w-5",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx(
      "path",
      {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
      }
    )
  }
);
var ExclamationIcon = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-5 w-5",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx(
      "path",
      {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
      }
    )
  }
);
var InfoIcon = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-5 w-5",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx(
      "path",
      {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
      }
    )
  }
);
var XIcon3 = () => /* @__PURE__ */ jsxRuntime.jsx(
  "svg",
  {
    className: "h-4 w-4",
    fill: "none",
    viewBox: "0 0 24 24",
    stroke: "currentColor",
    strokeWidth: 2,
    children: /* @__PURE__ */ jsxRuntime.jsx(
      "path",
      {
        strokeLinecap: "round",
        strokeLinejoin: "round",
        d: "M6 18L18 6M6 6l12 12"
      }
    )
  }
);
var variantStyles = {
  success: {
    container: "bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800 text-green-800 dark:text-green-200",
    icon: "text-green-500 dark:text-green-400"
  },
  error: {
    container: "bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800 text-red-800 dark:text-red-200",
    icon: "text-red-500 dark:text-red-400"
  },
  warning: {
    container: "bg-amber-50 dark:bg-amber-900/30 border-amber-200 dark:border-amber-800 text-amber-800 dark:text-amber-200",
    icon: "text-amber-500 dark:text-amber-400"
  },
  info: {
    container: "bg-primary-50 dark:bg-primary-900/30 border-primary-200 dark:border-primary-800 text-primary-800 dark:text-primary-200",
    icon: "text-primary-500 dark:text-primary-400"
  }
};
var defaultIcons = {
  success: /* @__PURE__ */ jsxRuntime.jsx(CheckIcon, {}),
  error: /* @__PURE__ */ jsxRuntime.jsx(XCircleIcon, {}),
  warning: /* @__PURE__ */ jsxRuntime.jsx(ExclamationIcon, {}),
  info: /* @__PURE__ */ jsxRuntime.jsx(InfoIcon, {})
};
function Toast({
  title,
  message,
  variant = "info",
  dismissible = true,
  action,
  icon,
  onClose
}) {
  const styles = variantStyles[variant];
  const displayIcon = icon ?? defaultIcons[variant];
  return /* @__PURE__ */ jsxRuntime.jsxs(
    "div",
    {
      role: "alert",
      className: chunkOR5DRJCW_cjs.cn(
        "flex items-start gap-3 rounded-lg border p-4 shadow-lg",
        "max-w-[420px] min-w-[300px]",
        "animate-slide-in-right",
        styles.container
      ),
      children: [
        /* @__PURE__ */ jsxRuntime.jsx("div", { className: chunkOR5DRJCW_cjs.cn("flex-shrink-0", styles.icon), children: displayIcon }),
        /* @__PURE__ */ jsxRuntime.jsxs("div", { className: "min-w-0 flex-1", children: [
          title && /* @__PURE__ */ jsxRuntime.jsx("p", { className: "mb-1 text-sm font-semibold", children: title }),
          /* @__PURE__ */ jsxRuntime.jsx("div", { className: "text-sm opacity-90", children: message }),
          action && /* @__PURE__ */ jsxRuntime.jsx(
            "button",
            {
              onClick: action.onClick,
              className: "mt-2 rounded text-sm font-medium underline hover:no-underline focus:ring-2 focus:ring-current focus:ring-offset-2 focus:outline-none",
              children: action.label
            }
          )
        ] }),
        dismissible && /* @__PURE__ */ jsxRuntime.jsx(
          "button",
          {
            onClick: onClose,
            className: "flex-shrink-0 rounded p-1 transition-colors hover:bg-black/10 focus:ring-2 focus:ring-current focus:outline-none dark:hover:bg-white/10",
            "aria-label": "Dismiss notification",
            children: /* @__PURE__ */ jsxRuntime.jsx(XIcon3, {})
          }
        )
      ]
    }
  );
}
var positionStyles = {
  "top-left": "top-4 left-4 items-start",
  "top-center": "top-4 left-1/2 -translate-x-1/2 items-center",
  "top-right": "top-4 right-4 items-end",
  "bottom-left": "bottom-4 left-4 items-start",
  "bottom-center": "bottom-4 left-1/2 -translate-x-1/2 items-center",
  "bottom-right": "bottom-4 right-4 items-end"
};
function ToastContainer({
  toasts,
  position = "bottom-right",
  onDismiss
}) {
  if (toasts.length === 0) return null;
  return /* @__PURE__ */ jsxRuntime.jsx(
    "div",
    {
      className: chunkOR5DRJCW_cjs.cn(
        "pointer-events-none fixed z-50 flex flex-col gap-2",
        positionStyles[position]
      ),
      "aria-live": "polite",
      "aria-atomic": "true",
      children: toasts.map((toast) => /* @__PURE__ */ jsxRuntime.jsx("div", { className: "pointer-events-auto", children: /* @__PURE__ */ jsxRuntime.jsx(Toast, { ...toast, onClose: () => onDismiss(toast.id) }) }, toast.id))
    }
  );
}
var ToastContext = React20.createContext(null);
var toastIdCounter = 0;
function generateToastId() {
  return `toast-${++toastIdCounter}-${Date.now()}`;
}
function ToastProvider({
  children,
  maxToasts = 5,
  defaultDuration = 5e3
}) {
  const [toasts, setToasts] = React20.useState([]);
  const dismiss = React20.useCallback((id) => {
    setToasts((prev) => {
      const toast2 = prev.find((t) => t.id === id);
      if (toast2?.onDismiss) {
        toast2.onDismiss();
      }
      return prev.filter((t) => t.id !== id);
    });
  }, []);
  const dismissAll = React20.useCallback(() => {
    setToasts((prev) => {
      prev.forEach((t) => t.onDismiss?.());
      return [];
    });
  }, []);
  const toast = React20.useCallback(
    (options) => {
      const id = generateToastId();
      const duration = options.duration ?? defaultDuration;
      const newToast = {
        ...options,
        id,
        variant: options.variant ?? "info",
        dismissible: options.dismissible ?? true,
        duration
      };
      setToasts((prev) => {
        const updated = [...prev, newToast];
        if (updated.length > maxToasts) {
          const removed = updated.slice(0, updated.length - maxToasts);
          removed.forEach((t) => t.onDismiss?.());
          return updated.slice(-maxToasts);
        }
        return updated;
      });
      if (duration > 0) {
        setTimeout(() => dismiss(id), duration);
      }
      return id;
    },
    [maxToasts, defaultDuration, dismiss]
  );
  const success = React20.useCallback(
    (message, options) => {
      return toast({ ...options, message, variant: "success" });
    },
    [toast]
  );
  const error = React20.useCallback(
    (message, options) => {
      return toast({
        ...options,
        message,
        variant: "error",
        duration: options?.duration ?? 7e3
        // Errors stay longer by default
      });
    },
    [toast]
  );
  const warning = React20.useCallback(
    (message, options) => {
      return toast({ ...options, message, variant: "warning" });
    },
    [toast]
  );
  const info = React20.useCallback(
    (message, options) => {
      return toast({ ...options, message, variant: "info" });
    },
    [toast]
  );
  const contextValue = React20.useMemo(
    () => ({
      toasts,
      toast,
      success,
      error,
      warning,
      info,
      dismiss,
      dismissAll
    }),
    [toasts, toast, success, error, warning, info, dismiss, dismissAll]
  );
  return /* @__PURE__ */ jsxRuntime.jsx(ToastContext.Provider, { value: contextValue, children });
}
function useToast() {
  const context = React20.useContext(ToastContext);
  if (!context) {
    throw new Error("useToast must be used within a ToastProvider");
  }
  return context;
}

Object.defineProperty(exports, "ThemeProvider", {
  enumerable: true,
  get: function () { return chunkVDMQCSXT_cjs.ThemeProvider; }
});
Object.defineProperty(exports, "ThemeProviderContext", {
  enumerable: true,
  get: function () { return chunkVDMQCSXT_cjs.ThemeProviderContext; }
});
Object.defineProperty(exports, "ThemeToggle", {
  enumerable: true,
  get: function () { return chunkVDMQCSXT_cjs.ThemeToggle; }
});
Object.defineProperty(exports, "themeToggleIconVariants", {
  enumerable: true,
  get: function () { return chunkVDMQCSXT_cjs.themeToggleIconVariants; }
});
Object.defineProperty(exports, "themeToggleVariants", {
  enumerable: true,
  get: function () { return chunkVDMQCSXT_cjs.themeToggleVariants; }
});
Object.defineProperty(exports, "useThemeContext", {
  enumerable: true,
  get: function () { return chunkVDMQCSXT_cjs.useThemeContext; }
});
Object.defineProperty(exports, "Tooltip", {
  enumerable: true,
  get: function () { return chunkBXK5TNJE_cjs.Tooltip; }
});
Object.defineProperty(exports, "VisuallyHidden", {
  enumerable: true,
  get: function () { return chunkZJCPW6MS_cjs.VisuallyHidden; }
});
Object.defineProperty(exports, "brands", {
  enumerable: true,
  get: function () { return chunk6DP6RKUA_cjs.brands; }
});
Object.defineProperty(exports, "miewebBrand", {
  enumerable: true,
  get: function () { return chunkS6UNPMAS_cjs.miewebBrand; }
});
Object.defineProperty(exports, "wagglelineBrand", {
  enumerable: true,
  get: function () { return chunkSWV5E75F_cjs.wagglelineBrand; }
});
Object.defineProperty(exports, "webchartBrand", {
  enumerable: true,
  get: function () { return chunkZ3TFPXVN_cjs.webchartBrand; }
});
Object.defineProperty(exports, "createBrandPreset", {
  enumerable: true,
  get: function () { return chunkFFJVCQ5R_cjs.createBrandPreset; }
});
Object.defineProperty(exports, "generateBrandCSS", {
  enumerable: true,
  get: function () { return chunkFFJVCQ5R_cjs.generateBrandCSS; }
});
Object.defineProperty(exports, "generateTailwindTheme", {
  enumerable: true,
  get: function () { return chunkFFJVCQ5R_cjs.generateTailwindTheme; }
});
Object.defineProperty(exports, "bluehiveBrand", {
  enumerable: true,
  get: function () { return chunk4LNS5QDP_cjs.bluehiveBrand; }
});
Object.defineProperty(exports, "defaultBrand", {
  enumerable: true,
  get: function () { return chunkO5HS7ZND_cjs.defaultBrand; }
});
Object.defineProperty(exports, "enterpriseHealthBrand", {
  enumerable: true,
  get: function () { return chunkP52GA3GJ_cjs.enterpriseHealthBrand; }
});
Object.defineProperty(exports, "Select", {
  enumerable: true,
  get: function () { return chunkLEE3NMNP_cjs.Select; }
});
Object.defineProperty(exports, "selectTriggerVariants", {
  enumerable: true,
  get: function () { return chunkLEE3NMNP_cjs.selectTriggerVariants; }
});
Object.defineProperty(exports, "Skeleton", {
  enumerable: true,
  get: function () { return chunkN3QTYHRZ_cjs.Skeleton; }
});
Object.defineProperty(exports, "SkeletonCard", {
  enumerable: true,
  get: function () { return chunkN3QTYHRZ_cjs.SkeletonCard; }
});
Object.defineProperty(exports, "SkeletonTable", {
  enumerable: true,
  get: function () { return chunkN3QTYHRZ_cjs.SkeletonTable; }
});
Object.defineProperty(exports, "SkeletonText", {
  enumerable: true,
  get: function () { return chunkN3QTYHRZ_cjs.SkeletonText; }
});
Object.defineProperty(exports, "skeletonVariants", {
  enumerable: true,
  get: function () { return chunkN3QTYHRZ_cjs.skeletonVariants; }
});
Object.defineProperty(exports, "FullPageSpinner", {
  enumerable: true,
  get: function () { return chunkJYMQJ32S_cjs.FullPageSpinner; }
});
Object.defineProperty(exports, "Spinner", {
  enumerable: true,
  get: function () { return chunkJYMQJ32S_cjs.Spinner; }
});
Object.defineProperty(exports, "SpinnerWithLabel", {
  enumerable: true,
  get: function () { return chunkJYMQJ32S_cjs.SpinnerWithLabel; }
});
Object.defineProperty(exports, "spinnerVariants", {
  enumerable: true,
  get: function () { return chunkJYMQJ32S_cjs.spinnerVariants; }
});
Object.defineProperty(exports, "Switch", {
  enumerable: true,
  get: function () { return chunkEXDNFGI7_cjs.Switch; }
});
Object.defineProperty(exports, "switchThumbVariants", {
  enumerable: true,
  get: function () { return chunkEXDNFGI7_cjs.switchThumbVariants; }
});
Object.defineProperty(exports, "switchTrackVariants", {
  enumerable: true,
  get: function () { return chunkEXDNFGI7_cjs.switchTrackVariants; }
});
Object.defineProperty(exports, "Table", {
  enumerable: true,
  get: function () { return chunkLZEY55QZ_cjs.Table; }
});
Object.defineProperty(exports, "TableBody", {
  enumerable: true,
  get: function () { return chunkLZEY55QZ_cjs.TableBody; }
});
Object.defineProperty(exports, "TableCaption", {
  enumerable: true,
  get: function () { return chunkLZEY55QZ_cjs.TableCaption; }
});
Object.defineProperty(exports, "TableCell", {
  enumerable: true,
  get: function () { return chunkLZEY55QZ_cjs.TableCell; }
});
Object.defineProperty(exports, "TableFooter", {
  enumerable: true,
  get: function () { return chunkLZEY55QZ_cjs.TableFooter; }
});
Object.defineProperty(exports, "TableHead", {
  enumerable: true,
  get: function () { return chunkLZEY55QZ_cjs.TableHead; }
});
Object.defineProperty(exports, "TableHeader", {
  enumerable: true,
  get: function () { return chunkLZEY55QZ_cjs.TableHeader; }
});
Object.defineProperty(exports, "TableRow", {
  enumerable: true,
  get: function () { return chunkLZEY55QZ_cjs.TableRow; }
});
Object.defineProperty(exports, "Tabs", {
  enumerable: true,
  get: function () { return chunkORUPC5TV_cjs.Tabs; }
});
Object.defineProperty(exports, "TabsContent", {
  enumerable: true,
  get: function () { return chunkORUPC5TV_cjs.TabsContent; }
});
Object.defineProperty(exports, "TabsList", {
  enumerable: true,
  get: function () { return chunkORUPC5TV_cjs.TabsList; }
});
Object.defineProperty(exports, "TabsTrigger", {
  enumerable: true,
  get: function () { return chunkORUPC5TV_cjs.TabsTrigger; }
});
Object.defineProperty(exports, "tabsListVariants", {
  enumerable: true,
  get: function () { return chunkORUPC5TV_cjs.tabsListVariants; }
});
Object.defineProperty(exports, "tabsTriggerVariants", {
  enumerable: true,
  get: function () { return chunkORUPC5TV_cjs.tabsTriggerVariants; }
});
Object.defineProperty(exports, "SmallMuted", {
  enumerable: true,
  get: function () { return chunkQDGZBDBI_cjs.SmallMuted; }
});
Object.defineProperty(exports, "Text", {
  enumerable: true,
  get: function () { return chunkQDGZBDBI_cjs.Text; }
});
Object.defineProperty(exports, "textVariants", {
  enumerable: true,
  get: function () { return chunkQDGZBDBI_cjs.textVariants; }
});
Object.defineProperty(exports, "Textarea", {
  enumerable: true,
  get: function () { return chunkB7YGVKTE_cjs.Textarea; }
});
Object.defineProperty(exports, "textareaVariants", {
  enumerable: true,
  get: function () { return chunkB7YGVKTE_cjs.textareaVariants; }
});
Object.defineProperty(exports, "Modal", {
  enumerable: true,
  get: function () { return chunkNH2JVQ6V_cjs.Modal; }
});
Object.defineProperty(exports, "ModalBody", {
  enumerable: true,
  get: function () { return chunkNH2JVQ6V_cjs.ModalBody; }
});
Object.defineProperty(exports, "ModalClose", {
  enumerable: true,
  get: function () { return chunkNH2JVQ6V_cjs.ModalClose; }
});
Object.defineProperty(exports, "ModalFooter", {
  enumerable: true,
  get: function () { return chunkNH2JVQ6V_cjs.ModalFooter; }
});
Object.defineProperty(exports, "ModalHeader", {
  enumerable: true,
  get: function () { return chunkNH2JVQ6V_cjs.ModalHeader; }
});
Object.defineProperty(exports, "ModalTitle", {
  enumerable: true,
  get: function () { return chunkNH2JVQ6V_cjs.ModalTitle; }
});
Object.defineProperty(exports, "modalContentVariants", {
  enumerable: true,
  get: function () { return chunkNH2JVQ6V_cjs.modalContentVariants; }
});
Object.defineProperty(exports, "modalOverlayVariants", {
  enumerable: true,
  get: function () { return chunkNH2JVQ6V_cjs.modalOverlayVariants; }
});
Object.defineProperty(exports, "Pagination", {
  enumerable: true,
  get: function () { return chunkPF3XWKE5_cjs.Pagination; }
});
Object.defineProperty(exports, "SimplePagination", {
  enumerable: true,
  get: function () { return chunkPF3XWKE5_cjs.SimplePagination; }
});
Object.defineProperty(exports, "paginationButtonVariants", {
  enumerable: true,
  get: function () { return chunkPF3XWKE5_cjs.paginationButtonVariants; }
});
Object.defineProperty(exports, "PhoneInput", {
  enumerable: true,
  get: function () { return chunk43WUKHJZ_cjs.PhoneInput; }
});
Object.defineProperty(exports, "CircularProgress", {
  enumerable: true,
  get: function () { return chunkNAATBUHR_cjs.CircularProgress; }
});
Object.defineProperty(exports, "Progress", {
  enumerable: true,
  get: function () { return chunkNAATBUHR_cjs.Progress; }
});
Object.defineProperty(exports, "circularProgressVariants", {
  enumerable: true,
  get: function () { return chunkNAATBUHR_cjs.circularProgressVariants; }
});
Object.defineProperty(exports, "progressBarFillVariants", {
  enumerable: true,
  get: function () { return chunkNAATBUHR_cjs.progressBarFillVariants; }
});
Object.defineProperty(exports, "progressBarTrackVariants", {
  enumerable: true,
  get: function () { return chunkNAATBUHR_cjs.progressBarTrackVariants; }
});
Object.defineProperty(exports, "QuickAction", {
  enumerable: true,
  get: function () { return chunkBBCXRXHI_cjs.QuickAction; }
});
Object.defineProperty(exports, "QuickActionGroup", {
  enumerable: true,
  get: function () { return chunkBBCXRXHI_cjs.QuickActionGroup; }
});
Object.defineProperty(exports, "QuickActionIcons", {
  enumerable: true,
  get: function () { return chunkBBCXRXHI_cjs.QuickActionIcons; }
});
Object.defineProperty(exports, "quickActionIconVariants", {
  enumerable: true,
  get: function () { return chunkBBCXRXHI_cjs.quickActionIconVariants; }
});
Object.defineProperty(exports, "quickActionVariants", {
  enumerable: true,
  get: function () { return chunkBBCXRXHI_cjs.quickActionVariants; }
});
Object.defineProperty(exports, "Radio", {
  enumerable: true,
  get: function () { return chunkXZB73CF4_cjs.Radio; }
});
Object.defineProperty(exports, "RadioGroup", {
  enumerable: true,
  get: function () { return chunkXZB73CF4_cjs.RadioGroup; }
});
Object.defineProperty(exports, "radioVariants", {
  enumerable: true,
  get: function () { return chunkXZB73CF4_cjs.radioVariants; }
});
Object.defineProperty(exports, "RecordButton", {
  enumerable: true,
  get: function () { return chunkHLW3XD5R_cjs.RecordButton; }
});
Object.defineProperty(exports, "formatDuration", {
  enumerable: true,
  get: function () { return chunkHLW3XD5R_cjs.formatDuration; }
});
Object.defineProperty(exports, "recordButtonVariants", {
  enumerable: true,
  get: function () { return chunkHLW3XD5R_cjs.recordButtonVariants; }
});
Object.defineProperty(exports, "recordingIndicatorVariants", {
  enumerable: true,
  get: function () { return chunkHLW3XD5R_cjs.recordingIndicatorVariants; }
});
Object.defineProperty(exports, "DateButton", {
  enumerable: true,
  get: function () { return chunkEF46XW4Z_cjs.DateButton; }
});
Object.defineProperty(exports, "DatePicker", {
  enumerable: true,
  get: function () { return chunkEF46XW4Z_cjs.DatePicker; }
});
Object.defineProperty(exports, "RadioOption", {
  enumerable: true,
  get: function () { return chunkEF46XW4Z_cjs.RadioOption; }
});
Object.defineProperty(exports, "SchedulePicker", {
  enumerable: true,
  get: function () { return chunkEF46XW4Z_cjs.SchedulePicker; }
});
Object.defineProperty(exports, "TimeButton", {
  enumerable: true,
  get: function () { return chunkEF46XW4Z_cjs.TimeButton; }
});
Object.defineProperty(exports, "TimePicker", {
  enumerable: true,
  get: function () { return chunkEF46XW4Z_cjs.TimePicker; }
});
Object.defineProperty(exports, "dateButtonVariants", {
  enumerable: true,
  get: function () { return chunkEF46XW4Z_cjs.dateButtonVariants; }
});
Object.defineProperty(exports, "radioOptionVariants", {
  enumerable: true,
  get: function () { return chunkEF46XW4Z_cjs.radioOptionVariants; }
});
Object.defineProperty(exports, "timeButtonVariants", {
  enumerable: true,
  get: function () { return chunkEF46XW4Z_cjs.timeButtonVariants; }
});
Object.defineProperty(exports, "Badge", {
  enumerable: true,
  get: function () { return chunkEKIQE524_cjs.Badge; }
});
Object.defineProperty(exports, "badgeVariants", {
  enumerable: true,
  get: function () { return chunkEKIQE524_cjs.badgeVariants; }
});
Object.defineProperty(exports, "Breadcrumb", {
  enumerable: true,
  get: function () { return chunkPEFJAWNR_cjs.Breadcrumb; }
});
Object.defineProperty(exports, "BreadcrumbSlash", {
  enumerable: true,
  get: function () { return chunkPEFJAWNR_cjs.BreadcrumbSlash; }
});
Object.defineProperty(exports, "Button", {
  enumerable: true,
  get: function () { return chunkMKJDBXX4_cjs.Button; }
});
Object.defineProperty(exports, "buttonVariants", {
  enumerable: true,
  get: function () { return chunkMKJDBXX4_cjs.buttonVariants; }
});
Object.defineProperty(exports, "Card", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.Card; }
});
Object.defineProperty(exports, "CardActions", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardActions; }
});
Object.defineProperty(exports, "CardBadge", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardBadge; }
});
Object.defineProperty(exports, "CardCollapsible", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardCollapsible; }
});
Object.defineProperty(exports, "CardContent", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardContent; }
});
Object.defineProperty(exports, "CardDescription", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardDescription; }
});
Object.defineProperty(exports, "CardDivider", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardDivider; }
});
Object.defineProperty(exports, "CardFooter", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardFooter; }
});
Object.defineProperty(exports, "CardHeader", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardHeader; }
});
Object.defineProperty(exports, "CardMedia", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardMedia; }
});
Object.defineProperty(exports, "CardStat", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardStat; }
});
Object.defineProperty(exports, "CardTitle", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.CardTitle; }
});
Object.defineProperty(exports, "cardAccentVariants", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.cardAccentVariants; }
});
Object.defineProperty(exports, "cardVariants", {
  enumerable: true,
  get: function () { return chunkHRA4FUO6_cjs.cardVariants; }
});
Object.defineProperty(exports, "Checkbox", {
  enumerable: true,
  get: function () { return chunkQYJ7RQJ2_cjs.Checkbox; }
});
Object.defineProperty(exports, "CheckboxGroup", {
  enumerable: true,
  get: function () { return chunkQYJ7RQJ2_cjs.CheckboxGroup; }
});
Object.defineProperty(exports, "checkboxVariants", {
  enumerable: true,
  get: function () { return chunkQYJ7RQJ2_cjs.checkboxVariants; }
});
Object.defineProperty(exports, "DateInput", {
  enumerable: true,
  get: function () { return chunkKVSUL3EW_cjs.DateInput; }
});
Object.defineProperty(exports, "Dropdown", {
  enumerable: true,
  get: function () { return chunkFIXAVBUA_cjs.Dropdown; }
});
Object.defineProperty(exports, "DropdownContent", {
  enumerable: true,
  get: function () { return chunkFIXAVBUA_cjs.DropdownContent; }
});
Object.defineProperty(exports, "DropdownHeader", {
  enumerable: true,
  get: function () { return chunkFIXAVBUA_cjs.DropdownHeader; }
});
Object.defineProperty(exports, "DropdownItem", {
  enumerable: true,
  get: function () { return chunkFIXAVBUA_cjs.DropdownItem; }
});
Object.defineProperty(exports, "DropdownLabel", {
  enumerable: true,
  get: function () { return chunkFIXAVBUA_cjs.DropdownLabel; }
});
Object.defineProperty(exports, "DropdownSeparator", {
  enumerable: true,
  get: function () { return chunkFIXAVBUA_cjs.DropdownSeparator; }
});
Object.defineProperty(exports, "Input", {
  enumerable: true,
  get: function () { return chunkVV4N4WY6_cjs.Input; }
});
Object.defineProperty(exports, "inputVariants", {
  enumerable: true,
  get: function () { return chunkVV4N4WY6_cjs.inputVariants; }
});
Object.defineProperty(exports, "useCommandK", {
  enumerable: true,
  get: function () { return chunkR4DM4635_cjs.useCommandK; }
});
Object.defineProperty(exports, "useIsDesktop", {
  enumerable: true,
  get: function () { return chunkR4DM4635_cjs.useIsDesktop; }
});
Object.defineProperty(exports, "useIsLargeDesktop", {
  enumerable: true,
  get: function () { return chunkR4DM4635_cjs.useIsLargeDesktop; }
});
Object.defineProperty(exports, "useIsMobile", {
  enumerable: true,
  get: function () { return chunkR4DM4635_cjs.useIsMobile; }
});
Object.defineProperty(exports, "useIsMobileOrTablet", {
  enumerable: true,
  get: function () { return chunkR4DM4635_cjs.useIsMobileOrTablet; }
});
Object.defineProperty(exports, "useIsSmallTablet", {
  enumerable: true,
  get: function () { return chunkR4DM4635_cjs.useIsSmallTablet; }
});
Object.defineProperty(exports, "useIsTablet", {
  enumerable: true,
  get: function () { return chunkR4DM4635_cjs.useIsTablet; }
});
Object.defineProperty(exports, "useKeyboardShortcut", {
  enumerable: true,
  get: function () { return chunkR4DM4635_cjs.useKeyboardShortcut; }
});
Object.defineProperty(exports, "useMediaQuery", {
  enumerable: true,
  get: function () { return chunkR4DM4635_cjs.useMediaQuery; }
});
Object.defineProperty(exports, "useTheme", {
  enumerable: true,
  get: function () { return chunk2O7D6F67_cjs.useTheme; }
});
Object.defineProperty(exports, "usePrefersReducedMotion", {
  enumerable: true,
  get: function () { return chunk6HFFWEM3_cjs.usePrefersReducedMotion; }
});
Object.defineProperty(exports, "useFocusTrap", {
  enumerable: true,
  get: function () { return chunkBR2XGATJ_cjs.useFocusTrap; }
});
Object.defineProperty(exports, "useClickOutside", {
  enumerable: true,
  get: function () { return chunkSWMRCGL4_cjs.useClickOutside; }
});
Object.defineProperty(exports, "useEscapeKey", {
  enumerable: true,
  get: function () { return chunkFHY3K6PL_cjs.useEscapeKey; }
});
Object.defineProperty(exports, "formatPhoneNumber", {
  enumerable: true,
  get: function () { return chunkBTJHYGPI_cjs.formatPhoneNumber; }
});
Object.defineProperty(exports, "isPhoneNumberEmpty", {
  enumerable: true,
  get: function () { return chunkBTJHYGPI_cjs.isPhoneNumberEmpty; }
});
Object.defineProperty(exports, "isValidPhoneNumber", {
  enumerable: true,
  get: function () { return chunkBTJHYGPI_cjs.isValidPhoneNumber; }
});
Object.defineProperty(exports, "unformatPhoneNumber", {
  enumerable: true,
  get: function () { return chunkBTJHYGPI_cjs.unformatPhoneNumber; }
});
Object.defineProperty(exports, "calculateAge", {
  enumerable: true,
  get: function () { return chunkKMN7JX2X_cjs.calculateAge; }
});
Object.defineProperty(exports, "formatDateValue", {
  enumerable: true,
  get: function () { return chunkKMN7JX2X_cjs.formatDateValue; }
});
Object.defineProperty(exports, "isDateEmpty", {
  enumerable: true,
  get: function () { return chunkKMN7JX2X_cjs.isDateEmpty; }
});
Object.defineProperty(exports, "isDateInFuture", {
  enumerable: true,
  get: function () { return chunkKMN7JX2X_cjs.isDateInFuture; }
});
Object.defineProperty(exports, "isDateInPast", {
  enumerable: true,
  get: function () { return chunkKMN7JX2X_cjs.isDateInPast; }
});
Object.defineProperty(exports, "isValidDate", {
  enumerable: true,
  get: function () { return chunkKMN7JX2X_cjs.isValidDate; }
});
Object.defineProperty(exports, "isValidDrivingAge", {
  enumerable: true,
  get: function () { return chunkKMN7JX2X_cjs.isValidDrivingAge; }
});
Object.defineProperty(exports, "parseDateValue", {
  enumerable: true,
  get: function () { return chunkKMN7JX2X_cjs.parseDateValue; }
});
Object.defineProperty(exports, "miewebUIPreset", {
  enumerable: true,
  get: function () { return chunkSJ3BF4BO_cjs.miewebUIPreset; }
});
Object.defineProperty(exports, "miewebUISafelist", {
  enumerable: true,
  get: function () { return chunkSJ3BF4BO_cjs.miewebUISafelist; }
});
Object.defineProperty(exports, "Alert", {
  enumerable: true,
  get: function () { return chunkIY7UQPDO_cjs.Alert; }
});
Object.defineProperty(exports, "AlertDescription", {
  enumerable: true,
  get: function () { return chunkIY7UQPDO_cjs.AlertDescription; }
});
Object.defineProperty(exports, "AlertTitle", {
  enumerable: true,
  get: function () { return chunkIY7UQPDO_cjs.AlertTitle; }
});
Object.defineProperty(exports, "alertVariants", {
  enumerable: true,
  get: function () { return chunkIY7UQPDO_cjs.alertVariants; }
});
Object.defineProperty(exports, "AudioPlayer", {
  enumerable: true,
  get: function () { return chunkOIUNIDUY_cjs.AudioPlayer; }
});
Object.defineProperty(exports, "ProgressBar", {
  enumerable: true,
  get: function () { return chunkOIUNIDUY_cjs.ProgressBar; }
});
Object.defineProperty(exports, "audioPlayerVariants", {
  enumerable: true,
  get: function () { return chunkOIUNIDUY_cjs.audioPlayerVariants; }
});
Object.defineProperty(exports, "formatAudioTime", {
  enumerable: true,
  get: function () { return chunkOIUNIDUY_cjs.formatTime; }
});
Object.defineProperty(exports, "playButtonVariants", {
  enumerable: true,
  get: function () { return chunkOIUNIDUY_cjs.playButtonVariants; }
});
Object.defineProperty(exports, "AudioRecorder", {
  enumerable: true,
  get: function () { return chunk53K3KWXQ_cjs.AudioRecorder; }
});
Object.defineProperty(exports, "audioRecorderVariants", {
  enumerable: true,
  get: function () { return chunk53K3KWXQ_cjs.audioRecorderVariants; }
});
Object.defineProperty(exports, "controlButtonVariants", {
  enumerable: true,
  get: function () { return chunk53K3KWXQ_cjs.controlButtonVariants; }
});
Object.defineProperty(exports, "formatTime", {
  enumerable: true,
  get: function () { return chunk53K3KWXQ_cjs.formatTime; }
});
Object.defineProperty(exports, "waveformContainerVariants", {
  enumerable: true,
  get: function () { return chunk53K3KWXQ_cjs.waveformContainerVariants; }
});
Object.defineProperty(exports, "Avatar", {
  enumerable: true,
  get: function () { return chunk2J2V4TMJ_cjs.Avatar; }
});
Object.defineProperty(exports, "AvatarGroup", {
  enumerable: true,
  get: function () { return chunk2J2V4TMJ_cjs.AvatarGroup; }
});
Object.defineProperty(exports, "avatarVariants", {
  enumerable: true,
  get: function () { return chunk2J2V4TMJ_cjs.avatarVariants; }
});
Object.defineProperty(exports, "getInitials", {
  enumerable: true,
  get: function () { return chunk2J2V4TMJ_cjs.getInitials; }
});
Object.defineProperty(exports, "cn", {
  enumerable: true,
  get: function () { return chunkOR5DRJCW_cjs.cn; }
});
Object.defineProperty(exports, "AgGridReact", {
  enumerable: true,
  get: function () { return agGridReact.AgGridReact; }
});
exports.AGGrid = AGGrid;
exports.AIChat = AIChat;
exports.AIChatModal = AIChatModal;
exports.AIChatTrigger = AIChatTrigger;
exports.AILogoIcon = AILogoIcon;
exports.AIMessageDisplay = AIMessageDisplay;
exports.AITypingIndicator = AITypingIndicator;
exports.AppHeader = AppHeader;
exports.AppHeaderActions = AppHeaderActions;
exports.AppHeaderDivider = AppHeaderDivider;
exports.AppHeaderIconButton = AppHeaderIconButton;
exports.AppHeaderSearch = AppHeaderSearch;
exports.AppHeaderSection = AppHeaderSection;
exports.AppHeaderTitle = AppHeaderTitle;
exports.AppHeaderUserMenu = AppHeaderUserMenu;
exports.AttachmentPicker = AttachmentPicker;
exports.AttachmentPreview = AttachmentPreview;
exports.AttachmentPreviewItem = AttachmentPreviewItem;
exports.AvatarNameRenderer = AvatarNameRenderer;
exports.BooleanRenderer = BooleanRenderer;
exports.CameraButton = CameraButton;
exports.CellRenderers = CellRenderers;
exports.CharacterCounter = CharacterCounter;
exports.ChevronIcon = ChevronIcon;
exports.CloseIcon = CloseIcon;
exports.CommandPalette = CommandPalette;
exports.CommandPaletteProvider = CommandPaletteProvider;
exports.CommandPaletteTrigger = CommandPaletteTrigger;
exports.CompanyRenderer = CompanyRenderer;
exports.ConversationHeader = ConversationHeader;
exports.ConversationListItem = ConversationListItem;
exports.ConversationListSkeleton = ConversationListSkeleton;
exports.CurrencyRenderer = CurrencyRenderer;
exports.DateRenderer = DateRenderer;
exports.DateSeparator = DateSeparator;
exports.DocumentDetectionOverlay = DocumentDetectionOverlay;
exports.DocumentScanner = DocumentScanner;
exports.DomainRenderer = DomainRenderer;
exports.DragDropZone = DragDropZone;
exports.DropZone = DropZone;
exports.EmailRenderer = EmailRenderer;
exports.EmptyState = EmptyState;
exports.EngagementScoreRenderer = EngagementScoreRenderer;
exports.FilePreview = FilePreview;
exports.FloatingAIChat = FloatingAIChat;
exports.LightboxModal = LightboxModal;
exports.LinkedInRenderer = LinkedInRenderer;
exports.LoadMoreButton = LoadMoreButton;
exports.MCPToolCallDisplay = MCPToolCallDisplay;
exports.MemoizedAvatarNameRenderer = MemoizedAvatarNameRenderer;
exports.MemoizedBooleanRenderer = MemoizedBooleanRenderer;
exports.MemoizedCompanyRenderer = MemoizedCompanyRenderer;
exports.MemoizedCurrencyRenderer = MemoizedCurrencyRenderer;
exports.MemoizedDateRenderer = MemoizedDateRenderer;
exports.MemoizedDomainRenderer = MemoizedDomainRenderer;
exports.MemoizedEmailRenderer = MemoizedEmailRenderer;
exports.MemoizedEngagementScoreRenderer = MemoizedEngagementScoreRenderer;
exports.MemoizedLinkedInRenderer = MemoizedLinkedInRenderer;
exports.MemoizedNumberRenderer = MemoizedNumberRenderer;
exports.MemoizedPhoneRenderer = MemoizedPhoneRenderer;
exports.MemoizedProgressRenderer = MemoizedProgressRenderer;
exports.MemoizedStatusBadgeRenderer = MemoizedStatusBadgeRenderer;
exports.MemoizedTagsRenderer = MemoizedTagsRenderer;
exports.MessageAvatar = MessageAvatar;
exports.MessageBubble = MessageBubble;
exports.MessageComposer = MessageComposer;
exports.MessageList = MessageList;
exports.MessageStatusIcon = MessageStatusIcon;
exports.MessageThread = MessageThread;
exports.MessagingSplitView = MessagingSplitView;
exports.NumberRenderer = NumberRenderer;
exports.PhoneRenderer = PhoneRenderer;
exports.ProgressRenderer = ProgressRenderer;
exports.ReadReceiptIndicator = ReadReceiptIndicator;
exports.RefreshIcon = RefreshIcon;
exports.ResourceLink = ResourceLink;
exports.SendButton = SendButton;
exports.SendIcon = SendIcon;
exports.Sidebar = Sidebar;
exports.SidebarContent = SidebarContent;
exports.SidebarFooter = SidebarFooter;
exports.SidebarHeader = SidebarHeader;
exports.SidebarMobileToggle = SidebarMobileToggle;
exports.SidebarNav = SidebarNav;
exports.SidebarNavGroup = SidebarNavGroup;
exports.SidebarNavItem = SidebarNavItem;
exports.SidebarProvider = SidebarProvider;
exports.SidebarSearch = SidebarSearch;
exports.SidebarToggle = SidebarToggle;
exports.SkeletonMessage = SkeletonMessage;
exports.SparklesIcon = SparklesIcon;
exports.SpinnerIcon = SpinnerIcon;
exports.StatusBadgeRenderer = StatusBadgeRenderer;
exports.SuggestedActions = SuggestedActions;
exports.TagsRenderer = TagsRenderer;
exports.Toast = Toast;
exports.ToastContainer = ToastContainer;
exports.ToastProvider = ToastProvider;
exports.ToolStatusIcon = ToolStatusIcon;
exports.TypingIndicator = TypingIndicator;
exports.WebcamModal = WebcamModal;
exports.bubbleVariants = bubbleVariants2;
exports.formatDateLabel = formatDateLabel;
exports.formatFileSize = formatFileSize2;
exports.formatLastSeen = formatLastSeen;
exports.formatPhoneDisplay = formatPhoneDisplay;
exports.generateAttachmentId = generateAttachmentId;
exports.getConversationSubtitle = getConversationSubtitle;
exports.getConversationTitle = getConversationTitle;
exports.getFileType = getFileType;
exports.getToolIcon = getToolIcon;
exports.groupMessagesByDate = groupMessagesByDate;
exports.headerVariants = headerVariants;
exports.isSameSenderGroup = isSameSenderGroup;
exports.sendButtonVariants = sendButtonVariants;
exports.statusColors = statusColors;
exports.useCamera = useCamera;
exports.useCommandPalette = useCommandPalette;
exports.useDocumentDetection = useDocumentDetection;
exports.useFileUpload = useFileUpload;
exports.useMessageScroll = useMessageScroll;
exports.useMessages = useMessages;
exports.useReadReceipts = useReadReceipts;
exports.useSidebar = useSidebar;
exports.useToast = useToast;
exports.useTypingIndicator = useTypingIndicator;
exports.validateFile = validateFile;
//# sourceMappingURL=index.cjs.map
//# sourceMappingURL=index.cjs.map